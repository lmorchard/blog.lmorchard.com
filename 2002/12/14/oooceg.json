{"comments_archived":true,"date":"2002-12-14T00:00:00.000Z","layout":"post","title":"Think of everything but the obvious first","wordpress_id":331,"wordpress_slug":"oooceg","wordpress_url":"http://www.decafbad.com/blog/?p=331","url":"/2002/12/14/oooceg/","summary":"<p></p><p>Today&apos;s revelation while tinkering with my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/PersonalWebProxy\">PersonalWebProxy</a>:  Decompressed content is larger than compressed content.  </p><p></p>\n<p></p><p>See, I was decompressing gzipped content streams in the proxy in order to fiddle with the content before it got to the browser, but then I noticed that browsers kept only displaying part of the content.  I remove the in-proxy decompression, things are fine.  Put it back in, things get cut short.  I poke for a few hours at various bits and parts, to no avail.  </p><p></p>\n<p></p><p>Then, finally I remember...  &quot;Hey, you know, I think browsers pay attention to that Content-Length header.  And hey, you know...  decompressed content is larger than compressed content.&quot;  Bingo.  Problem solved by keeping the Content-Length header updated with the length of modified content.  This makes me feel very dumb, because it&apos;s not like I haven&apos;t written a handful or two both of HTTP clients and servers.  And I&apos;ve written code that uses the Content-Length header, over and over again.  I&apos;d&apos;ve thought this would be something I&apos;d remember more quickly.</p><p></p>\n<p></p><p>More often than I&apos;d like to admit, remembering simple and obvious things like the above are what unlock problems that I&apos;d been banging my head against.  The last revelation of this nature I had while frustrated at a project at work was:  &quot;Not all months are 31 days.&quot;  And before that, &quot;Not all days in a year are 24 hours long, due daylight savings time.&quot;</p><p></p>\n<p></p><p>Trying to think of more, but I thought I&apos;d share. Maybe I&apos;ll start a wiki topic for sage bits of the <a href=\"http://www.decafbad.com/twiki/bin/view/Main/ObviousInHindsight\">ObviousInHindsight</a>.<br>\n</p>\n","path":"2002/12/14/oooceg","content":"<p><p>Today&#39;s revelation while tinkering with my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/PersonalWebProxy\">PersonalWebProxy</a>:  Decompressed content is larger than compressed content.  </p></p>\n<p><p>See, I was decompressing gzipped content streams in the proxy in order to fiddle with the content before it got to the browser, but then I noticed that browsers kept only displaying part of the content.  I remove the in-proxy decompression, things are fine.  Put it back in, things get cut short.  I poke for a few hours at various bits and parts, to no avail.  </p></p>\n<p><p>Then, finally I remember...  &quot;Hey, you know, I think browsers pay attention to that Content-Length header.  And hey, you know...  decompressed content is larger than compressed content.&quot;  Bingo.  Problem solved by keeping the Content-Length header updated with the length of modified content.  This makes me feel very dumb, because it&#39;s not like I haven&#39;t written a handful or two both of HTTP clients and servers.  And I&#39;ve written code that uses the Content-Length header, over and over again.  I&#39;d&#39;ve thought this would be something I&#39;d remember more quickly.</p></p>\n<p><p>More often than I&#39;d like to admit, remembering simple and obvious things like the above are what unlock problems that I&#39;d been banging my head against.  The last revelation of this nature I had while frustrated at a project at work was:  &quot;Not all months are 31 days.&quot;  And before that, &quot;Not all days in a year are 24 hours long, due daylight savings time.&quot;</p></p>\n<p><p>Trying to think of more, but I thought I&#39;d share. Maybe I&#39;ll start a wiki topic for sage bits of the <a href=\"http://www.decafbad.com/twiki/bin/view/Main/ObviousInHindsight\">ObviousInHindsight</a>.<br />\n</p>\n<!--more-->\nshortname=oooceg</p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221087820\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://www.perceive.net\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=9e76d0bf99487acc610624122a6317f3&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://www.perceive.net\">Eric Vitiello</a>\n                </div>\n                <a href=\"#comment-221087820\" class=\"permalink\"><time datetime=\"2002-12-14T17:55:33\">2002-12-14T17:55:33</time></a>\n            </div>\n            <div class=\"content\">I find that 80% of my programming time is spent solving obvious and mundane problems.  The other 20% is actually productive...  If I could fins a way to get past the things that make me smack my head, I&#39;d be a programming god.</div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221087821&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://little-bits.blogspot.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=808b65db5da2d018b3b034e2b69821e6&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://little-bits.blogspot.com&quot;&gt;Paul Morriss&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221087821&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2002-12-19T12:03:09&quot;&gt;2002-12-19T12:03:09&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;I spent a while working on a system for PowerGen, a UK electricity company. Electricity is traded here in half hour slots and I reckon I spent about 25% of my time coding to cope with the time when there are 46 or 50 half hour slots in a day sometimes.\n</code></pre><p>There were all sorts of calculations that needed to be done for the generators to do with ramping up and ramping down and changing output. The companies promised never to change anything during the autumn/fall clock change when we had a &quot;repeated&quot; hour.</div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221087824&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://yarinareth.net/caveatlector/&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=def808e6072af95b27c6d298fbb05a2b&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://yarinareth.net/caveatlector/&quot;&gt;Dorothea Salo&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221087824&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2002-12-19T19:52:38&quot;&gt;2002-12-19T19:52:38&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;Ah, yes, the &quot;I am SUCH an idiot!&quot; moments. I dearly *hope* they happen to everyone.\n</code></pre><p>&#39;Cuz if they don&#39;t... man, I am <em>such</em> an idiot!</div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}