[
  {
    "title": "Continual Blogployment",
    "tags": [
      "metablogging",
      "webdev",
      "js",
      "gulp",
      "github",
      "travis",
      "s3",
      "amazon",
      "devops"
    ],
    "year": "2015",
    "month": "10",
    "day": "22",
    "isDir": false,
    "slug": "blogging-via-travis",
    "date": "2015-10-22T12:00:00.000Z",
    "postName": "2015-10-22-blogging-via-travis",
    "html": "<p>Ever since <a href=\"http://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\">I switched this blog over to a Gulp-based toolchain</a> - <em>holy crap, 2 years ago</em> - I had a TODO to wire this thing up for continual deployment. Well, today I finally did it. </p>\n<!--more-->\n\n<p>Just to test the cloud machinery I&#39;m (ab)using here, I&#39;m writing this post as a new commit on GitHub in a browser. When I get done and commit this, Travis CI will fire up, install my node-based blog code and build all the content. Assuming that goes well, my code on Travis will then publish any changes in the content to Amazon S3. And, voila, I will have blogged via the magic of cheap cloud infrastructure.</p>\n<p>Up until now, I&#39;ve been doing this all from my laptop: Write a post in Vim, commit to git, build &amp; deploy from my local machine. I&#39;d push to GitHub to work in the open and have a handy backup. But from here on, the push to GitHub will actually make the magic happen!</p>\n<p>If you&#39;re curious about the plumbing, <a href=\"https://github.com/lmorchard/blog.lmorchard.com/compare/5992311ade7acc0e9dbeb0352ac4097c687be1a5...10149c0e520f7e75536535ff563dfe42aa30b960\">the changes in my recent commits</a> can tell the exact story. But, what I did in a nutshell is this:</p>\n<ul>\n<li><a href=\"https://github.com/lmorchard/blog.lmorchard.com/commit/4c029ab9a6d3f5869cee02b7265e0ad41908a8c4\">Switched to using environment vars to configure AWS credentials for S3 publishing</a>.</li>\n<li>Used <a href=\"http://docs.travis-ci.com/user/environment-variables/#Encrypted-Variables\"><code>travis secure</code></a> to supply credentials in encrypted environment vars.</li>\n<li>Started <a href=\"https://github.com/lmorchard/blog.lmorchard.com/commit/4b525710760ad70c0d83d910585e7bd9ddd80583\">maintaining a copy of file hashes on the site</a> so that <a href=\"https://www.npmjs.com/package/gulp-awspublish\">gulp-awspublish</a> will only publish changes.</li>\n<li>Composed a <a href=\"https://github.com/lmorchard/blog.lmorchard.com/blob/master/.travis.yml\">.travis.yml</a> to build &amp; deploy everything.</li>\n</ul>\n<p>And, if you&#39;re reading this post, then that means everything worked when I hit the &quot;Commit new file&quot; button! (And, if you&#39;re reading <em>this</em> sentence, then I was able to update this post, too!)</p>\n",
    "body": "Ever since [I switched this blog over to a Gulp-based toolchain][gulp-blog] - *holy crap, 2 years ago* - I had a TODO to wire this thing up for continual deployment. Well, today I finally did it. \n\n<!--more-->\n\nJust to test the cloud machinery I'm (ab)using here, I'm writing this post as a new commit on GitHub in a browser. When I get done and commit this, Travis CI will fire up, install my node-based blog code and build all the content. Assuming that goes well, my code on Travis will then publish any changes in the content to Amazon S3. And, voila, I will have blogged via the magic of cheap cloud infrastructure.\n\nUp until now, I've been doing this all from my laptop: Write a post in Vim, commit to git, build & deploy from my local machine. I'd push to GitHub to work in the open and have a handy backup. But from here on, the push to GitHub will actually make the magic happen!\n\nIf you're curious about the plumbing, [the changes in my recent commits][recent-commits] can tell the exact story. But, what I did in a nutshell is this:\n\n* [Switched to using environment vars to configure AWS credentials for S3 publishing][env-config].\n* Used [`travis secure`][travis-secure] to supply credentials in encrypted environment vars.\n* Started [maintaining a copy of file hashes on the site][hash-stash] so that [gulp-awspublish][] will only publish changes.\n* Composed a [.travis.yml][travis-yml] to build & deploy everything.\n\nAnd, if you're reading this post, then that means everything worked when I hit the \"Commit new file\" button! (And, if you're reading *this* sentence, then I was able to update this post, too!)\n\n[env-config]: https://github.com/lmorchard/blog.lmorchard.com/commit/4c029ab9a6d3f5869cee02b7265e0ad41908a8c4\n[gulp-awspublish]: https://www.npmjs.com/package/gulp-awspublish\n[hash-stash]: https://github.com/lmorchard/blog.lmorchard.com/commit/4b525710760ad70c0d83d910585e7bd9ddd80583\n[travis-yml]: https://github.com/lmorchard/blog.lmorchard.com/blob/master/.travis.yml\n[travis-secure]: http://docs.travis-ci.com/user/environment-variables/#Encrypted-Variables\n[recent-commits]: https://github.com/lmorchard/blog.lmorchard.com/compare/5992311ade7acc0e9dbeb0352ac4097c687be1a5...10149c0e520f7e75536535ff563dfe42aa30b960\n[gulp-blog]: http://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\n",
    "parentPath": "../blog.lmorchard.com/posts/archives/2015",
    "path": "2015/10/22/blogging-via-travis",
    "summary": "<p>Ever since <a href=\"http://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\">I switched this blog over to a Gulp-based toolchain</a> - <em>holy crap, 2 years ago</em> - I had a TODO to wire this thing up for continual deployment. Well, today I finally did it. </p>\n"
  },
  {
    "title": "How webdev has been getting better",
    "author": "lmorchard",
    "layout": "post",
    "permalink": "/2012/07/10/webdev-more-better",
    "dsq_thread_id": [
      1107338707
    ],
    "categories": [
      "Uncategorized"
    ],
    "tags": [
      "devops",
      "mozilla",
      "webdev"
    ],
    "year": "2012",
    "month": "07",
    "day": "10",
    "isDir": false,
    "slug": "webdev-more-better",
    "date": "2012-07-10T12:00:00.000Z",
    "postName": "2012-07-10-webdev-more-better",
    "html": "<p>So, in the last thing I posted, I wrote about how fixing problems on live web sites <a href=\"http://blog.lmorchard.com/2012/07/10/webdev-in-spac\">feels like fixing space robots</a>. At <a target=\"_blank\" title=\"Mozilla\" href=\"https://www.mozilla.org/?utm_source=wordpress%20blog&utm_medium=content%20link&utm_campaign=promote%20mdn\">Mozilla</a>, though, things have been getting steadily better and more interesting:</p>\n<p><a href=\"http://www.amazon.com/gp/product/B004D18MCK/ref=as_li_ss_il?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B004D18MCK&amp;linkCode=as2&amp;tag=0xdecafbad01-20\"><img src=\"http://ecx.images-amazon.com/images/I/41AvY4p2haL._SL160_.jpg\" style=\"float:left; margin: 1em 1em 1em 0\" /></a></p>\n<p>There&#8217;s still the <em>sysadmin-as-remote-pair-of-hands-driven-by-trouble-tickets</em> thing going on, but less so every day. More and more, we&#8217;re getting into <a href=\"http://www.slideshare.net/MattBrandt/mozilla-continuous-deploment-on-sumo\">continuous deployment</a>. Our sysadmins are really smart cookies: They&#8217;re steadily replacing themselves with scripts of varying sizes. That way, they can get on to more interesting things. In fact, just recently, they gave us a great Big Red Button that deploys code from a git repository to the live site on demand. And, for some reason, I&#8217;m one of the people who got a key to it.</p>\n<p>Okay, maybe not <a href=\"http://www.amazon.com/gp/product/B004D18MCK/ref=as_li_ss_il?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B004D18MCK&amp;linkCode=as2&amp;tag=0xdecafbad01-20\"><em>that</em> exact button</a>, but ours is very keen. Of course, when it broke once, I felt like the Pakled on the right (and not Geordi):</p>\n<p><span class='embed-youtube' style='text-align:center; display: block;'></span></p>\n<p>But, the Big Red Button hasn&#8217;t broken very often. So, I&#8217;d rather be a Pakled some of the time than pretend to be a rocket scientist all of the time.</p>\n<p><a href=\"http://octodex.github.com/\"><img src=\"http://octodex.github.com/images/twenty-percent-cooler-octocat.png\" style=\"width: 150px; float: right; margin: 1em 0 1em 1em\" /></a> Oh yeah, and <a href=\"https://github.com/mozilla/\">we&#8217;re using GitHub a lot these days</a>. It&#8217;s crazypants awesome for collaboration, and it fits right in with our style because we want to do everything in the open anyway. We&#8217;ve even somehow lured people who don&#8217;t normally code into <a href=\"https://github.com/mozilla/kuma/commit/1a8038215a2c4bb7fba5ff098875d034704d79bd\">submitting Pull Requests</a>. And, it&#8217;s amazingly powerful to refer to specific lines of code and commits by URL in IRC or email.</p>\n<p><a href=\"http://vagrantup.com/\"><img src=\"http://vagrantup.com/static/images/hippie.png\" style=\"width: 150px; float: left; margin: 1em 1em 1em 0\" /></a> I&#8217;ve also been getting a lot better at building development environments, <a href=\"http://opensourcebridge.org/wiki/2011/Inviting_Contributors_to_Open_Source_Webdev_through_Virtualization\">using Puppet and Vagrant</a> and Amazon EC2. I haven&#8217;t quite gotten to the point where I can borrow IT&#8217;s Puppet manifests directly &#8211; ie. those scripts with which sysadmins are replacing themselves.</p>\n<p>But, we are maintaining the recipes for spinning up dev servers right alongside the code. Our READMEs are shrinking, rather than growing &#8211; and yet we&#8217;re still adding more services and dependencies. I no longer really fear totally jack-knifing my dev rig, because I can just toss it and conjure up another in the time it takes me to run to lunch.</p>\n<p>Let&#8217;s see, what else? I&#8217;m sure I&#8217;ll think of something. Until then, SHIP IT. (The post, I mean.)</p>\n",
    "body": "So, in the last thing I posted, I wrote about how fixing problems on live web sites [feels like fixing space robots][1]. At <a target=\"_blank\" title=\"Mozilla\" href=\"https://www.mozilla.org/?utm_source=wordpress%20blog&utm_medium=content%20link&utm_campaign=promote%20mdn\">Mozilla</a>, though, things have been getting steadily better and more interesting:\r\n\r\n[<img src=\"http://ecx.images-amazon.com/images/I/41AvY4p2haL._SL160_.jpg\" style=\"float:left; margin: 1em 1em 1em 0\" />][2]\r\n\r\nThere&#8217;s still the *sysadmin-as-remote-pair-of-hands-driven-by-trouble-tickets* thing going on, but less so every day. More and more, we&#8217;re getting into [continuous deployment][3]. Our sysadmins are really smart cookies: They&#8217;re steadily replacing themselves with scripts of varying sizes. That way, they can get on to more interesting things. In fact, just recently, they gave us a great Big Red Button that deploys code from a git repository to the live site on demand. And, for some reason, I&#8217;m one of the people who got a key to it.\r\n\r\nOkay, maybe not [*that* exact button][2], but ours is very keen. Of course, when it broke once, I felt like the Pakled on the right (and not Geordi):\r\n\r\n<span class='embed-youtube' style='text-align:center; display: block;'></span>\r\n\r\nBut, the Big Red Button hasn&#8217;t broken very often. So, I&#8217;d rather be a Pakled some of the time than pretend to be a rocket scientist all of the time.\r\n\r\n[<img src=\"http://octodex.github.com/images/twenty-percent-cooler-octocat.png\" style=\"width: 150px; float: right; margin: 1em 0 1em 1em\" />][4] Oh yeah, and [we&#8217;re using GitHub a lot these days][5]. It&#8217;s crazypants awesome for collaboration, and it fits right in with our style because we want to do everything in the open anyway. We&#8217;ve even somehow lured people who don&#8217;t normally code into [submitting Pull Requests][6]. And, it&#8217;s amazingly powerful to refer to specific lines of code and commits by URL in IRC or email.\r\n\r\n[<img src=\"http://vagrantup.com/static/images/hippie.png\" style=\"width: 150px; float: left; margin: 1em 1em 1em 0\" />][7] I&#8217;ve also been getting a lot better at building development environments, [using Puppet and Vagrant][8] and Amazon EC2. I haven&#8217;t quite gotten to the point where I can borrow IT&#8217;s Puppet manifests directly &#8211; ie. those scripts with which sysadmins are replacing themselves.\r\n\r\nBut, we are maintaining the recipes for spinning up dev servers right alongside the code. Our READMEs are shrinking, rather than growing &#8211; and yet we&#8217;re still adding more services and dependencies. I no longer really fear totally jack-knifing my dev rig, because I can just toss it and conjure up another in the time it takes me to run to lunch.\r\n\r\nLet&#8217;s see, what else? I&#8217;m sure I&#8217;ll think of something. Until then, SHIP IT. (The post, I mean.)\r\n\r\n [1]: http://blog.lmorchard.com/2012/07/10/webdev-in-spac\r\n [2]: http://www.amazon.com/gp/product/B004D18MCK/ref=as_li_ss_il?ie=UTF8&camp=1789&creative=390957&creativeASIN=B004D18MCK&linkCode=as2&tag=0xdecafbad01-20\r\n [3]: http://www.slideshare.net/MattBrandt/mozilla-continuous-deploment-on-sumo\r\n [4]: http://octodex.github.com/\r\n [5]: https://github.com/mozilla/\r\n [6]: https://github.com/mozilla/kuma/commit/1a8038215a2c4bb7fba5ff098875d034704d79bd\r\n [7]: http://vagrantup.com/\r\n [8]: http://opensourcebridge.org/wiki/2011/Inviting_Contributors_to_Open_Source_Webdev_through_Virtualization",
    "parentPath": "../blog.lmorchard.com/posts/archives/2012",
    "path": "2012/07/10/webdev-more-better",
    "thumbnail": "http://ecx.images-amazon.com/images/I/41AvY4p2haL._SL160_.jpg"
  }
]