[
  {
    "comments_archived": true,
    "date": "2008-11-01T19:23:23.000Z",
    "layout": "post",
    "tags": [
      "webdev",
      "js",
      "javascript",
      "entries",
      "jquery",
      "zope",
      "zpt",
      "tal",
      "templates"
    ],
    "title": "An unnecessary Template Attribute Language",
    "wordpress_id": 1450,
    "wordpress_slug": "an-unnecessary-template-attribute-language",
    "wordpress_url": "http://decafbad.com/blog/?p=1450",
    "year": "2008",
    "month": "11",
    "day": "01",
    "isDir": false,
    "slug": "an-unnecessary-template-attribute-language",
    "postName": "2008-11-01-an-unnecessary-template-attribute-language",
    "html": "<p>A funny thing happened on the way to building <a href=\"http://svn.mozilla.org/projects/lizardfeeder/trunk/\">a delayed real-time feed display</a>:  I got temporarily obsessed with implementing <a href=\"http://github.com/lmorchard/jquery-tal-template/tree/master\">a template language in JavaScript</a> that, as it turned out later, I didn&#39;t need.  About <a href=\"http://svn.mozilla.org/projects/lizardfeeder/trunk/\">the feed project itself</a>, I hope to write more soon—but for now I want to get this extra template language thing out of my system and see if anyone else might have a use for it.</p>\n<p>See, I had a notion it would be keen if I had access to the same template language on the client as on the server.  I needed to render a number of list items statically on the server with feed entries, then update that list with new entries on the client as they became available through JSON feed polling.  It&#39;d be a pain in the butt to maintain two separate list item templates for client and server, so I reached for a shared template language.</p>\n<p>Never mind that I&#39;d just gotten done writing <a href=\"http://www.amazon.com/gp/product/0470452021?ie=UTF8&amp;tag=0xdecafbad01-20&amp;linkCode=as2&amp;camp=1789&amp;c%0D%0Areative=9325&amp;creativeASIN=0470452021\">a small book on Dojo</a>, and was already aware of the existence of the <a href=\"http://svn.dojotoolkit.org/src/dojox/trunk/dtl/README\">DojoX Django Template Language</a>.  This might&#39;ve worked, since the server end of things was written in Python (though not with Django).  That the JavaScript side already used <a href=\"http://jquery.com/\">jQuery</a> wasn&#39;t <em>too</em> tall a hurdle.  Also, I&#39;m sure there are a handful of other JavaScript/Python template language match-ups to be found.</p>\n<p>But, let&#39;s be honest here:  I&#39;ve always been a fan of Zope&#39;s <a href=\"http://wiki.zope.org/ZPT/TALSpecification14\">Template Attribute Language</a> for their <a href=\"http://wiki.zope.org/ZPT/FrontPage\">Page Templates</a>, and have long wondered how hard it would be to implement.  The concept seems so much cleaner to me than most string-formatting template languages, and the workflow from mockup-to-template and back again has always been appealing to me when it works.  So, when my first few experimental steps in trying my hand at it actually started working, I couldn&#39;t stop coding.  </p>\n<p>And now, <a href=\"http://github.com/lmorchard/jquery-tal-template/tree/master/jquery.taltemplate.js\">the thing</a> is mostly done.  It has no tests, has features left undone, and probably yields plenty of bugs—but I finished it enough to use it practically, and that was long enough to convince me it wasn&#39;t the right tool for the job.  </p>\n<p>Still, though, I can&#39;t help thinking it might be the right tool for <em>some</em> job.  That could be because I spent a lot of time on it, or that I&#39;m unreasonably fond of <a href=\"http://wiki.zope.org/ZPT/TALSpecification14\">TAL</a>, but it still feels like a decent little plugin to have on hand.  Maybe someone reading this will have a similar conclusion.</p>\n<p>Oh and by the way, plain <a href=\"http://jquery.com/\">jQuery</a> turned out to be a better tool for <a href=\"http://svn.mozilla.org/projects/lizardfeeder/trunk/\">the job in question</a>.  This seems to nicely balance the duplicate effort between server and client, demanding only that I stick with semantically significant CSS class names in the server template—something I should be doing anyway:</p>\n<pre><code>        // Clone and populate a new entry.\n        var new_item = $(&#39;#feed-items .entry:last&#39;)\n            .clone()\n            .attr(&#39;class&#39;, entry_classes.join(&#39; &#39;)) \n            .find(&#39;.group span&#39;)\n                .text(tags[&#39;group&#39;])\n            .end()\n            .find(&#39;.title&#39;)\n                .find(&#39;.favicon&#39;)\n                    .attr(&#39;src&#39;, favicon)\n                .end()\n                .find(&#39;.link&#39;)\n                    .attr(&#39;href&#39;, entry.link)\n                    .text(entry.title)\n                .end()\n            .end()\n            .find(&#39;.updated&#39;)\n                .find(&#39;.timeago&#39;)\n                    .attr(&#39;title&#39;, entry.updated)\n                    .text(entry_updated.strftime(&#39;%+&#39;))\n                    .timeago()\n                .end()\n                .find(&#39;.time&#39;)\n                    .text(entry_updated.strftime(&#39;%I:%M %p&#39;))\n                .end()\n            .end()\n            .find(&#39;.author&#39;)\n                .text(entry.author || &#39;n/a&#39;)\n            .end()\n            .prependTo(&#39;#feed-items&#39;)\n            .hide();</code></pre>\n<p>Of course, <em>plain</em> is a relative term here.</p>\n<div id=\"comments\" class=\"comments archived-comments\"><h3>Archived Comments</h3>\n<ul class=\"comments\">\n<li class=\"comment\" id=\"comment-221083366\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=3f398029eea744ce9ba9147aab627557&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"\">brad clements</a>\n</div>\n<a href=\"#comment-221083366\" class=\"permalink\"><time datetime=\"2008-11-03T21:26:42\">2008-11-03T21:26:42</time></a>\n</div>\n<div class=\"content\"><p>Groan,</p>\n<p>Too bad I haven't had a chance to finish documenting (and tweaking) the ATALi project.</p>\n<p>It's a collection of Alternative TAL Implementations.</p>\n<p>It currently has TAL for xslt (server side using libxslt directly or via lxml with metal support)</p>\n<p>and TAL for javascript (no libraries needed, though it does recognize mochikit iterators, no metal)</p>\n<p>https://launchpad.net/atali</p></div>\n</li>\n<li class=\"comment\" id=\"comment-221083367\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://www.jm3.net/\"><img src=\"http://disqus.com/api/users/avatars/jm3.jpg\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://www.jm3.net/\">John Manoogian III (jm3)</a>\n</div>\n<a href=\"#comment-221083367\" class=\"permalink\"><time datetime=\"2008-11-24T18:51:17\">2008-11-24T18:51:17</time></a>\n</div>\n<div class=\"content\"><p>Have you seen \"trimpath\"?</p>\n<p>http://code.google.com/p/trimpath/wiki/JavaScriptTemplates</p></div>\n</li>\n</ul>\n</div>\n",
    "body": "A funny thing happened on the way to building [a delayed real-time feed display][lizardfeeder]:  I got temporarily obsessed with implementing [a template language in JavaScript][jqtal] that, as it turned out later, I didn't need.  About [the feed project itself][lizardfeeder], I hope to write more soon—but for now I want to get this extra template language thing out of my system and see if anyone else might have a use for it.\r\n\r\nSee, I had a notion it would be keen if I had access to the same template language on the client as on the server.  I needed to render a number of list items statically on the server with feed entries, then update that list with new entries on the client as they became available through JSON feed polling.  It'd be a pain in the butt to maintain two separate list item templates for client and server, so I reached for a shared template language.\r\n\r\nNever mind that I'd just gotten done writing [a small book on Dojo][book], and was already aware of the existence of the [DojoX Django Template Language][djt].  This might've worked, since the server end of things was written in Python (though not with Django).  That the JavaScript side already used [jQuery][] wasn't *too* tall a hurdle.  Also, I'm sure there are a handful of other JavaScript/Python template language match-ups to be found.\r\n\r\nBut, let's be honest here:  I've always been a fan of Zope's [Template Attribute Language][tal] for their [Page Templates][pt], and have long wondered how hard it would be to implement.  The concept seems so much cleaner to me than most string-formatting template languages, and the workflow from mockup-to-template and back again has always been appealing to me when it works.  So, when my first few experimental steps in trying my hand at it actually started working, I couldn't stop coding.  \r\n\r\nAnd now, [the thing][thing] is mostly done.  It has no tests, has features left undone, and probably yields plenty of bugs—but I finished it enough to use it practically, and that was long enough to convince me it wasn't the right tool for the job.  \r\n\r\nStill, though, I can't help thinking it might be the right tool for *some* job.  That could be because I spent a lot of time on it, or that I'm unreasonably fond of [TAL][tal], but it still feels like a decent little plugin to have on hand.  Maybe someone reading this will have a similar conclusion.\r\n\r\nOh and by the way, plain [jQuery][] turned out to be a better tool for [the job in question][lizardfeeder].  This seems to nicely balance the duplicate effort between server and client, demanding only that I stick with semantically significant CSS class names in the server template—something I should be doing anyway:\r\n\r\n            // Clone and populate a new entry.\r\n            var new_item = $('#feed-items .entry:last')\r\n                .clone()\r\n                .attr('class', entry_classes.join(' ')) \r\n                .find('.group span')\r\n                    .text(tags['group'])\r\n                .end()\r\n                .find('.title')\r\n                    .find('.favicon')\r\n                        .attr('src', favicon)\r\n                    .end()\r\n                    .find('.link')\r\n                        .attr('href', entry.link)\r\n                        .text(entry.title)\r\n                    .end()\r\n                .end()\r\n                .find('.updated')\r\n                    .find('.timeago')\r\n                        .attr('title', entry.updated)\r\n                        .text(entry_updated.strftime('%+'))\r\n                        .timeago()\r\n                    .end()\r\n                    .find('.time')\r\n                        .text(entry_updated.strftime('%I:%M %p'))\r\n                    .end()\r\n                .end()\r\n                .find('.author')\r\n                    .text(entry.author || 'n/a')\r\n                .end()\r\n                .prependTo('#feed-items')\r\n                .hide();\r\n\r\nOf course, *plain* is a relative term here.\r\n\r\n[jquery]: http://jquery.com/\r\n[tal]: http://wiki.zope.org/ZPT/TALSpecification14\r\n[pt]: http://wiki.zope.org/ZPT/FrontPage\r\n[book]: http://www.amazon.com/gp/product/0470452021?ie=UTF8&tag=0xdecafbad01-20&linkCode=as2&camp=1789&c%0D%0Areative=9325&creativeASIN=0470452021\r\n[djt]: http://svn.dojotoolkit.org/src/dojox/trunk/dtl/README\r\n[jqtal]: http://github.com/lmorchard/jquery-tal-template/tree/master\r\n[lizardfeeder]: http://svn.mozilla.org/projects/lizardfeeder/trunk/\r\n[thing]: http://github.com/lmorchard/jquery-tal-template/tree/master/jquery.taltemplate.js\n\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n            \n        <ul class=\"comments\">\n            \n        <li class=\"comment\" id=\"comment-221083366\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=3f398029eea744ce9ba9147aab627557&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"\">brad clements</a>\n                </div>\n                <a href=\"#comment-221083366\" class=\"permalink\"><time datetime=\"2008-11-03T21:26:42\">2008-11-03T21:26:42</time></a>\n            </div>\n            <div class=\"content\"><p>Groan,</p>\n\n<p>Too bad I haven't had a chance to finish documenting (and tweaking) the ATALi project.</p>\n\n<p>It's a collection of Alternative TAL Implementations.</p>\n\n<p>It currently has TAL for xslt (server side using libxslt directly or via lxml with metal support)</p>\n\n<p>and TAL for javascript (no libraries needed, though it does recognize mochikit iterators, no metal)</p>\n\n<p>https://launchpad.net/atali</p></div>\n            \n        </li>\n    \n        <li class=\"comment\" id=\"comment-221083367\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://www.jm3.net/\"><img src=\"http://disqus.com/api/users/avatars/jm3.jpg\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://www.jm3.net/\">John Manoogian III (jm3)</a>\n                </div>\n                <a href=\"#comment-221083367\" class=\"permalink\"><time datetime=\"2008-11-24T18:51:17\">2008-11-24T18:51:17</time></a>\n            </div>\n            <div class=\"content\"><p>Have you seen \"trimpath\"?</p>\n\n<p>http://code.google.com/p/trimpath/wiki/JavaScriptTemplates</p></div>\n            \n        </li>\n    \n        </ul>\n    \n        </div>\n    ",
    "parentPath": "../blog.lmorchard.com/posts/archives/2008",
    "path": "2008/11/01/an-unnecessary-template-attribute-language"
  }
]