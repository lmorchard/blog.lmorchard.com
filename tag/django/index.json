[
  {
    "title": "Firefox Test Pilot: The Flattening",
    "tags": [
      "mozilla",
      "testpilot",
      "webdev",
      "django",
      "gulp"
    ],
    "thumbnail": "/uploads/2016/tp-flat.png",
    "year": "2016",
    "month": "09",
    "day": "26",
    "isDir": false,
    "slug": "testpilot-static",
    "date": "2016-09-26T12:00:00.000Z",
    "postName": "2016-09-26-testpilot-static",
    "html": "<p><strong>TL;DR</strong>: Firefox Test Pilot is becoming a statically-generated site from content in flat files. We&#39;re moving away from Django and PostgreSQL, and it&#39;s been a bit of a journey.</p>\n<!--more-->\n\n<img class=\"fullwidth\" src=\"/uploads/2016/tp-header.png\" />\n\n<nav role=\"navigation\" class=\"table-of-contents\"></nav>\n\n<p>I&#39;ve been working on <a href=\"https://testpilot.firefox.com/\">Firefox Test Pilot</a> for over a year, but I haven&#39;t written about it here before now. Mostly because I&#39;ve been busy and lazy and <a href=\"/2016/08/31/yak-shaving-habits/\">busily shaving yaks</a>.</p>\n<p>But, there have been big things afoot lately, and I figured they were worth writing about - if only because they&#39;re invisible, behind-the-scenes things that nonetheless took a lot of work to accomplish.</p>\n<h2 id=\"be-prepared---but-for-what\">Be prepared - but for what?</h2>\n<p>When we started building Test Pilot last summer, we based the server-side on Django &amp; PostgreSQL. We had assumptions about the future: </p>\n<ul>\n<li><p>We&#39;d need to collect measurements from experiments. </p>\n</li>\n<li><p>We thought experiments would need some active server-side resources provided by the mothership.</p>\n</li>\n<li><p>We&#39;d need to manage user profiles &amp; preferences, so we required sign-in with a Firefox Account. </p>\n</li>\n</ul>\n<p>A year later, these assumptions didn&#39;t quite pan out: </p>\n<ul>\n<li><p>Rather than reinvent the wheel by collecting &amp; analyzing measurements ourselves, we took advantage of Google Analytics and the efforts of <a href=\"https://wiki.mozilla.org/Telemetry\">the Firefox Telemetry team</a>.</p>\n</li>\n<li><p>We found it&#39;s best to stay out of the way of teams building Test Pilot experiments - let them manage their own services as necessary, rather than be tied to the delivery cadence of the core project.</p>\n</li>\n<li><p>The sign-in requirement turned away many potential users. But, we didn&#39;t need accounts to facilitate experiment participation anyway. Our metrics are anonymous and a Firefox add-on manages opt-in.</p>\n<p>Accounts ended up being private data we had to keep secure, but only used for email notifications. We have better ways to manage email subscriptions across Mozilla - so one less wheel to reinvent!</p>\n</li>\n</ul>\n<h2 id=\"didnt-need-that-server-anyway\">Didn&#39;t need that server anyway</h2>\n<p>There was just one last reason to use Django &amp; PostgreSQL on Test Pilot: A web-based content management system to update the site without heavyweight server deployments &amp; database migrations. </p>\n<p>But, wait a minute: If the other reasons for a server dropped away - why do we need complex deployments?</p>\n<p>Furthermore, why maintain content <a href=\"https://indieweb.org/database-antipattern\">in a database</a> at all?</p>\n<p>The whole Test Pilot team knows their way around text editors and GitHub - so let&#39;s make that our CMS. We can <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\">bake the whole site</a> from <a href=\"https://github.com/mozilla/testpilot/tree/master/content-src/experiments\">flat files</a>. Deployment is <a href=\"https://github.com/mozilla/testpilot/blob/master/docs/development/deployment.md#producing-a-static-build\">running a build script</a> and <a href=\"https://github.com/mozilla/testpilot/blob/master/circle.yml#L71\">uploading the result</a> to a web server. We get revision control &amp; collaboration along with the rest of the project. And as a security bonus, we stop shipping the tools to change the site along with the deployed site itself.</p>\n<p>None of this is revolutionary. Aaron Swartz&#39;s &quot;<a href=\"http://www.aaronsw.com/weblog/000404\">Bake, Don&#39;t Fry</a>&quot; is over 14 years old: Why fry up a new web page for every visit when you can pre-bake the whole site ahead of time? I used <a href=\"http://blosxom.sourceforge.net/\">Bloxsom</a> back in the day and <a href=\"https://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\">Gulp bakes this blog now</a>. Static site generators <a href=\"https://www.staticgen.com/\">are numerous &amp; popular</a> - GitHub itself offers <a href=\"https://help.github.com/articles/using-jekyll-as-a-static-site-generator-with-github-pages/\">GitHub Pages</a> powered by <a href=\"https://github.com/jekyll/jekyll\">Jekyll</a>.</p>\n<p>It sounds obvious in retrospect, but it took awhile to realize our site could be stripped down to so little. We assumed we needed all those moving parts - or would need them someday. But, it appears that we can get away with being nearly serverless. And if someday a feature requires more, we can stand up some loosely-coupled microservices - or better yet, find that another team at Mozilla has already solved the problem.</p>\n<h2 id=\"the-show-must-go-on\">The show must go on</h2>\n<p>But, having realized all of this, we couldn&#39;t just burn down the site and start over. Because we&#39;re working on a vehicle in motion, we&#39;ve been doing this in increments over the summer: </p>\n<ul>\n<li><p>A couple of months ago, <a href=\"https://github.com/mozilla/testpilot/issues/1035\">we removed the Firefox Accounts requirement</a> and then <a href=\"https://github.com/mozilla/testpilot/issues/1034\">deleted the user data</a> once we were sure we weren&#39;t going back.</p>\n</li>\n<li><p>We switched data sources for displaying the number of folks participating in experiments from our own Django API to <a href=\"https://github.com/mozilla/testpilot/issues/1039\">a Telemetry-based resource</a>.</p>\n</li>\n<li><p>I wrote a task to <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L22\">import content from the current Django API</a>. Then, I wrote <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L16\">a task to generate JSON</a> from those imported files - a direct static replacement for the Django API.</p>\n</li>\n<li><p>Next, I implemented <a href=\"https://github.com/mozilla/testpilot/blob/master/testpilot/experiments/views.py#L50\">a feature flag in Django</a> to substitute static JSON for content from the database. Thus, we can start managing content in YAML now, maintaining our current infrastructure until we work out a new stripped-down deployment process.</p>\n</li>\n<li><p>Soon, we&#39;ll be able to update the site by pushing to the appropriate branch on GitHub. We&#39;ve got <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\">tasks to generate stub pages</a> for all the front end app routes. We&#39;re also looking into enforcing a requirement to <a href=\"http://micropipes.com/blog//2016/08/31/signing-your-commits-on-github-with-a-gpg-key/\">sign our commits and tags</a> on the way to release.</p>\n</li>\n<li><p>After that, <a href=\"https://github.com/mozilla/testpilot/issues/1306\">we plan to go even further with static site generation</a>. Test Pilot is currently a single page app that pulls content from JSON. But, we can do better by pre-rendering those HTML pages in our build process ahead of time.</p>\n</li>\n</ul>\n<h2 id=\"whats-next\">What&#39;s next?</h2>\n<p>There&#39;s a funny thing about all of this: If we&#39;re successful, no one visiting the site should notice anything different. We&#39;re developing some new features &amp; experiments - but all this work to rid our infrastructure of Django &amp; PostgreSQL should ideally be a non-event for anyone visiting the site. This is the least glamorous sort of work one occasionally has to do on a software project - change everything, but don&#39;t break anything.</p>\n<p>The real benefit will be that we&#39;re able to do a lot of things faster and more easily. For instance, there are now fewer places that need changes to display a new piece of information on a page. We don&#39;t have to monitor as many third-party dependencies - <a href=\"https://github.com/mozilla/testpilot/issues/1116\">which we weren&#39;t doing very well to begin with</a>.</p>\n<p>Our development stack shrinks from Docker containers with Django &amp; PostgreSQL &amp; Node.js - down to just Node.js v6.2.0. <a href=\"https://github.com/mozilla/testpilot/blob/master/docs/development/quickstart.md\">The whole system has gotten simpler and more direct</a>.</p>\n<p>But, wait, there&#39;s more: Along with totally changing our server-side infrastructure, <a href=\"https://github.com/mozilla/testpilot/issues/1307\">we&#39;ve also rewritten the front end of the site to switch from Ampersand to React &amp; Redux</a>. It should make static site generation easier. It&#39;s also eased development on a handful of new features in the past week or so.</p>\n<p>It&#39;s a big deal - and another thing that, in retrospect, seems more obvious now than it did a year ago. But, I&#39;m going to save writing about that for my next post.</p>\n<!-- vim: set wrap linebreak nolist wrapmargin=0 textwidth=0 syntax=markdown formatoptions-=t: -->\n",
    "body": "**TL;DR**: Firefox Test Pilot is becoming a statically-generated site from content in flat files. We're moving away from Django and PostgreSQL, and it's been a bit of a journey.\n\n<!--more-->\n\n<img class=\"fullwidth\" src=\"/uploads/2016/tp-header.png\" />\n\n<nav role=\"navigation\" class=\"table-of-contents\"></nav>\n\nI've been working on [Firefox Test Pilot][testpilot] for over a year, but I haven't written about it here before now. Mostly because I've been busy and lazy and [busily shaving yaks](/2016/08/31/yak-shaving-habits/).\n\nBut, there have been big things afoot lately, and I figured they were worth writing about - if only because they're invisible, behind-the-scenes things that nonetheless took a lot of work to accomplish.\n\n## Be prepared - but for what?\n\nWhen we started building Test Pilot last summer, we based the server-side on Django & PostgreSQL. We had assumptions about the future: \n\n* We'd need to collect measurements from experiments. \n\n* We thought experiments would need some active server-side resources provided by the mothership.\n\n* We'd need to manage user profiles & preferences, so we required sign-in with a Firefox Account. \n\nA year later, these assumptions didn't quite pan out: \n\n* Rather than reinvent the wheel by collecting & analyzing measurements ourselves, we took advantage of Google Analytics and the efforts of [the Firefox Telemetry team][telemetry].\n\n* We found it's best to stay out of the way of teams building Test Pilot experiments - let them manage their own services as necessary, rather than be tied to the delivery cadence of the core project.\n\n* The sign-in requirement turned away many potential users. But, we didn't need accounts to facilitate experiment participation anyway. Our metrics are anonymous and a Firefox add-on manages opt-in.\n  \n  Accounts ended up being private data we had to keep secure, but only used for email notifications. We have better ways to manage email subscriptions across Mozilla - so one less wheel to reinvent!\n\n## Didn't need that server anyway\n\nThere was just one last reason to use Django & PostgreSQL on Test Pilot: A web-based content management system to update the site without heavyweight server deployments & database migrations. \n\nBut, wait a minute: If the other reasons for a server dropped away - why do we need complex deployments?\n\nFurthermore, why maintain content [in a database][database] at all?\n\nThe whole Test Pilot team knows their way around text editors and GitHub - so let's make that our CMS. We can [bake the whole site][sitebake] from [flat files][]. Deployment is [running a build script][buildscript] and [uploading the result][uploadweb] to a web server. We get revision control & collaboration along with the rest of the project. And as a security bonus, we stop shipping the tools to change the site along with the deployed site itself.\n\nNone of this is revolutionary. Aaron Swartz's \"[Bake, Don't Fry][baked]\" is over 14 years old: Why fry up a new web page for every visit when you can pre-bake the whole site ahead of time? I used [Bloxsom][] back in the day and [Gulp bakes this blog now][gulp]. Static site generators [are numerous & popular][staticgen] - GitHub itself offers [GitHub Pages][pages] powered by [Jekyll][].\n\nIt sounds obvious in retrospect, but it took awhile to realize our site could be stripped down to so little. We assumed we needed all those moving parts - or would need them someday. But, it appears that we can get away with being nearly serverless. And if someday a feature requires more, we can stand up some loosely-coupled microservices - or better yet, find that another team at Mozilla has already solved the problem.\n\n## The show must go on\n\nBut, having realized all of this, we couldn't just burn down the site and start over. Because we're working on a vehicle in motion, we've been doing this in increments over the summer: \n\n* A couple of months ago, [we removed the Firefox Accounts requirement][fxareq] and then [deleted the user data][deletedata] once we were sure we weren't going back.\n\n* We switched data sources for displaying the number of folks participating in experiments from our own Django API to [a Telemetry-based resource][counts].\n\n* I wrote a task to [import content from the current Django API][import]. Then, I wrote [a task to generate JSON][generatejson] from those imported files - a direct static replacement for the Django API.\n\n* Next, I implemented [a feature flag in Django][featureflag] to substitute static JSON for content from the database. Thus, we can start managing content in YAML now, maintaining our current infrastructure until we work out a new stripped-down deployment process.\n\n* Soon, we'll be able to update the site by pushing to the appropriate branch on GitHub. We've got [tasks to generate stub pages][stubs] for all the front end app routes. We're also looking into enforcing a requirement to [sign our commits and tags][signreq] on the way to release.\n\n* After that, [we plan to go even further with static site generation][staticsite]. Test Pilot is currently a single page app that pulls content from JSON. But, we can do better by pre-rendering those HTML pages in our build process ahead of time.\n\n## What's next?\n\nThere's a funny thing about all of this: If we're successful, no one visiting the site should notice anything different. We're developing some new features & experiments - but all this work to rid our infrastructure of Django & PostgreSQL should ideally be a non-event for anyone visiting the site. This is the least glamorous sort of work one occasionally has to do on a software project - change everything, but don't break anything.\n\nThe real benefit will be that we're able to do a lot of things faster and more easily. For instance, there are now fewer places that need changes to display a new piece of information on a page. We don't have to monitor as many third-party dependencies - [which we weren't doing very well to begin with][dependencies].\n\nOur development stack shrinks from Docker containers with Django & PostgreSQL & Node.js - down to just Node.js v6.2.0. [The whole system has gotten simpler and more direct][quickstart].\n\nBut, wait, there's more: Along with totally changing our server-side infrastructure, [we've also rewritten the front end of the site to switch from Ampersand to React & Redux][reactrewrite]. It should make static site generation easier. It's also eased development on a handful of new features in the past week or so.\n\nIt's a big deal - and another thing that, in retrospect, seems more obvious now than it did a year ago. But, I'm going to save writing about that for my next post.\n\n[dependencies]: https://github.com/mozilla/testpilot/issues/1116\n[quickstart]: https://github.com/mozilla/testpilot/blob/master/docs/development/quickstart.md\n[testpilot]: https://testpilot.firefox.com/\n[buildscript]: https://github.com/mozilla/testpilot/blob/master/docs/development/deployment.md#producing-a-static-build\n[uploadweb]: https://github.com/mozilla/testpilot/blob/master/circle.yml#L71\n[sitebake]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\n[stubs]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\n[signreq]: http://micropipes.com/blog//2016/08/31/signing-your-commits-on-github-with-a-gpg-key/\n[reactrewrite]: https://github.com/mozilla/testpilot/issues/1307\n[staticsite]: https://github.com/mozilla/testpilot/issues/1306\n[featureflag]: https://github.com/mozilla/testpilot/blob/master/testpilot/experiments/views.py#L50\n[generatejson]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L16\n[import]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L22\n[counts]: https://github.com/mozilla/testpilot/issues/1039\n[deletedata]: https://github.com/mozilla/testpilot/issues/1034\n[fxareq]: https://github.com/mozilla/testpilot/issues/1035\n[flat files]: https://github.com/mozilla/testpilot/tree/master/content-src/experiments\n[telemetry]: https://wiki.mozilla.org/Telemetry\n[gulp]: https://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\n[bloxsom]: http://blosxom.sourceforge.net/\n[jekyll]: https://github.com/jekyll/jekyll\n[pages]: https://help.github.com/articles/using-jekyll-as-a-static-site-generator-with-github-pages/\n[baked]: http://www.aaronsw.com/weblog/000404\n[database]: https://indieweb.org/database-antipattern\n[staticgen]: https://www.staticgen.com/\n\n<!-- vim: set wrap linebreak nolist wrapmargin=0 textwidth=0 syntax=markdown formatoptions-=t: -->\n",
    "parentPath": "../blog.lmorchard.com/posts",
    "path": "2016/09/26/testpilot-static",
    "summary": "<p><strong>TL;DR</strong>: Firefox Test Pilot is becoming a statically-generated site from content in flat files. We&apos;re moving away from Django and PostgreSQL, and it&apos;s been a bit of a journey.</p>\n"
  },
  {
    "title": "Looking for a Django app to manage Roles within Groups",
    "author": "lmorchard",
    "layout": "post",
    "permalink": "/2013/02/23/looking-for-a-django-app-to-manage-roles-within-groups",
    "dsq_thread_id": [
      1106435515
    ],
    "categories": [
      "Uncategorized"
    ],
    "tags": [
      "badger",
      "badges",
      "django",
      "mozilla",
      "webdev"
    ],
    "year": "2013",
    "month": "02",
    "day": "23",
    "isDir": false,
    "slug": "looking-for-a-django-app-to-manage-roles-within-groups",
    "date": "2013-02-23T12:00:00.000Z",
    "postName": "2013-02-23-looking-for-a-django-app-to-manage-roles-within-groups",
    "html": "<p>I want to add some team-based features to <a href=\"https://github.com/lmorchard/django-badger\">django-badger</a>. I was hoping that someone had already built a reusable app to do most of the work for me. This happens quite a lot when I&#8217;m working with Django. Unfortunately, I haven&#8217;t <em>quite</em> found what I&#8217;m looking for yet. Consider this blog post either the product of my thinking out loud toward a rough spec, or a long-winded lazyweb search query.</p>\n<!--more-->\n\n<p>First, what do I mean by a &#8220;team&#8221;? Well, a familiar example is <a href=\"http://www.wowwiki.com/Guild_list_%28interface%29\">a guild in World of Warcraft</a>: A group of people with access to shared resources, that access controlled by permissions bundled into ranks assigned to each member of the group.</p>\n<div style=\"width: 460px\" class=\"wp-caption aligncenter\">\n  <a href=\"http://www.wowwiki.com/Guild_list_%28interface%29\"><img alt=\"Guild management in WoW\" src=\"http://images2.wikia.nocookie.net/__cb20091106224144/wowwiki/images/thumb/3/3e/Guild_list_%28interface%29.png/450px-Guild_list_%28interface%29.png\" width=\"450\" height=\"324\" /></a><p class=\"wp-caption-text\">\n    Guild management in WoW\n  </p>\n</div>\n\n<p>While Django does come with Users, Groups, &amp; Permissions, the concept of Roles within Groups to which Permissions can be attached seems missing.</p>\n<p>If I try to extend the Django building blocks, maybe I could represent a &#8220;Team&#8221; as a bundle of Groups and treat those Groups as Roles? Or, maybe Groups should just become hierarchical &#8211; make it <a href=\"http://en.wikipedia.org/wiki/Turtles_all_the_way_down\">turtles all the way down</a>. (I really like that expression, in case you can&#8217;t tell.)</p>\n<p>With respect to that last point, I found <a href=\"https://github.com/rasca/django-hierarchical-auth\">django-hierarchical-auth</a>. That seems like a good lead. But, I&#8217;m having trouble finding other projects using it. There&#8217;s <a href=\"http://www.feincms.org/\">feinCMS</a> &#8211; I&#8217;ve never heard of that before, but that&#8217;s more my lack than theirs.</p>\n<p>In the case of <a href=\"https://github.com/lmorchard/django-badger\">django-badger</a>, I&#8217;d like to enable users to start teams, create badges that belong to the team, and allow other team members varying levels of control over those badges (e.g. creating, editing, awarding, approving nominations, etc).</p>\n<p>So, there&#8217;s the matter of user interface &#8211; I&#8217;d like any user (not just site-wide admins) to be able to:</p>\n<ul>\n<li>create a team;</li>\n<li>manage team profile information;</li>\n<li>manage &amp; grant roles based on a canned selection of permissions;</li>\n<li>invite other users as members, remove members;</li>\n<li>accept team invitations, request to join a team, remove oneself from a team.</li>\n</ul>\n<p>The <a href=\"https://github.com/rasca/django-hierarchical-auth\">django-hierarchical-auth</a> app comes with no views; it&#8217;s just a backend utility. So, if I grab that app, I&#8217;ll still have to build the UI and supporting models myself (i.e. for team profiles and permission sets).</p>\n<p>So, that leaves me wondering if there&#8217;s some value in me building a reusable app atop <a href=\"https://github.com/rasca/django-hierarchical-auth\">django-hierarchical-auth</a> that basically implements what that WoW guild management interface offers? Ultimately, that&#8217;s what I&#8217;m really hoping someone else has built for me.</p>\n",
    "body": "I want to add some team-based features to [django-badger][1]. I was hoping that someone had already built a reusable app to do most of the work for me. This happens quite a lot when I&#8217;m working with Django. Unfortunately, I haven&#8217;t *quite* found what I&#8217;m looking for yet. Consider this blog post either the product of my thinking out loud toward a rough spec, or a long-winded lazyweb search query.\r\n\r\n<!--more-->\r\n\r\nFirst, what do I mean by a &#8220;team&#8221;? Well, a familiar example is [a guild in World of Warcraft][2]: A group of people with access to shared resources, that access controlled by permissions bundled into ranks assigned to each member of the group.\r\n\r\n<div style=\"width: 460px\" class=\"wp-caption aligncenter\">\r\n  <a href=\"http://www.wowwiki.com/Guild_list_%28interface%29\"><img alt=\"Guild management in WoW\" src=\"http://images2.wikia.nocookie.net/__cb20091106224144/wowwiki/images/thumb/3/3e/Guild_list_%28interface%29.png/450px-Guild_list_%28interface%29.png\" width=\"450\" height=\"324\" /></a><p class=\"wp-caption-text\">\r\n    Guild management in WoW\r\n  </p>\r\n</div>\r\n\r\nWhile Django does come with Users, Groups, & Permissions, the concept of Roles within Groups to which Permissions can be attached seems missing.\r\n\r\nIf I try to extend the Django building blocks, maybe I could represent a &#8220;Team&#8221; as a bundle of Groups and treat those Groups as Roles? Or, maybe Groups should just become hierarchical &#8211; make it [turtles all the way down][3]. (I really like that expression, in case you can&#8217;t tell.)\r\n\r\nWith respect to that last point, I found [django-hierarchical-auth][4]. That seems like a good lead. But, I&#8217;m having trouble finding other projects using it. There&#8217;s [feinCMS][5] &#8211; I&#8217;ve never heard of that before, but that&#8217;s more my lack than theirs.\r\n\r\nIn the case of [django-badger][1], I&#8217;d like to enable users to start teams, create badges that belong to the team, and allow other team members varying levels of control over those badges (e.g. creating, editing, awarding, approving nominations, etc).\r\n\r\nSo, there&#8217;s the matter of user interface &#8211; I&#8217;d like any user (not just site-wide admins) to be able to:\r\n\r\n*   create a team;\r\n*   manage team profile information;\r\n*   manage & grant roles based on a canned selection of permissions;\r\n*   invite other users as members, remove members;\r\n*   accept team invitations, request to join a team, remove oneself from a team.\r\n\r\nThe [django-hierarchical-auth][4] app comes with no views; it&#8217;s just a backend utility. So, if I grab that app, I&#8217;ll still have to build the UI and supporting models myself (i.e. for team profiles and permission sets).\r\n\r\nSo, that leaves me wondering if there&#8217;s some value in me building a reusable app atop [django-hierarchical-auth][4] that basically implements what that WoW guild management interface offers? Ultimately, that&#8217;s what I&#8217;m really hoping someone else has built for me.\r\n\r\n [1]: https://github.com/lmorchard/django-badger\r\n [2]: http://www.wowwiki.com/Guild_list_%28interface%29\r\n [3]: http://en.wikipedia.org/wiki/Turtles_all_the_way_down\r\n [4]: https://github.com/rasca/django-hierarchical-auth\r\n [5]: http://www.feincms.org/",
    "parentPath": "../blog.lmorchard.com/posts/archives/2013",
    "path": "2013/02/23/looking-for-a-django-app-to-manage-roles-within-groups",
    "thumbnail": "http://images2.wikia.nocookie.net/__cb20091106224144/wowwiki/images/thumb/3/3e/Guild_list_%28interface%29.png/450px-Guild_list_%28interface%29.png",
    "summary": "<p>I want to add some team-based features to <a href=\"https://github.com/lmorchard/django-badger\">django-badger</a>. I was hoping that someone had already built a reusable app to do most of the work for me. This happens quite a lot when I&#x2019;m working with Django. Unfortunately, I haven&#x2019;t <em>quite</em> found what I&#x2019;m looking for yet. Consider this blog post either the product of my thinking out loud toward a rough spec, or a long-winded lazyweb search query.</p>\n"
  },
  {
    "comments_archived": true,
    "date": "2011-07-18T22:03:13.030Z",
    "layout": "post",
    "published": true,
    "tags": [
      "badger",
      "social",
      "python",
      "mozilla",
      "django"
    ],
    "title": "Badger 2: Return of the Mustelidae",
    "year": "2011",
    "month": "07",
    "day": "18",
    "isDir": false,
    "slug": "badger2",
    "postName": "2011-07-18-badger2",
    "html": "<p><strong>TL;DR</strong>: <em>A year ago, I said I wanted to build a badging service\nfor the Mozilla community, so we could all celebrate how awesome we\nall are. Well, I putzed around and didn&#39;t get far, so I&#39;m starting\nover with something more immediately useful.</em></p>\n<img src=\"{{ site.baseurl }}/images/badger-logo-working.png\" style=\"width:98%; display: block\" />\n\n<p><em>(This is an awesome illustration by <a href=\"http://seanmartell.com/\">Sean\nMartell</a>, used entirely without permission.\nI&#39;ll take it down if anyone gets mad.)</em></p>\n<p>Almost a year ago, <a href=\"http://decafbad.com/2010/07/badger-article/\">I wrote about building a badging service for\nall of Mozilla</a>. </p>\n<p>In a nutshell, I left the <a href=\"http://www.flickr.com/photos/gen/4784616521/\">2010 Mozilla Summit</a>\nwanting to build a tool that empowered people to craft social objects\nrepresenting achievement and gratitude, and give them to each other.</p>\n<p>Since then, I&#39;ve <a href=\"https://github.com/lmorchard/badger\">played around with a prototype in Django with\nPinax</a>.  But, I abandoned that thing due to getting super\nbusy with the Firefox 4 release. It also didn&#39;t help that I was a\nDjango newb and that I got caught up in screwing around with shiny\nthings like <a href=\"http://pinaxproject.com\">Pinax</a> and <a href=\"http://lettuce.it\">Lettuce</a> and neglected the actual feature\nset.</p>\n<p>So now, finally, <a href=\"https://github.com/lmorchard/badger2\">I&#39;m picking the thread back up again</a>. This\ntime, with a little less ambition and a few more practical aims.</p>\n<h3 id=\"make-something-more-useful-right-away\">Make something more useful right away</h3>\n<p>While I <em>have</em> spent some dangerous time screwing around with shinies like\n<a href=\"http://vagrantup.com\">Vagrant</a>, <a href=\"http://pupetlabs.com\">Puppet</a>, and <a href=\"https://github.com/mozilla/playdoh\">Playdoh</a>, I think I&#39;ve gotten that\nmostly out of my system and have gotten down to work <a href=\"https://github.com/lmorchard/badger2/commits/master\">as of last\nnight</a>.</p>\n<p>Rather than build a Grand Central Station for badges, I&#39;ve reset my\ngoals to a progression of practical results:</p>\n<ul>\n<li>Build a reusable Django app that supports some basic use cases of\ncreating and awarding badges to users.</li>\n<li>Add <a href=\"http://activitystrea.ms\">Activity Stream</a>s narrating <a href=\"http://wiki.activitystrea.ms/w/page/27189812/Badge\">badge claims</a></li>\n<li>Add support for <a href=\"http://code.google.com/p/pubsubhubbub/\">PubSubHubbub</a> with Badger activity streams</li>\n<li>Add a REST API, maybe with OAuth</li>\n<li>Accept badges for local users, via <a href=\"http://code.google.com/p/pubsubhubbub/\">PuSH</a> from\nexternal sites</li>\n<li>See what the <a href=\"https://wiki.mozilla.org/Badges\">Open Badges Project</a> is up to, and how Badger can\nfit in with their goals.</li>\n</ul>\n<p>The idea here is to make Badger a practical, reusable, drop-in app for\nexisting sites—preferably (but not necessarily) the\n<a href=\"https://github.com/mozilla/playdoh\">Playdoh</a>-flavored sites we&#39;re building at Mozilla. Then,\nincrementally and optionally empower a Badger-enabled site to become a\nbadge hub by accepting reports of badge claims from other\nBadger-enabled sites.</p>\n<h3 id=\"take-baby-steps-to-federation\">Take baby steps to federation</h3>\n<p>So, for example, let&#39;s say we dropped Badger into a few sites like\nthese:</p>\n<ul>\n<li><a href=\"http://developer.mozilla.org\">http://developer.mozilla.org</a>;</li>\n<li><a href=\"http://support.mozilla.com\">http://support.mozilla.com</a>;</li>\n<li><a href=\"http://addons.mozilla.org\">http://addons.mozilla.org</a>.</li>\n</ul>\n<p>At first, Badger would just augment those sites with badging\nfacilities for their respective user bases. That could fill some needs\nright away.</p>\n<p>Then, say we built a site that offered personal profiles to members of\nthe Mozilla community.  With the <a href=\"http://activitystrea.ms\">Activity Stream</a> and <a href=\"http://code.google.com/p/pubsubhubbub/\">PuSH</a>\naugmentations, users could connect their profiles with each of the\nother Mozilla sites they use.  That way, whenever they claim a badge\nout there, it gets delivered to their community profile.</p>\n<h3 id=\"why-bother-federating-at-all\">Why bother federating at all?</h3>\n<p>If the only cross-site goal to build an all-in-one display case for\nbadges on a community profile, I could just build JSON feeds and wrap\nthem in a JS-based widget. In fact, <a href=\"http://activitystrea.ms/specs/json/1.0/\">a JSON-formatted Activity\nStream</a> will work nicely for that. Drop that into the profile\npage, and we&#39;re done.</p>\n<p>There are lots of reasons to federate. But, at least one thing not supported by\nthis solution are <a href=\"http://decafbad.com/2010/07/badger-article/#section-105\">meta-badges</a>. That is, badges awarded for badges.</p>\n<p>Let&#39;s say you close 100 bugs on Bugzilla, answer 100 questions on\nSUMO, edit 100 pages of documentation on MDN, and author 100 add-ons.\nAnd, let&#39;s say you get badges on the respective sites for all of those\nactivities.</p>\n<p>Well, now, I&#39;d like to give you a badge on your community profile for\nbeing a <strong>Mozilla Superhero</strong>. I could just do that by hand, having\nobserved all your greatness. But, I&#39;d rather the system just do that\nautomatically.</p>\n<p>If your community profile treated all your badges from your chosen affiliated\nsites as first-class citizens, then I could build the meta-badge\ntrigger right there.</p>\n<p>Of course, I could also write a program that monitors badge feeds from\nvarious sites. Then, use the community profile site&#39;s Badger API to\nissue a badge when the conditions are met. But, as maintainer of the\nmonitoring program, I&#39;d have to keep track of what feeds where count\nfor which people, which could be a mess.</p>\n<p>There&#39;s still some thinking to do here.</p>\n<h3 id=\"what-about-identity-and-co-opting-badges\">What about identity and co-opting badges?</h3>\n<p>I&#39;m still thinking through how someone connects a profile to other\nsites. As in, how can Badger ensure that the owner of the community\nprofile is also the owner of a badge claim feed on MDN?  Maybe some\nkind of OAuth dance that results in a <a href=\"http://code.google.com/p/pubsubhubbub/\">PuSH</a> subscription between\nsites?</p>\n<p>Consider the least-capable federation case: a Badger-compatible feed\nhosted as a static file on Amazon S3. And, by Badger-compatible, I\nmean an <a href=\"http://activitystrea.ms\">Activity Stream</a> that contains <a href=\"http://wiki.activitystrea.ms/w/page/27189812/Badge\">badge claims</a>. You\nshouldn&#39;t need my specific implementation of Badger-in-Django to\nproduce one of those.</p>\n<p>Although <a href=\"http://code.google.com/p/pubsubhubbub/\">PuSH</a> is still the ideal case (I think), occasional\npolling of an <a href=\"http://activitystrea.ms\">Activity Stream</a> feed should still be supported. If a\nuser connects that up to their community profile, we just have to take\ntheir word for it. We&#39;d rely on community members to\nflag stinkers trying to claim badge feeds that aren&#39;t theirs.</p>\n<p>Beyond that, there&#39;s probably some crypto-voodoo we can invoke here,\nfor cases where badge claim validity really matters—as opposed to the\nfun and games I have in mind for Mozilla.</p>\n<h3 id=\"what-about-the-open-badges-project\">What about the Open Badges Project?</h3>\n<p>From various conversations over the past year, it sounds to me like\nthe <a href=\"https://wiki.mozilla.org/Badges\">Open Badges Project</a> is getting the parts in place to do even\nmore interesting federation of badges that gives ownership of the\nbadge hub to the user.</p>\n<p>In that scenario, you have a backpack in your browser and can carry\nyour badge claims with you between sites with no prior coordination\nbetween the sites themselves. </p>\n<p>This sounds like something in which Badger should be able to\nparticipate, eventually. If not as a hub, Badger should at least offer\nthe tools to create and award badges that work with the user-owned hub\nscheme.</p>\n<h3 id=\"so-what-next\">So, what next?</h3>\n<p>Now that I&#39;ve written all this out, I need to hack on it. If you&#39;re\ninterested in this stuff, let me know. That way, it&#39;ll look like\nsomeone might actually find this stuff handy when I get something\nworking!</p>\n<!-- vim: set wrap wm=5 syntax=mkd textwidth=70: -->\n\n<div id=\"comments\" class=\"comments archived-comments\"><h3>Archived Comments</h3>\n<ul class=\"comments\">\n<li class=\"comment\" id=\"comment-256743407\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=afd2a7efeaad01509a571bae031dfc5c&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"\">David Boswell</a>\n</div>\n<a href=\"#comment-256743407\" class=\"permalink\"><time datetime=\"2011-07-19T01:18:24\">2011-07-19T01:18:24</time></a>\n</div>\n<div class=\"content\">Very cool to see an update on Badger.  I'm definitely interested in this and would love to see something like this show up in the Mozillians phonebook that will be ready soonish :)\nDavid</div>\n</li>\n<li class=\"comment\" id=\"comment-257292756\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://briks.si\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=29e2f1888cdcc9c451d32ab902d5a19c&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://briks.si\">Brian King</a>\n</div>\n<a href=\"#comment-257292756\" class=\"permalink\"><time datetime=\"2011-07-19T15:12:01\">2011-07-19T15:12:01</time></a>\n</div>\n<div class=\"content\">Over at the Mozilla Reps program, we are discussing the possible use of badges - https://wiki.mozilla.org/ReMo</div>\n</li>\n<li class=\"comment\" id=\"comment-257331862\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://kanai.net/weblog/\"><img src=\"http://disqus.com/api/users/avatars/gkanai.jpg\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://kanai.net/weblog/\">Gen Kanai</a>\n</div>\n<a href=\"#comment-257331862\" class=\"permalink\"><time datetime=\"2011-07-19T15:48:22\">2011-07-19T15:48:22</time></a>\n</div>\n<div class=\"content\">Agreed with DBos. Would love to see Badger as an official service, especially with the new Campus Reps program that Jason Haas is rebooting as well as with the Mozilla Representatives program. Also you might get a badge for contributing to the Join Mozilla program? So many great uses for us.</div>\n</li>\n<li class=\"comment\" id=\"comment-278082903\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"\"><img src=\"http://disqus.com/api/users/avatars/interstar.jpg\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"\">interstar</a>\n</div>\n<a href=\"#comment-278082903\" class=\"permalink\"><time datetime=\"2011-08-05T03:15:39\">2011-08-05T03:15:39</time></a>\n</div>\n<div class=\"content\">Hi Les,\nVery very interesting. \nI was just thinking that there needed to be something like the Open Badges project today. (I'd even got as far as knocking up a data-model in web2py.) And then I saw this.\nI quickly cloned and tried out your app with an ordinary Django project but it's blowing up without jingo and I guess other Playdoh related modules. Are you committed to Playdoh for Badger2 ?\n</div>\n<ul class=\"comments\">\n<li class=\"comment\" id=\"comment-278514925\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://decafbad.com/\"><img src=\"http://disqus.com/api/users/avatars/lmorchard.jpg\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://decafbad.com/\">Les Orchard</a>\n</div>\n<a href=\"#comment-278514925\" class=\"permalink\"><time datetime=\"2011-08-05T18:05:31\">2011-08-05T18:05:31</time></a>\n</div>\n<div class=\"content\">I'm committed to Playdoh insofar as my initial users will probably be my co-workers at Mozilla, who are all building Playdoh-based sites.\nBut, there's no reason why it shouldn't eventually work with vanilla Django. It's using core template loaders and shortcuts, so switching over to standard stuff shouldn't be an issue for the views and models.\nI'm hoping at some point to put together some more Django-conventional template tags and templates toward that end, unless someone gets to it before me in a pull request (patches welcome!). Really, I think the template tags are the more important thing, since any templates out of the box will likely get overridden on a real site.</div>\n</li>\n</ul>\n</li>\n<li class=\"comment\" id=\"comment-301119028\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://www.integrating-technology.org/\"><img src=\"http://disqus.com/api/users/avatars/nelliemuller.jpg\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://www.integrating-technology.org/\">Dr. Nellie Deutsch</a>\n</div>\n<a href=\"#comment-301119028\" class=\"permalink\"><time datetime=\"2011-09-02T14:07:45\">2011-09-02T14:07:45</time></a>\n</div>\n<div class=\"content\">I love the idea, Leslie.  I've been heading a self-funded organization that provides free online professional development workshops for educators around the world since 2006. We need badges for our graduates.  Let me know how I can be of help. </div>\n</li>\n</ul>\n</div>\n",
    "body": "**TL;DR**: <em>A year ago, I said I wanted to build a badging service\r\nfor the Mozilla community, so we could all celebrate how awesome we\r\nall are. Well, I putzed around and didn't get far, so I'm starting\r\nover with something more immediately useful.</em>\r\n\r\n<img src=\"{{ site.baseurl }}/images/badger-logo-working.png\" style=\"width:98%; display: block\" />\r\n\r\n<em>(This is an awesome illustration by [Sean\r\nMartell](http://seanmartell.com/), used entirely without permission.\r\nI'll take it down if anyone gets mad.)</em>\r\n\r\nAlmost a year ago, [I wrote about building a badging service for\r\nall of Mozilla][badger-paper]. \r\n\r\nIn a nutshell, I left the [2010 Mozilla Summit](http://www.flickr.com/photos/gen/4784616521/)\r\nwanting to build a tool that empowered people to craft social objects\r\nrepresenting achievement and gratitude, and give them to each other.\r\n\r\nSince then, I've [played around with a prototype in Django with\r\nPinax][badger1].  But, I abandoned that thing due to getting super\r\nbusy with the Firefox 4 release. It also didn't help that I was a\r\nDjango newb and that I got caught up in screwing around with shiny\r\nthings like [Pinax][] and [Lettuce][] and neglected the actual feature\r\nset.\r\n\r\nSo now, finally, [I'm picking the thread back up again][badger2]. This\r\ntime, with a little less ambition and a few more practical aims.\r\n\r\n### Make something more useful right away\r\n\r\nWhile I *have* spent some dangerous time screwing around with shinies like\r\n[Vagrant][], [Puppet][], and [Playdoh][], I think I've gotten that\r\nmostly out of my system and have gotten down to work [as of last\r\nnight][work].\r\n\r\n[work]: https://github.com/lmorchard/badger2/commits/master\r\n\r\nRather than build a Grand Central Station for badges, I've reset my\r\ngoals to a progression of practical results:\r\n\r\n* Build a reusable Django app that supports some basic use cases of\r\n  creating and awarding badges to users.\r\n* Add [Activity Stream][]s narrating [badge claims][]\r\n* Add support for [PubSubHubbub][push] with Badger activity streams\r\n* Add a REST API, maybe with OAuth\r\n* Accept badges for local users, via [PuSH][] from\r\n  external sites\r\n* See what the [Open Badges Project][] is up to, and how Badger can\r\n  fit in with their goals.\r\n\r\n[badge claims]: http://wiki.activitystrea.ms/w/page/27189812/Badge\r\n[Open Badges Project]: https://wiki.mozilla.org/Badges\r\n\r\nThe idea here is to make Badger a practical, reusable, drop-in app for\r\nexisting sites—preferably (but not necessarily) the\r\n[Playdoh][]-flavored sites we're building at Mozilla. Then,\r\nincrementally and optionally empower a Badger-enabled site to become a\r\nbadge hub by accepting reports of badge claims from other\r\nBadger-enabled sites.\r\n\r\n### Take baby steps to federation\r\n\r\nSo, for example, let's say we dropped Badger into a few sites like\r\nthese:\r\n\r\n* <http://developer.mozilla.org>;\r\n* <http://support.mozilla.com>;\r\n* <http://addons.mozilla.org>.\r\n\r\nAt first, Badger would just augment those sites with badging\r\nfacilities for their respective user bases. That could fill some needs\r\nright away.\r\n\r\nThen, say we built a site that offered personal profiles to members of\r\nthe Mozilla community.  With the [Activity Stream][] and [PuSH][]\r\naugmentations, users could connect their profiles with each of the\r\nother Mozilla sites they use.  That way, whenever they claim a badge\r\nout there, it gets delivered to their community profile.\r\n\r\n### Why bother federating at all?\r\n\r\nIf the only cross-site goal to build an all-in-one display case for\r\nbadges on a community profile, I could just build JSON feeds and wrap\r\nthem in a JS-based widget. In fact, [a JSON-formatted Activity\r\nStream][as-json] will work nicely for that. Drop that into the profile\r\npage, and we're done.\r\n\r\nThere are lots of reasons to federate. But, at least one thing not supported by\r\nthis solution are [meta-badges][]. That is, badges awarded for badges.\r\n\r\nLet's say you close 100 bugs on Bugzilla, answer 100 questions on\r\nSUMO, edit 100 pages of documentation on MDN, and author 100 add-ons.\r\nAnd, let's say you get badges on the respective sites for all of those\r\nactivities.\r\n\r\nWell, now, I'd like to give you a badge on your community profile for\r\nbeing a **Mozilla Superhero**. I could just do that by hand, having\r\nobserved all your greatness. But, I'd rather the system just do that\r\nautomatically.\r\n\r\nIf your community profile treated all your badges from your chosen affiliated\r\nsites as first-class citizens, then I could build the meta-badge\r\ntrigger right there.\r\n\r\nOf course, I could also write a program that monitors badge feeds from\r\nvarious sites. Then, use the community profile site's Badger API to\r\nissue a badge when the conditions are met. But, as maintainer of the\r\nmonitoring program, I'd have to keep track of what feeds where count\r\nfor which people, which could be a mess.\r\n\r\nThere's still some thinking to do here.\r\n\r\n### What about identity and co-opting badges?\r\n\r\nI'm still thinking through how someone connects a profile to other\r\nsites. As in, how can Badger ensure that the owner of the community\r\nprofile is also the owner of a badge claim feed on MDN?  Maybe some\r\nkind of OAuth dance that results in a [PuSH][] subscription between\r\nsites?\r\n\r\nConsider the least-capable federation case: a Badger-compatible feed\r\nhosted as a static file on Amazon S3. And, by Badger-compatible, I\r\nmean an [Activity Stream][] that contains [badge claims][]. You\r\nshouldn't need my specific implementation of Badger-in-Django to\r\nproduce one of those.\r\n\r\nAlthough [PuSH][] is still the ideal case (I think), occasional\r\npolling of an [Activity Stream][] feed should still be supported. If a\r\nuser connects that up to their community profile, we just have to take\r\ntheir word for it. We'd rely on community members to\r\nflag stinkers trying to claim badge feeds that aren't theirs.\r\n\r\nBeyond that, there's probably some crypto-voodoo we can invoke here,\r\nfor cases where badge claim validity really matters—as opposed to the\r\nfun and games I have in mind for Mozilla.\r\n\r\n### What about the Open Badges Project?\r\n\r\nFrom various conversations over the past year, it sounds to me like\r\nthe [Open Badges Project][] is getting the parts in place to do even\r\nmore interesting federation of badges that gives ownership of the\r\nbadge hub to the user.\r\n\r\nIn that scenario, you have a backpack in your browser and can carry\r\nyour badge claims with you between sites with no prior coordination\r\nbetween the sites themselves. \r\n\r\nThis sounds like something in which Badger should be able to\r\nparticipate, eventually. If not as a hub, Badger should at least offer\r\nthe tools to create and award badges that work with the user-owned hub\r\nscheme.\r\n\r\n### So, what next?\r\n\r\nNow that I've written all this out, I need to hack on it. If you're\r\ninterested in this stuff, let me know. That way, it'll look like\r\nsomeone might actually find this stuff handy when I get something\r\nworking!\r\n\r\n[as-json]: http://activitystrea.ms/specs/json/1.0/\r\n[meta-badges]: http://decafbad.com/2010/07/badger-article/#section-105\r\n[activity stream]: http://activitystrea.ms\r\n[push]: http://code.google.com/p/pubsubhubbub/\r\n[vagrant]: http://vagrantup.com\r\n[puppet]: http://pupetlabs.com\r\n[playdoh]: https://github.com/mozilla/playdoh\r\n[pinax]: http://pinaxproject.com\r\n[lettuce]: http://lettuce.it\r\n[badger-paper]: http://decafbad.com/2010/07/badger-article/\r\n[badger1]: https://github.com/lmorchard/badger\r\n[badger2]: https://github.com/lmorchard/badger2\r\n\r\n<!-- vim: set wrap wm=5 syntax=mkd textwidth=70: -->\r\n\r\n<div id=\"comments\" class=\"comments archived-comments\">\r\n            <h3>Archived Comments</h3>\r\n            \r\n        <ul class=\"comments\">\r\n            \r\n        <li class=\"comment\" id=\"comment-256743407\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=afd2a7efeaad01509a571bae031dfc5c&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"\">David Boswell</a>\r\n                </div>\r\n                <a href=\"#comment-256743407\" class=\"permalink\"><time datetime=\"2011-07-19T01:18:24\">2011-07-19T01:18:24</time></a>\r\n            </div>\r\n            <div class=\"content\">Very cool to see an update on Badger.  I'm definitely interested in this and would love to see something like this show up in the Mozillians phonebook that will be ready soonish :)\r\n\r\nDavid</div>\r\n            \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-257292756\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://briks.si\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=29e2f1888cdcc9c451d32ab902d5a19c&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://briks.si\">Brian King</a>\r\n                </div>\r\n                <a href=\"#comment-257292756\" class=\"permalink\"><time datetime=\"2011-07-19T15:12:01\">2011-07-19T15:12:01</time></a>\r\n            </div>\r\n            <div class=\"content\">Over at the Mozilla Reps program, we are discussing the possible use of badges - https://wiki.mozilla.org/ReMo</div>\r\n            \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-257331862\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://kanai.net/weblog/\"><img src=\"http://disqus.com/api/users/avatars/gkanai.jpg\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://kanai.net/weblog/\">Gen Kanai</a>\r\n                </div>\r\n                <a href=\"#comment-257331862\" class=\"permalink\"><time datetime=\"2011-07-19T15:48:22\">2011-07-19T15:48:22</time></a>\r\n            </div>\r\n            <div class=\"content\">Agreed with DBos. Would love to see Badger as an official service, especially with the new Campus Reps program that Jason Haas is rebooting as well as with the Mozilla Representatives program. Also you might get a badge for contributing to the Join Mozilla program? So many great uses for us.</div>\r\n            \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-278082903\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"\"><img src=\"http://disqus.com/api/users/avatars/interstar.jpg\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"\">interstar</a>\r\n                </div>\r\n                <a href=\"#comment-278082903\" class=\"permalink\"><time datetime=\"2011-08-05T03:15:39\">2011-08-05T03:15:39</time></a>\r\n            </div>\r\n            <div class=\"content\">Hi Les,\r\n\r\nVery very interesting. \r\n\r\nI was just thinking that there needed to be something like the Open Badges project today. (I'd even got as far as knocking up a data-model in web2py.) And then I saw this.\r\n\r\nI quickly cloned and tried out your app with an ordinary Django project but it's blowing up without jingo and I guess other Playdoh related modules. Are you committed to Playdoh for Badger2 ?\r\n\r\n</div>\r\n            \r\n        <ul class=\"comments\">\r\n            \r\n        <li class=\"comment\" id=\"comment-278514925\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://decafbad.com/\"><img src=\"http://disqus.com/api/users/avatars/lmorchard.jpg\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://decafbad.com/\">Les Orchard</a>\r\n                </div>\r\n                <a href=\"#comment-278514925\" class=\"permalink\"><time datetime=\"2011-08-05T18:05:31\">2011-08-05T18:05:31</time></a>\r\n            </div>\r\n            <div class=\"content\">I'm committed to Playdoh insofar as my initial users will probably be my co-workers at Mozilla, who are all building Playdoh-based sites.\r\n\r\nBut, there's no reason why it shouldn't eventually work with vanilla Django. It's using core template loaders and shortcuts, so switching over to standard stuff shouldn't be an issue for the views and models.\r\n\r\nI'm hoping at some point to put together some more Django-conventional template tags and templates toward that end, unless someone gets to it before me in a pull request (patches welcome!). Really, I think the template tags are the more important thing, since any templates out of the box will likely get overridden on a real site.</div>\r\n            \r\n        </li>\r\n    \r\n        </ul>\r\n    \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-301119028\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://www.integrating-technology.org/\"><img src=\"http://disqus.com/api/users/avatars/nelliemuller.jpg\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://www.integrating-technology.org/\">Dr. Nellie Deutsch</a>\r\n                </div>\r\n                <a href=\"#comment-301119028\" class=\"permalink\"><time datetime=\"2011-09-02T14:07:45\">2011-09-02T14:07:45</time></a>\r\n            </div>\r\n            <div class=\"content\">I love the idea, Leslie.  I've been heading a self-funded organization that provides free online professional development workshops for educators around the world since 2006. We need badges for our graduates.  Let me know how I can be of help. </div>\r\n            \r\n        </li>\r\n    \r\n        </ul>\r\n    \r\n        </div>\r\n    ",
    "parentPath": "../blog.lmorchard.com/posts/archives/2011",
    "path": "2011/07/18/badger2",
    "thumbnail": "/blog.lmorchard.com/2011/07/18/badger2/%7B%7B%20site.baseurl%20%7D%7D/images/badger-logo-working.png"
  },
  {
    "comments_archived": true,
    "date": "2007-07-09T20:21:41.000Z",
    "layout": "post",
    "tags": [
      "webdev",
      "php",
      "zend",
      "symfony",
      "frameworks",
      "django",
      "python",
      "curmudgeons"
    ],
    "title": "A Curmudgeon Playing with the Zend Framework",
    "wordpress_id": 1058,
    "wordpress_slug": "a-curmudgeon-playing-with-the-zend-framework",
    "wordpress_url": "http://decafbad.com/blog/2007/07/09/a-curmudgeon-playing-with-the-zend-framework",
    "year": "2007",
    "month": "07",
    "day": "09",
    "isDir": false,
    "slug": "a-curmudgeon-playing-with-the-zend-framework",
    "postName": "2007-07-09-a-curmudgeon-playing-with-the-zend-framework",
    "html": "<p>Because it's been awhile since I last surveyed the landscape, I played around a bit with web frameworks this weekend.  Mainly, I tried getting something simple working with the <a href=\"http://framework.zend.com/\">Zend Framework</a>.  After intermittent play and much studying of documentation between Saturday and Sunday, I got to \"hello world.\"</p>\n<p>Unlike other web frameworks of late, Zend Framework doesn't come with any magical CLI tools to build out directory trees and / or generate code.  Being somewhat suspicious and curmudgeonly about that sort of magic to begin with, this actually struck me as an attractive thing about ZF.  In fact, what I really liked about ZF at first glance is that it's less of a monolithic <b>system</b> and more of a bucket of parts from a single source that fit together decently.</p>\n<p>And, all my favorite parts are there:  Among other things there's <a href=\"http://framework.zend.com/manual/en/zend.config.html\">config</a>, <a href=\"http://framework.zend.com/manual/en/zend.log.html\">logging</a>, <a href=\"http://framework.zend.com/manual/en/zend.controller.html\">a front controller</a> with <a href=\"http://framework.zend.com/manual/en/zend.controller.router.html\">URL routing</a>, template-system agnostic <a href=\"http://framework.zend.com/manual/en/zend.view.html\">view support</a>, and somewhat non-magical <a href=\"http://framework.zend.com/manual/en/zend.db.html\">DB / model support</a>.</p>\n<p>These were all things I'd grabbed from <a href=\"http://pear.php.net/\">PEAR</a> for <a href=\"http://decafbad.com/svn/trunk/Cuckoo/lib/MiniFramework.php\">my more recent PHP mini-framework</a> play, but I figured there should be some benefit from finding them in a unified collection like the Zend Framework.</p>\n<p>The experience was somewhat similar to rolling my own, though.  I stumbled through some docs and eventually found some blog entries and a tutorial.  It's all very loosely-coupled and somewhat DIY, which is actually what I wanted.  The experience has left me wondering if I really <b>should</b> have wanted it, but I'm guessing it'll go easier from here on out.</p>\n<p>In the meantime, though, I feel like I have a decent grasp on what all those loosely-coupled parts are doing.  I've skimmed through code, traced wires, broken things and watched the errors.</p>\n<p>See, my problem with a lot of modern magic-imbued web frameworks is that I have a deep distrust of what they're doing.  They come with a lot of moving parts doing things that I don't see - and when I do finally see them, I tend to run into decisions with which I disagree.  I see abstraction where I think the gritty concrete needs to be left bare.  I often see lots of astronaut acrobatics that just have to be burning tons of cycles.  I see further acrobatics done to compensate, unrolling loops and pre-parsing config files - which requires further layers of magical tools to generate code and caches.</p>\n<p>Too many moving parts wherein assumptions can hide, later to bite me when we're hundreds of miles into the post-launch desert and trying to fight scaling fires or develop a new feature with some weird angles to it.</p>\n<p>For example, consider <a href=\"http://www.symfony-project.com/\">Symfony</a> for PHP.  Their configuration system runs PHP code that results in YAML.  Parsing that YAML, along with cascading layers of other generated YAML, then drives a PHP code generation stage, composing all the static code necessary to bootstrap the framework with each request.  There's an amazing amount of flexibility exposed by that system, and it's quite clever -&nbsp;but my curmudgeonly side catches whiffs of insanity.</p>\n<p>Maybe that's really the issue -&nbsp;I've been doing this stuff long enough to have written my own one of everything, so I've got my own opinions and I like to have a grasp on everything.  I've written front controllers, templating systems, and model abstraction layers.  I've worked in a half-dozen or so languages doing all the above.  I don't yet accept that web app development has <a href=\"http://mengwong.livejournal.com/38969.html\">passed the da Vinci point</a> -&nbsp;a single developer should be able to grasp the structure of a web framework in mind without getting lost in too many fractal branchings.</p>\n<p>Anyway, I'm rambling like an old grouch, but I think I've reached my point.  Hopefully more actual experimentation soon.</p>\n",
    "body": "<p>Because it's been awhile since I last surveyed the landscape, I played around a bit with web frameworks this weekend.  Mainly, I tried getting something simple working with the <a href=\"http://framework.zend.com/\">Zend Framework</a>.  After intermittent play and much studying of documentation between Saturday and Sunday, I got to \"hello world.\"</p>\r\n<p>Unlike other web frameworks of late, Zend Framework doesn't come with any magical CLI tools to build out directory trees and / or generate code.  Being somewhat suspicious and curmudgeonly about that sort of magic to begin with, this actually struck me as an attractive thing about ZF.  In fact, what I really liked about ZF at first glance is that it's less of a monolithic <b>system</b> and more of a bucket of parts from a single source that fit together decently.</p>\r\n<p>And, all my favorite parts are there:  Among other things there's <a href=\"http://framework.zend.com/manual/en/zend.config.html\">config</a>, <a href=\"http://framework.zend.com/manual/en/zend.log.html\">logging</a>, <a href=\"http://framework.zend.com/manual/en/zend.controller.html\">a front controller</a> with <a href=\"http://framework.zend.com/manual/en/zend.controller.router.html\">URL routing</a>, template-system agnostic <a href=\"http://framework.zend.com/manual/en/zend.view.html\">view support</a>, and somewhat non-magical <a href=\"http://framework.zend.com/manual/en/zend.db.html\">DB / model support</a>.</p>\r\n<p>These were all things I'd grabbed from <a href=\"http://pear.php.net/\">PEAR</a> for <a href=\"http://decafbad.com/svn/trunk/Cuckoo/lib/MiniFramework.php\">my more recent PHP mini-framework</a> play, but I figured there should be some benefit from finding them in a unified collection like the Zend Framework.</p>\r\n<p>The experience was somewhat similar to rolling my own, though.  I stumbled through some docs and eventually found some blog entries and a tutorial.  It's all very loosely-coupled and somewhat DIY, which is actually what I wanted.  The experience has left me wondering if I really <b>should</b> have wanted it, but I'm guessing it'll go easier from here on out.</p>\r\n<p>In the meantime, though, I feel like I have a decent grasp on what all those loosely-coupled parts are doing.  I've skimmed through code, traced wires, broken things and watched the errors.</p>\r\n<p>See, my problem with a lot of modern magic-imbued web frameworks is that I have a deep distrust of what they're doing.  They come with a lot of moving parts doing things that I don't see - and when I do finally see them, I tend to run into decisions with which I disagree.  I see abstraction where I think the gritty concrete needs to be left bare.  I often see lots of astronaut acrobatics that just have to be burning tons of cycles.  I see further acrobatics done to compensate, unrolling loops and pre-parsing config files - which requires further layers of magical tools to generate code and caches.</p>\r\n<p>Too many moving parts wherein assumptions can hide, later to bite me when we're hundreds of miles into the post-launch desert and trying to fight scaling fires or develop a new feature with some weird angles to it.</p>\r\n<p>For example, consider <a href=\"http://www.symfony-project.com/\">Symfony</a> for PHP.  Their configuration system runs PHP code that results in YAML.  Parsing that YAML, along with cascading layers of other generated YAML, then drives a PHP code generation stage, composing all the static code necessary to bootstrap the framework with each request.  There's an amazing amount of flexibility exposed by that system, and it's quite clever -&nbsp;but my curmudgeonly side catches whiffs of insanity.</p>\r\n<p>Maybe that's really the issue -&nbsp;I've been doing this stuff long enough to have written my own one of everything, so I've got my own opinions and I like to have a grasp on everything.  I've written front controllers, templating systems, and model abstraction layers.  I've worked in a half-dozen or so languages doing all the above.  I don't yet accept that web app development has <a href=\"http://mengwong.livejournal.com/38969.html\">passed the da Vinci point</a> -&nbsp;a single developer should be able to grasp the structure of a web framework in mind without getting lost in too many fractal branchings.</p>\r\n<p>Anyway, I'm rambling like an old grouch, but I think I've reached my point.  Hopefully more actual experimentation soon.</p>\n",
    "parentPath": "../blog.lmorchard.com/posts/archives/2007",
    "path": "2007/07/09/a-curmudgeon-playing-with-the-zend-framework"
  }
]