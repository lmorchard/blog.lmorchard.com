{"comments_archived":true,"date":"2006-10-29T00:00:00.000Z","layout":"post","tags":["webdev","firefox","microsummaries","bookmarks"],"title":"Microsummaries and Content-Type Mysteries","wordpress_id":1010,"wordpress_slug":"microsummaries-and-content-type-mysteries","wordpress_url":"http://decafbad.com/blog/2006/10/29/microsummaries-and-content-type-mysteries","url":"/2006/10/29/microsummaries-and-content-type-mysteries/","path":"2006/10/29/microsummaries-and-content-type-mysteries","content":"<p>One of my favorite features of the new Firefox are <a href=\"http://microsummaries.org/\">Microsummaries</a>.  They&#39;re like RSS-lite: one-liner summaries of web pages that can be used to keep bookmark titles up to date and get succinct info about a page.  For example, you could get the latest temperature from the title of a weather report bookmark, or the most recent bid price from an auction page.</p>\n<p>But, there&#39;s one thing that rubs me the wrong way, and it&#39;s this:</p>\n<pre><code>&lt;link rel=&quot;microsummary&quot; href=&quot;microsummary.txt&quot;&gt;\n</code></pre><p>That&#39;s how you clue a client into finding the microsummary for a given HTML page.  Stick that in your head tag, and you&#39;re off.  It&#39;s just like <a href=\"http://diveintomark.org/archives/2002/05/30/rss_autodiscovery\">RSS autodiscovery</a>.  Well it is, except for an important detail: What&#39;s the Content-Type I should expect at that URL?</p>\n<p>You see, microsummaries can be provided as either a direct URL to a plain text summary of the page, or a URL to an XML-based generator providing the means to extract that plain text summary from the page.  But, as spec&#39;ed, you never know which you&#39;re going to get until you fetch the URL.  So, when trying to handle a <a href=\"http://wiki.mozilla.org/Microsummaries\">microsummary</a>, I never know whether to just use the fetched content directly as plain text or whether it&#39;s time to fire up the XSL machinery.</p>\n<p>I&#39;ve seen some sites toss in a type=&quot;text/plain&quot; or type=&quot;application/xml&quot; attribute - which is very helpful and what I really want to see - but it&#39;s not in <a href=\"http://wiki.mozilla.org/Microsummaries\">the spec</a>.  From a cursory perusal of Firefox source code, it looks like the browser tries to sniff the Content-Type header returned by the web server - but that sucks, because web servers often lie or are confused about Content-Type.  I need to read more into that source code, so I can at least do as well as Firefox does.</p>\n<p>Eh, it&#39;s a small gripe, but one on which I&#39;ve spent too much time already.</p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221082514\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://george.hotelling.net/\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=c7d1c8d2b1a7643236a4661e9a974dee&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://george.hotelling.net/\">George Hotelling</a>\n                </div>\n                <a href=\"#comment-221082514\" class=\"permalink\"><time datetime=\"2006-10-29T22:26:04\">2006-10-29T22:26:04</time></a>\n            </div>\n            <div class=\"content\"><p>What&#39;s the advantage of sticking it into the markup instead of just using the HTTP headers for the microsummary?</p></div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221082515&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221082515&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2006-10-31T01:11:08&quot;&gt;2006-10-31T01:11:08&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;Well, in the markup, I&#39;m more confident it&#39;ll tell the intended truth.  That&#39;s easier to change many times than the server config itself to serve up the correct HTTP headers.  I know this is a shady argument - but so far in my small sample set of 8 or so sites, a third of them fed me the wrong Content-Type.  That is, &quot;text/HTML&quot; when it was plain text, &quot;text/HTML&quot; when it was an XML generator.  So, I&#39;ve had to come up with some smart guesses.&lt;/p&gt;\n</code></pre><p>One example, <a href=\"http://www.markdownmonkey.com/microsummary.asp\" rel=\"nofollow\">Markdown Monkey</a>.  The site header includes a type=&quot;application/x.microsummary+xml&quot; for href=&quot;<a href=\"http://www.markdownmonkey.com/microsummary.asp&quot;\">http://www.markdownmonkey.com/microsummary.asp&quot;</a>, yet the server feeds me a Content-Type: text/html header.</p></div>\n\n        </li>\n\n        <li class=\"comment\" id=\"comment-221082517\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://www.decafbad.com\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://www.decafbad.com\">l.m.orchard</a>\n                </div>\n                <a href=\"#comment-221082517\" class=\"permalink\"><time datetime=\"2006-10-31T01:12:15\">2006-10-31T01:12:15</time></a>\n            </div>\n            <div class=\"content\"><p>And, of course, there&#39;s always this old horror story:</p>\n\n<p><a href=\"http://www.xml.com/pub/a/2004/07/21/dive.html\">http://www.xml.com/pub/a/2004/07/21/dive.html</a></p></div>\n\n        </li>\n\n        <li class=\"comment\" id=\"comment-221082518\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://www.melez.com/mykzilla/\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=4bcc1646956acd3ee25234b34da91414&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://www.melez.com/mykzilla/\">Myk Melez</a>\n                </div>\n                <a href=\"#comment-221082518\" class=\"permalink\"><time datetime=\"2006-11-01T01:33:18\">2006-11-01T01:33:18</time></a>\n            </div>\n            <div class=\"content\"><p>Indeed, Firefox ignores the type attribute to the  tag.  It would be great if that attribute wasn&#39;t necessary, because web servers always served the correct type, but that&#39;s clearly not the case, and allowing pages to specify the content type of their microsummaries seems likely to be as useful for microsummaries as it is for feeds.</p>\n\n<p><p>I have filed <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=358977\" rel=\"nofollow\">bug 358977</a> on the issue.</p></div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221082519&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221082519&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2006-11-01T02:23:32&quot;&gt;2006-11-01T02:23:32&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;Myk: Fair enough.  Excellent technology, by the way.  :)&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}