[
  {
    "title": "Firefox Test Pilot: The Flattening",
    "tags": [
      "mozilla",
      "testpilot",
      "webdev",
      "django",
      "gulp"
    ],
    "thumbnail": "/uploads/2016/tp-flat.png",
    "year": "2016",
    "month": "09",
    "day": "26",
    "isDir": false,
    "slug": "testpilot-static",
    "date": "2016-09-26T12:00:00.000Z",
    "postName": "2016-09-26-testpilot-static",
    "html": "<p><strong>TL;DR</strong>: Firefox Test Pilot is becoming a statically-generated site from content in flat files. We&#39;re moving away from Django and PostgreSQL, and it&#39;s been a bit of a journey.</p>\n<!--more-->\n\n<img class=\"fullwidth\" src=\"/uploads/2016/tp-header.png\" />\n\n<nav role=\"navigation\" class=\"table-of-contents\"></nav>\n\n<p>I&#39;ve been working on <a href=\"https://testpilot.firefox.com/\">Firefox Test Pilot</a> for over a year, but I haven&#39;t written about it here before now. Mostly because I&#39;ve been busy and lazy and <a href=\"/2016/08/31/yak-shaving-habits/\">busily shaving yaks</a>.</p>\n<p>But, there have been big things afoot lately, and I figured they were worth writing about - if only because they&#39;re invisible, behind-the-scenes things that nonetheless took a lot of work to accomplish.</p>\n<h2 id=\"be-prepared---but-for-what\">Be prepared - but for what?</h2>\n<p>When we started building Test Pilot last summer, we based the server-side on Django &amp; PostgreSQL. We had assumptions about the future: </p>\n<ul>\n<li><p>We&#39;d need to collect measurements from experiments. </p>\n</li>\n<li><p>We thought experiments would need some active server-side resources provided by the mothership.</p>\n</li>\n<li><p>We&#39;d need to manage user profiles &amp; preferences, so we required sign-in with a Firefox Account. </p>\n</li>\n</ul>\n<p>A year later, these assumptions didn&#39;t quite pan out: </p>\n<ul>\n<li><p>Rather than reinvent the wheel by collecting &amp; analyzing measurements ourselves, we took advantage of Google Analytics and the efforts of <a href=\"https://wiki.mozilla.org/Telemetry\">the Firefox Telemetry team</a>.</p>\n</li>\n<li><p>We found it&#39;s best to stay out of the way of teams building Test Pilot experiments - let them manage their own services as necessary, rather than be tied to the delivery cadence of the core project.</p>\n</li>\n<li><p>The sign-in requirement turned away many potential users. But, we didn&#39;t need accounts to facilitate experiment participation anyway. Our metrics are anonymous and a Firefox add-on manages opt-in.</p>\n<p>Accounts ended up being private data we had to keep secure, but only used for email notifications. We have better ways to manage email subscriptions across Mozilla - so one less wheel to reinvent!</p>\n</li>\n</ul>\n<h2 id=\"didnt-need-that-server-anyway\">Didn&#39;t need that server anyway</h2>\n<p>There was just one last reason to use Django &amp; PostgreSQL on Test Pilot: A web-based content management system to update the site without heavyweight server deployments &amp; database migrations. </p>\n<p>But, wait a minute: If the other reasons for a server dropped away - why do we need complex deployments?</p>\n<p>Furthermore, why maintain content <a href=\"https://indieweb.org/database-antipattern\">in a database</a> at all?</p>\n<p>The whole Test Pilot team knows their way around text editors and GitHub - so let&#39;s make that our CMS. We can <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\">bake the whole site</a> from <a href=\"https://github.com/mozilla/testpilot/tree/master/content-src/experiments\">flat files</a>. Deployment is <a href=\"https://github.com/mozilla/testpilot/blob/master/docs/development/deployment.md#producing-a-static-build\">running a build script</a> and <a href=\"https://github.com/mozilla/testpilot/blob/master/circle.yml#L71\">uploading the result</a> to a web server. We get revision control &amp; collaboration along with the rest of the project. And as a security bonus, we stop shipping the tools to change the site along with the deployed site itself.</p>\n<p>None of this is revolutionary. Aaron Swartz&#39;s &quot;<a href=\"http://www.aaronsw.com/weblog/000404\">Bake, Don&#39;t Fry</a>&quot; is over 14 years old: Why fry up a new web page for every visit when you can pre-bake the whole site ahead of time? I used <a href=\"http://blosxom.sourceforge.net/\">Bloxsom</a> back in the day and <a href=\"https://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\">Gulp bakes this blog now</a>. Static site generators <a href=\"https://www.staticgen.com/\">are numerous &amp; popular</a> - GitHub itself offers <a href=\"https://help.github.com/articles/using-jekyll-as-a-static-site-generator-with-github-pages/\">GitHub Pages</a> powered by <a href=\"https://github.com/jekyll/jekyll\">Jekyll</a>.</p>\n<p>It sounds obvious in retrospect, but it took awhile to realize our site could be stripped down to so little. We assumed we needed all those moving parts - or would need them someday. But, it appears that we can get away with being nearly serverless. And if someday a feature requires more, we can stand up some loosely-coupled microservices - or better yet, find that another team at Mozilla has already solved the problem.</p>\n<h2 id=\"the-show-must-go-on\">The show must go on</h2>\n<p>But, having realized all of this, we couldn&#39;t just burn down the site and start over. Because we&#39;re working on a vehicle in motion, we&#39;ve been doing this in increments over the summer: </p>\n<ul>\n<li><p>A couple of months ago, <a href=\"https://github.com/mozilla/testpilot/issues/1035\">we removed the Firefox Accounts requirement</a> and then <a href=\"https://github.com/mozilla/testpilot/issues/1034\">deleted the user data</a> once we were sure we weren&#39;t going back.</p>\n</li>\n<li><p>We switched data sources for displaying the number of folks participating in experiments from our own Django API to <a href=\"https://github.com/mozilla/testpilot/issues/1039\">a Telemetry-based resource</a>.</p>\n</li>\n<li><p>I wrote a task to <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L22\">import content from the current Django API</a>. Then, I wrote <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L16\">a task to generate JSON</a> from those imported files - a direct static replacement for the Django API.</p>\n</li>\n<li><p>Next, I implemented <a href=\"https://github.com/mozilla/testpilot/blob/master/testpilot/experiments/views.py#L50\">a feature flag in Django</a> to substitute static JSON for content from the database. Thus, we can start managing content in YAML now, maintaining our current infrastructure until we work out a new stripped-down deployment process.</p>\n</li>\n<li><p>Soon, we&#39;ll be able to update the site by pushing to the appropriate branch on GitHub. We&#39;ve got <a href=\"https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\">tasks to generate stub pages</a> for all the front end app routes. We&#39;re also looking into enforcing a requirement to <a href=\"http://micropipes.com/blog//2016/08/31/signing-your-commits-on-github-with-a-gpg-key/\">sign our commits and tags</a> on the way to release.</p>\n</li>\n<li><p>After that, <a href=\"https://github.com/mozilla/testpilot/issues/1306\">we plan to go even further with static site generation</a>. Test Pilot is currently a single page app that pulls content from JSON. But, we can do better by pre-rendering those HTML pages in our build process ahead of time.</p>\n</li>\n</ul>\n<h2 id=\"whats-next\">What&#39;s next?</h2>\n<p>There&#39;s a funny thing about all of this: If we&#39;re successful, no one visiting the site should notice anything different. We&#39;re developing some new features &amp; experiments - but all this work to rid our infrastructure of Django &amp; PostgreSQL should ideally be a non-event for anyone visiting the site. This is the least glamorous sort of work one occasionally has to do on a software project - change everything, but don&#39;t break anything.</p>\n<p>The real benefit will be that we&#39;re able to do a lot of things faster and more easily. For instance, there are now fewer places that need changes to display a new piece of information on a page. We don&#39;t have to monitor as many third-party dependencies - <a href=\"https://github.com/mozilla/testpilot/issues/1116\">which we weren&#39;t doing very well to begin with</a>.</p>\n<p>Our development stack shrinks from Docker containers with Django &amp; PostgreSQL &amp; Node.js - down to just Node.js v6.2.0. <a href=\"https://github.com/mozilla/testpilot/blob/master/docs/development/quickstart.md\">The whole system has gotten simpler and more direct</a>.</p>\n<p>But, wait, there&#39;s more: Along with totally changing our server-side infrastructure, <a href=\"https://github.com/mozilla/testpilot/issues/1307\">we&#39;ve also rewritten the front end of the site to switch from Ampersand to React &amp; Redux</a>. It should make static site generation easier. It&#39;s also eased development on a handful of new features in the past week or so.</p>\n<p>It&#39;s a big deal - and another thing that, in retrospect, seems more obvious now than it did a year ago. But, I&#39;m going to save writing about that for my next post.</p>\n<!-- vim: set wrap linebreak nolist wrapmargin=0 textwidth=0 syntax=markdown formatoptions-=t: -->\n",
    "body": "**TL;DR**: Firefox Test Pilot is becoming a statically-generated site from content in flat files. We're moving away from Django and PostgreSQL, and it's been a bit of a journey.\n\n<!--more-->\n\n<img class=\"fullwidth\" src=\"/uploads/2016/tp-header.png\" />\n\n<nav role=\"navigation\" class=\"table-of-contents\"></nav>\n\nI've been working on [Firefox Test Pilot][testpilot] for over a year, but I haven't written about it here before now. Mostly because I've been busy and lazy and [busily shaving yaks](/2016/08/31/yak-shaving-habits/).\n\nBut, there have been big things afoot lately, and I figured they were worth writing about - if only because they're invisible, behind-the-scenes things that nonetheless took a lot of work to accomplish.\n\n## Be prepared - but for what?\n\nWhen we started building Test Pilot last summer, we based the server-side on Django & PostgreSQL. We had assumptions about the future: \n\n* We'd need to collect measurements from experiments. \n\n* We thought experiments would need some active server-side resources provided by the mothership.\n\n* We'd need to manage user profiles & preferences, so we required sign-in with a Firefox Account. \n\nA year later, these assumptions didn't quite pan out: \n\n* Rather than reinvent the wheel by collecting & analyzing measurements ourselves, we took advantage of Google Analytics and the efforts of [the Firefox Telemetry team][telemetry].\n\n* We found it's best to stay out of the way of teams building Test Pilot experiments - let them manage their own services as necessary, rather than be tied to the delivery cadence of the core project.\n\n* The sign-in requirement turned away many potential users. But, we didn't need accounts to facilitate experiment participation anyway. Our metrics are anonymous and a Firefox add-on manages opt-in.\n  \n  Accounts ended up being private data we had to keep secure, but only used for email notifications. We have better ways to manage email subscriptions across Mozilla - so one less wheel to reinvent!\n\n## Didn't need that server anyway\n\nThere was just one last reason to use Django & PostgreSQL on Test Pilot: A web-based content management system to update the site without heavyweight server deployments & database migrations. \n\nBut, wait a minute: If the other reasons for a server dropped away - why do we need complex deployments?\n\nFurthermore, why maintain content [in a database][database] at all?\n\nThe whole Test Pilot team knows their way around text editors and GitHub - so let's make that our CMS. We can [bake the whole site][sitebake] from [flat files][]. Deployment is [running a build script][buildscript] and [uploading the result][uploadweb] to a web server. We get revision control & collaboration along with the rest of the project. And as a security bonus, we stop shipping the tools to change the site along with the deployed site itself.\n\nNone of this is revolutionary. Aaron Swartz's \"[Bake, Don't Fry][baked]\" is over 14 years old: Why fry up a new web page for every visit when you can pre-bake the whole site ahead of time? I used [Bloxsom][] back in the day and [Gulp bakes this blog now][gulp]. Static site generators [are numerous & popular][staticgen] - GitHub itself offers [GitHub Pages][pages] powered by [Jekyll][].\n\nIt sounds obvious in retrospect, but it took awhile to realize our site could be stripped down to so little. We assumed we needed all those moving parts - or would need them someday. But, it appears that we can get away with being nearly serverless. And if someday a feature requires more, we can stand up some loosely-coupled microservices - or better yet, find that another team at Mozilla has already solved the problem.\n\n## The show must go on\n\nBut, having realized all of this, we couldn't just burn down the site and start over. Because we're working on a vehicle in motion, we've been doing this in increments over the summer: \n\n* A couple of months ago, [we removed the Firefox Accounts requirement][fxareq] and then [deleted the user data][deletedata] once we were sure we weren't going back.\n\n* We switched data sources for displaying the number of folks participating in experiments from our own Django API to [a Telemetry-based resource][counts].\n\n* I wrote a task to [import content from the current Django API][import]. Then, I wrote [a task to generate JSON][generatejson] from those imported files - a direct static replacement for the Django API.\n\n* Next, I implemented [a feature flag in Django][featureflag] to substitute static JSON for content from the database. Thus, we can start managing content in YAML now, maintaining our current infrastructure until we work out a new stripped-down deployment process.\n\n* Soon, we'll be able to update the site by pushing to the appropriate branch on GitHub. We've got [tasks to generate stub pages][stubs] for all the front end app routes. We're also looking into enforcing a requirement to [sign our commits and tags][signreq] on the way to release.\n\n* After that, [we plan to go even further with static site generation][staticsite]. Test Pilot is currently a single page app that pulls content from JSON. But, we can do better by pre-rendering those HTML pages in our build process ahead of time.\n\n## What's next?\n\nThere's a funny thing about all of this: If we're successful, no one visiting the site should notice anything different. We're developing some new features & experiments - but all this work to rid our infrastructure of Django & PostgreSQL should ideally be a non-event for anyone visiting the site. This is the least glamorous sort of work one occasionally has to do on a software project - change everything, but don't break anything.\n\nThe real benefit will be that we're able to do a lot of things faster and more easily. For instance, there are now fewer places that need changes to display a new piece of information on a page. We don't have to monitor as many third-party dependencies - [which we weren't doing very well to begin with][dependencies].\n\nOur development stack shrinks from Docker containers with Django & PostgreSQL & Node.js - down to just Node.js v6.2.0. [The whole system has gotten simpler and more direct][quickstart].\n\nBut, wait, there's more: Along with totally changing our server-side infrastructure, [we've also rewritten the front end of the site to switch from Ampersand to React & Redux][reactrewrite]. It should make static site generation easier. It's also eased development on a handful of new features in the past week or so.\n\nIt's a big deal - and another thing that, in retrospect, seems more obvious now than it did a year ago. But, I'm going to save writing about that for my next post.\n\n[dependencies]: https://github.com/mozilla/testpilot/issues/1116\n[quickstart]: https://github.com/mozilla/testpilot/blob/master/docs/development/quickstart.md\n[testpilot]: https://testpilot.firefox.com/\n[buildscript]: https://github.com/mozilla/testpilot/blob/master/docs/development/deployment.md#producing-a-static-build\n[uploadweb]: https://github.com/mozilla/testpilot/blob/master/circle.yml#L71\n[sitebake]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\n[stubs]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/pages.js\n[signreq]: http://micropipes.com/blog//2016/08/31/signing-your-commits-on-github-with-a-gpg-key/\n[reactrewrite]: https://github.com/mozilla/testpilot/issues/1307\n[staticsite]: https://github.com/mozilla/testpilot/issues/1306\n[featureflag]: https://github.com/mozilla/testpilot/blob/master/testpilot/experiments/views.py#L50\n[generatejson]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L16\n[import]: https://github.com/mozilla/testpilot/blob/master/frontend/tasks/content.js#L22\n[counts]: https://github.com/mozilla/testpilot/issues/1039\n[deletedata]: https://github.com/mozilla/testpilot/issues/1034\n[fxareq]: https://github.com/mozilla/testpilot/issues/1035\n[flat files]: https://github.com/mozilla/testpilot/tree/master/content-src/experiments\n[telemetry]: https://wiki.mozilla.org/Telemetry\n[gulp]: https://blog.lmorchard.com/2014/10/20/static-blog-generation-with-gulp/\n[bloxsom]: http://blosxom.sourceforge.net/\n[jekyll]: https://github.com/jekyll/jekyll\n[pages]: https://help.github.com/articles/using-jekyll-as-a-static-site-generator-with-github-pages/\n[baked]: http://www.aaronsw.com/weblog/000404\n[database]: https://indieweb.org/database-antipattern\n[staticgen]: https://www.staticgen.com/\n\n<!-- vim: set wrap linebreak nolist wrapmargin=0 textwidth=0 syntax=markdown formatoptions-=t: -->\n",
    "parentPath": "../blog.lmorchard.com/posts",
    "path": "2016/09/26/testpilot-static",
    "summary": "<p><strong>TL;DR</strong>: Firefox Test Pilot is becoming a statically-generated site from content in flat files. We&apos;re moving away from Django and PostgreSQL, and it&apos;s been a bit of a journey.</p>\n"
  },
  {
    "title": "Poking the Mongo on Pico-8",
    "tags": [
      "gaming",
      "pico8",
      "lua",
      "pokethemongo"
    ],
    "thumbnail": "/uploads/2016/poke-the-mongo/poke-the-mongo.p8.png",
    "year": "2016",
    "month": "09",
    "day": "11",
    "isDir": false,
    "slug": "poke-the-mongo",
    "date": "2016-09-11T12:00:00.000Z",
    "postName": "2016-09-11-poke-the-mongo",
    "html": "<p><strong>TL;DR</strong>: I started writing a video game for a fantasy console. The future is weird.</p>\n<!--more-->\n\n<nav role=\"navigation\" class=\"table-of-contents\"></nav>\n\n<h2 id=\"enter-the-pocketchip\">Enter the PocketC.H.I.P.</h2>\n<p><a href=\"http://www.lexaloffle.com/pico-8.php\">Pico-8</a> has been out for a few years. With it, folks have been making fun neo-retro games - and of course I&#39;ve got a soft spot for that genre. </p>\n<p>But, I never really fell down the Pico-8 rabbit hole until this arrived:</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">Oh hey! My <a href=\"https://twitter.com/hashtag/pocketchip?src=hash\">#pocketchip</a> just showed up! <a href=\"https://t.co/5HxB2mzCPw\">pic.twitter.com/5HxB2mzCPw</a></p>&mdash; Les Orchard (@lmorchard) <a href=\"https://twitter.com/lmorchard/status/766350094555750400\">August 18, 2016</a></blockquote>\n\n<p><a href=\"http://boingboing.net/2016/05/04/tiny-8-bit-console-designed-f.html\">I read about the PocketC.H.I.P. back in May</a>. I was sold on the idea of real hardware for a fantasy game console - a Raspberry PI turned GameBoy. I pre-ordered and then mostly forgot about it. Fast forward three months and I&#39;ve got the thing in my hands.</p>\n<p>While I do want to write up an in-depth look at the PocketC.H.I.P., for now I&#39;m going to focus on this Pico-8 thing that&#39;s grabbed me in the past few weeks.</p>\n<p>But, like my old Commodore 64, PocketC.H.I.P. is a gateway drug: It doesn&#39;t just play games - it comes with a full Pico-8 installation: Tools for code, sprites, maps, sounds, and music. In past visits to the Pico-8 scene, using just the web player, the significance of this hadn&#39;t quite dawned on me. </p>\n<h2 id=\"view-source\">View Source</h2>\n<img class=\"lazyload inset right\" data-src=\"/uploads/2016/poke-the-mongo/PICO-8_21.gif\" />\n\n<p>With the full package, you can hit <kbd>Esc</kbd> on any running cartridge and tinker with the source - <strong>not entirely unlike View Source and Developer Tools on the Web</strong>. And, <a href=\"/2015/08/07/web-awesome/\">you know I&#39;m a fan of that</a>.</p>\n<p>Or, to strum my nostalgia strings, it&#39;s like when I would pour over listings in 1980s computer magazines to see how those games worked. In fact, there have even been a few issues of a <a href=\"https://sectordub.itch.io/pico-8-fanzine-1\">Pico-8 Zine</a> with code and interviews. </p>\n<p>After I&#39;d poked at a dozen-odd carts and browsed through the zines, I thought I should give it a go myself. I didn&#39;t know much Lua, but it&#39;s an easy language to pick up. Simpler than JavaScript, <a href=\"https://twitter.com/lmorchard/status/766870582856081409\">but it beats revisiting BASIC</a> - even my old favorite <a href=\"https://en.wikipedia.org/wiki/Simons%27_BASIC\">Simons&#39; BASIC</a>, which has a surprising amount in common with this modern day system. </p>\n<p>I also decided to be masochistic by coding directly on the PocketC.H.I.P. Later, when my fingers vetoed further typing on metal domes, I plugged in a USB keyboard. As things got more complex, I broke down and bought the main edition of Pico-8 to move to a bigger screen. It&#39;s not Free Software or even Free-as-in-Beer. But, <a href=\"http://www.lexaloffle.com/pico-8.php#getpico8\">it&#39;s only US$14.99</a>. That single purchase gave me access to versions for my PC, Mac, and Linux machines. </p>\n<p>(There&#39;s even a Raspberry PI version - which gives me ideas for building a Pico-8 multicade machine. But, that&#39;s a story for another post.)</p>\n<p>On my PC, I discovered <code>.p8</code> cartridges are just text files I can edit in Vim! With that revelation, <a href=\"https://github.com/lmorchard/Pico-8-Carts\">I created a GitHub repo</a> and started saving my work there. Things have come a long way since I only had a tape drive to work with on my C64!</p>\n<p>A couple of days later, I had a promising start:</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">Just in case I don&#39;t work on it any further, here&#39;s Poke the Mongo v0.1! <a href=\"https://t.co/Qgn0p2ZCep\">https://t.co/Qgn0p2ZCep</a> <a href=\"https://t.co/rGtP6UCf5p\">pic.twitter.com/rGtP6UCf5p</a></p>&mdash; Les Orchard (@lmorchard) <a href=\"https://twitter.com/lmorchard/status/767604122388279296\">August 22, 2016</a></blockquote>\n\n<h2 id=\"share-and-enjoy\">Share and enjoy!</h2>\n<p>There are a few more things I discovered in composing that tweet:</p>\n<ol>\n<li><p>Pico-8 has easy built-in video recording that renders animated GIFs to my desktop. <kbd>F3</kbd> to start, <kbd>F4</kbd> to save - and I&#39;m ready to tweet little moments while I hack.</p>\n</li>\n<li><p>Pico-8 cartridges can be exported as images. <img class=\"inset right\" style=\"width: inherit\" src=\"/uploads/2016/poke-the-mongo/poke-the-mongo.p8.png\" /> The code for my game is encoded in that PNG with <a href=\"https://twitter.com/lexaloffle/status/611581098900897793\">a steganography technique that subtly tweaks pixel color bits</a>. As long as no intermediaries corrupt the hidden encoding, I can share this game cartridge by uploading the image.</p>\n</li>\n<li><p>Apropos of that, Lexaloffle has forums - a BBS - where folks post &amp; discuss their Pico-8 carts. <a href=\"http://www.lexaloffle.com/bbs/?tid=4111\">You can find mine over here</a>!</p>\n</li>\n<li><p>Inside Pico-8 is a mode called &quot;Splore&quot; which connects to the Lexaloffle BBS to let you browse uploaded carts from the console. So, when I uploaded my game, it was instantly available to everyone else with Pico-8!</p>\n</li>\n</ol>\n<p>Pico-8 is game making as a social activity, and the system has all the batteries included.</p>\n<h2 id=\"game-making-is-a-fun-game\">Game making is a fun game</h2>\n<p>As I tinkered, it occurred to me that Pico-8 is less a serious game development system and more a game about making games. Through intentional constraints &amp; platform quirks, it offers offer creative hooks &amp; puzzles.</p>\n<p>The constraints mean it&#39;s not as easy to get lost in options or feel overwhelmed. For example, <a href=\"https://neko250.github.io/pico8-api/\">here&#39;s a Pico-8 API cheatsheet</a> - it&#39;s pretty much all I&#39;ve needed! It&#39;s also hard to build anything huge, so there&#39;s less of a compulsion to go beyond doodles or a few specific game mechanics. I can make something derpy but good enough and move on without stressing about my artistic skills.</p>\n<p>But also, some folks have found ways to really push the boundaries of the system - and that is a puzzle in itself. It&#39;s great to get a fresh dose of that old school awe from seeing a clever hack make the machine do something it wasn&#39;t meant to do. It&#39;s akin to seeing someone pull off some nasty moves in game streams where I know just enough to realize what&#39;s happening.</p>\n<p>I&#39;m nowhere near that level of Pico-8 mastery, but it could be interesting to dive into some of the things I&#39;ve learned so far. But, I&#39;ll save that for yet another post.</p>\n<h2 id=\"play-my-game\">Play my game!</h2>\n<p>Pico-8 games can also be exported to HTML5 and JavaScript. This embedded web player consists of the game code and an Emscripten-compiled version of the Pico-8 engine. So, <a href=\"/2015/08/07/web-awesome/\">because the web is awesome</a>, even if Pico-8 goes away this copy of my game will continue working long after:</p>\n<iframe class=\"lazyload\" style=\"width: 100%; height: 420px\" scrolling=\"no\" frameborder=\"0\" allowfullscreen data-src=\"/uploads/2016/poke-the-mongo/pokethemongo.html\"></iframe>\n\n<p>I&#39;ve also read that the folks behind Pico-8 aren&#39;t particularly hostile to others cloning the system - which has lead to things like <a href=\"https://github.com/picolove/picolove\">PICOLOVE</a>, an independent implementation of the Pico-8 APIs for another Lua-based game system. I&#39;ve seen a few folks leverage that to get their games running on Android, so I&#39;ll have to check that out at some point.</p>\n<p>Anyway, I&#39;ve got a few more things to add, but I think this game is getting pretty close to where I want it to be. It&#39;s all gone much faster than I expected, so I&#39;m looking forward to trying more ideas. </p>\n<p>Until then, let me know how you like Poke the Mongo, and I&#39;ll follow up with a more in-depth look at how I made this thing!</p>\n<script async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"></script>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n<!-- vim: set wrap linebreak nolist wrapmargin=0 textwidth=0 syntax=markdown formatoptions-=t textwidth=78: -->\n",
    "body": "**TL;DR**: I started writing a video game for a fantasy console. The future is weird.\n\n<!--more-->\n\n<nav role=\"navigation\" class=\"table-of-contents\"></nav>\n\n## Enter the PocketC.H.I.P.\n\n[Pico-8][] has been out for a few years. With it, folks have been making fun neo-retro games - and of course I've got a soft spot for that genre. \n\n[Pico-8]: http://www.lexaloffle.com/pico-8.php\n\nBut, I never really fell down the Pico-8 rabbit hole until this arrived:\n\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">Oh hey! My <a href=\"https://twitter.com/hashtag/pocketchip?src=hash\">#pocketchip</a> just showed up! <a href=\"https://t.co/5HxB2mzCPw\">pic.twitter.com/5HxB2mzCPw</a></p>&mdash; Les Orchard (@lmorchard) <a href=\"https://twitter.com/lmorchard/status/766350094555750400\">August 18, 2016</a></blockquote>\n\n[I read about the PocketC.H.I.P. back in May](http://boingboing.net/2016/05/04/tiny-8-bit-console-designed-f.html). I was sold on the idea of real hardware for a fantasy game console - a Raspberry PI turned GameBoy. I pre-ordered and then mostly forgot about it. Fast forward three months and I've got the thing in my hands.\n\nWhile I do want to write up an in-depth look at the PocketC.H.I.P., for now I'm going to focus on this Pico-8 thing that's grabbed me in the past few weeks.\n\nBut, like my old Commodore 64, PocketC.H.I.P. is a gateway drug: It doesn't just play games - it comes with a full Pico-8 installation: Tools for code, sprites, maps, sounds, and music. In past visits to the Pico-8 scene, using just the web player, the significance of this hadn't quite dawned on me. \n\n## View Source\n\n<img class=\"lazyload inset right\" data-src=\"/uploads/2016/poke-the-mongo/PICO-8_21.gif\" />\n\nWith the full package, you can hit <kbd>Esc</kbd> on any running cartridge and tinker with the source - **not entirely unlike View Source and Developer Tools on the Web**. And, [you know I'm a fan of that](/2015/08/07/web-awesome/).\n\nOr, to strum my nostalgia strings, it's like when I would pour over listings in 1980s computer magazines to see how those games worked. In fact, there have even been a few issues of a [Pico-8 Zine](https://sectordub.itch.io/pico-8-fanzine-1) with code and interviews. \n\nAfter I'd poked at a dozen-odd carts and browsed through the zines, I thought I should give it a go myself. I didn't know much Lua, but it's an easy language to pick up. Simpler than JavaScript, [but it beats revisiting BASIC][BASICtweet] - even my old favorite [Simons' BASIC](https://en.wikipedia.org/wiki/Simons%27_BASIC), which has a surprising amount in common with this modern day system. \n\nI also decided to be masochistic by coding directly on the PocketC.H.I.P. Later, when my fingers vetoed further typing on metal domes, I plugged in a USB keyboard. As things got more complex, I broke down and bought the main edition of Pico-8 to move to a bigger screen. It's not Free Software or even Free-as-in-Beer. But, [it's only US$14.99](http://www.lexaloffle.com/pico-8.php#getpico8). That single purchase gave me access to versions for my PC, Mac, and Linux machines. \n\n(There's even a Raspberry PI version - which gives me ideas for building a Pico-8 multicade machine. But, that's a story for another post.)\n\nOn my PC, I discovered `.p8` cartridges are just text files I can edit in Vim! With that revelation, [I created a GitHub repo][p8repo] and started saving my work there. Things have come a long way since I only had a tape drive to work with on my C64!\n\n[BASICtweet]: https://twitter.com/lmorchard/status/766870582856081409\n[p8repo]: https://github.com/lmorchard/Pico-8-Carts\n\nA couple of days later, I had a promising start:\n\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">Just in case I don&#39;t work on it any further, here&#39;s Poke the Mongo v0.1! <a href=\"https://t.co/Qgn0p2ZCep\">https://t.co/Qgn0p2ZCep</a> <a href=\"https://t.co/rGtP6UCf5p\">pic.twitter.com/rGtP6UCf5p</a></p>&mdash; Les Orchard (@lmorchard) <a href=\"https://twitter.com/lmorchard/status/767604122388279296\">August 22, 2016</a></blockquote>\n\n## Share and enjoy!\n\nThere are a few more things I discovered in composing that tweet:\n\n1. Pico-8 has easy built-in video recording that renders animated GIFs to my desktop. <kbd>F3</kbd> to start, <kbd>F4</kbd> to save - and I'm ready to tweet little moments while I hack.\n\n1. Pico-8 cartridges can be exported as images. <img class=\"inset right\" style=\"width: inherit\" src=\"/uploads/2016/poke-the-mongo/poke-the-mongo.p8.png\" /> The code for my game is encoded in that PNG with [a steganography technique that subtly tweaks pixel color bits](https://twitter.com/lexaloffle/status/611581098900897793). As long as no intermediaries corrupt the hidden encoding, I can share this game cartridge by uploading the image.\n\n1. Apropos of that, Lexaloffle has forums - a BBS - where folks post & discuss their Pico-8 carts. [You can find mine over here][mongobbs]!\n\n1. Inside Pico-8 is a mode called \"Splore\" which connects to the Lexaloffle BBS to let you browse uploaded carts from the console. So, when I uploaded my game, it was instantly available to everyone else with Pico-8!\n\nPico-8 is game making as a social activity, and the system has all the batteries included.\n\n## Game making is a fun game\n\nAs I tinkered, it occurred to me that Pico-8 is less a serious game development system and more a game about making games. Through intentional constraints & platform quirks, it offers offer creative hooks & puzzles.\n\nThe constraints mean it's not as easy to get lost in options or feel overwhelmed. For example, [here's a Pico-8 API cheatsheet](https://neko250.github.io/pico8-api/) - it's pretty much all I've needed! It's also hard to build anything huge, so there's less of a compulsion to go beyond doodles or a few specific game mechanics. I can make something derpy but good enough and move on without stressing about my artistic skills.\n\nBut also, some folks have found ways to really push the boundaries of the system - and that is a puzzle in itself. It's great to get a fresh dose of that old school awe from seeing a clever hack make the machine do something it wasn't meant to do. It's akin to seeing someone pull off some nasty moves in game streams where I know just enough to realize what's happening.\n\nI'm nowhere near that level of Pico-8 mastery, but it could be interesting to dive into some of the things I've learned so far. But, I'll save that for yet another post.\n\n## Play my game!\n\nPico-8 games can also be exported to HTML5 and JavaScript. This embedded web player consists of the game code and an Emscripten-compiled version of the Pico-8 engine. So, [because the web is awesome][webawesome], even if Pico-8 goes away this copy of my game will continue working long after:\n\n<iframe class=\"lazyload\" style=\"width: 100%; height: 420px\" scrolling=\"no\" frameborder=\"0\" allowfullscreen data-src=\"/uploads/2016/poke-the-mongo/pokethemongo.html\"></iframe>\n\nI've also read that the folks behind Pico-8 aren't particularly hostile to others cloning the system - which has lead to things like [PICOLOVE](https://github.com/picolove/picolove), an independent implementation of the Pico-8 APIs for another Lua-based game system. I've seen a few folks leverage that to get their games running on Android, so I'll have to check that out at some point.\n\nAnyway, I've got a few more things to add, but I think this game is getting pretty close to where I want it to be. It's all gone much faster than I expected, so I'm looking forward to trying more ideas. \n\nUntil then, let me know how you like Poke the Mongo, and I'll follow up with a more in-depth look at how I made this thing!\n\n[webawesome]: /2015/08/07/web-awesome/\n[mongobbs]: http://www.lexaloffle.com/bbs/?tid=4111\n\n<script async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"></script>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n<!-- vim: set wrap linebreak nolist wrapmargin=0 textwidth=0 syntax=markdown formatoptions-=t textwidth=78: -->\n",
    "parentPath": "../blog.lmorchard.com/posts",
    "path": "2016/09/11/poke-the-mongo",
    "summary": "<p><strong>TL;DR</strong>: I started writing a video game for a fantasy console. The future is weird.</p>\n"
  }
]