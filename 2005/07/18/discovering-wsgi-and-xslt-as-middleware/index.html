<!DOCTYPE html>
    <html>
      <head>
        <title>Discovering WSGI and XSLT as middleware - blog.lmorchard.com</title>
        <meta property="og:type" content="article" />
        <meta property="og:site_name" content="blog.lmorchard.com" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="author" content="Les Orchard" />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"
        />
        <link
          rel="shortcut icon"
          href="https://www.gravatar.com/avatar/b45c48fc9e05922e2f368a9d7d7d8de1?s=16"
        />

        <script
          defer
          data-domain="blog.lmorchard.com"
          src="https://analytics.lmorchard.com/js/plausible.js"
        ></script>

        <link
          rel="stylesheet"
          type="text/css"
          href="/blog.lmorchard.com/index.css"
        />
        <script type="module" src="/blog.lmorchard.com/index.js"></script>

        <link
          href="https://lmorchard.github.io/blog.lmorchard.com/index.rss"
          rel="alternate"
          title="blog.lmorchard.com"
          type="application/rss+xml"
        />

        <link
                href="/blog.lmorchard.com/index.rss"
                rel="alternate"
                title="blog.lmorchard.com"
                type="application/rss+xml"
              />
        <meta property="og:title" content="Discovering WSGI and XSLT as middleware" />
        <meta
          property="og:url"
          content="https://lmorchard.github.io/blog.lmorchard.com/2005/07/18/discovering-wsgi-and-xslt-as-middleware/"
        />
      </head>
      <body>
        <header class="content-grid">
          <div class="masthead">
            <img src="https://www.gravatar.com/avatar/b45c48fc9e05922e2f368a9d7d7d8de1.jpg?s=128" />
            <div class="title">
              <h1>
                <a href="/blog.lmorchard.com/" title="blog.lmorchard.com">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="100%"
                    height="100%"
                    viewBox="0 0 250 20"
                  >
                    <text
                      lengthAdjust="spacing"
                      fill="currentColor"
                      y="16"
                      textLength="240"
                      x="5"
                    >
                      blog.lmorchard.com
                    </text>
                  </svg>
                </a>
              </h1>
              <h2>
                <rotating-tagline
                  random
                  initial="1"
                  period="7000"
                  src="/blog.lmorchard.com/taglines.json"
                >
                  <a href="/blog.lmorchard.com/" title="It&#39;s all spinning wheels &amp; self-doubt until the first pot of coffee.">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="100%"
                      height="100%"
                      viewBox="0 0 250 20"
                    >
                      <text
                        class="tagline"
                        lengthAdjust="spacing"
                        fill="currentColor"
                        y="16"
                        textLength="240"
                        x="5"
                      >
                        It&#39;s all spinning wheels &amp; self-doubt until the first pot of coffee.
                      </text>
                    </svg>
                  </a>
                </rotating-tagline>
              </h2>
            </div>
          </div>
          <nav class="main-nav">
            <div id="search"></div>
            <ul>
              <li>
                <a href="http://lmorchard.com/"
                  ><span class="fa fa-info-circle"></span> about me</a
                >
              </li>
              <li>
                <a href="/blog.lmorchard.com/archives.html"
                  ><span class="fa fa-archive"></span> archives</a
                >
              </li>
              <li>
                <a href="https://lmorchard.github.io/blog.lmorchard.com/index.rss" title="blog.lmorchard.com"
                  ><span class="fa fa-rss"></span> feed</a
                >
              </li>
              <li class="theme-selector">
                <theme-selector title="Enable dark theme">
                  <label>
                    <input type="checkbox" />
                    <span class="slider"></span>
                  </label>
                </theme-selector>
              </li>
            </ul>
          </nav>
        </header>

        <section class="main"><article
        data-pagefind-body
        class="content content-grid post "
      >
        <header>
          <time
            title="2005-07-18T15:10:44-04:00"
            pubdate="2005-07-18T15:10:44-04:00"
          >
            <span class="prevpost">
              <a
                title="A Few Quick Notes on Podcasts"
                href="/blog.lmorchard.com/2005/07/26/a-few-quick-notes-on-podcasts/"
                >&nbsp;<span class="fa fa-long-arrow-left"></span>&nbsp;</a
              >
            </span>
            <span class="postdate">
              <a href="/blog.lmorchard.com/2005/"
                >2005</a
              >
              &#8226;
              <a href="/blog.lmorchard.com/2005/07/"
                >July</a
              >
              &#8226;
              <span>18</span>
            </span>
            <span class="nextpost">
              <a
                title="AJAX Testing and Logging"
                href="/blog.lmorchard.com/2005/07/18/ajax-testing-and-logging/"
                >&nbsp;<span class="fa fa-long-arrow-right"></span>&nbsp;</a
              >
            </span>
          </time>
          <h1 class="title">Discovering WSGI and XSLT as middleware</h1>
          
        </header>

        <p>As I <a href="http://www.decafbad.com/blog/2005/07/18/ajax_testing_and_logging">mentioned in a previous post</a>, I was a bit busy this weekend while being sick on the couch.  In this post, I'll ramble a bit about my server-side dabbling.  Cutting to the chase, here's an XSLT filter implemented as WSGI middleware:</p>
<ul>
<li><a href="http://www.decafbad.com/2005/07/xmlwiki/lib/xmlwiki/xslfilter.py">http://www.decafbad.com/2005/07/xmlwiki/lib/xmlwiki/xslfilter.py</a></li>
</ul>
<p>Now you can apply XSLT magic to your REST APIs, like <a href="http://www.xml.com/pub/a/2004/08/04/tr-xml.html">Amazon does with theirs</a>.</p>
<p><strong>Update</strong>:  Oh yeah and apropos <a href="http://an9.org/devdev/why_frameworks_suck?sxip-homesite=&amp;checked=1">this righteous rant against frameworks</a>, I think one of the reasons I've been so taken with WSGI is that <em>it's not another damn framework</em>.</p>
<h2 id="discovering-wsgi">Discovering WSGI</h2>
<p>First off, have you heard of this <a href="http://www.python.org/peps/pep-0333.html">WSGI thing</a> for web apps written in Python?  I had seen some burblings about it some time ago, and got the impression that it was fairly shiny, but I hadn't really bothered wrapping my head around it.  Now that I have gotten it lodged somewhat into my cranium, I wish I'd bought into it years ago.  </p>
<p>I've been trying to reinvent a decent abstraction for web apps that can run as both CGIs and web-server-resident modules (whether in Apache, SimpleHTTPServer, or who-knows-what) in Python for ages.  I'd found a few different ways to do it, but none as agnostic or no-nonsense as <a href="http://www.python.org/peps/pep-0333.html">WSGI</a>.  And, not only did I find <a href="http://www.python.org/peps/pep-0333.html">WSGI</a> to be clean &amp; simple--<em>I realized that it also makes web apps <strong>composable</strong></em>.</p>
<p>So, like, if you have a web app that follows the <a href="http://www.python.org/peps/pep-0333.html">WSGI</a> spec, it can be swallowed up by filtering apps.  The filtered apps can have any number of mammoth Python web frameworks powering them, and the filters can be as complex or simple as you want.  Hell, <em>build a web framework entirely out of composed filters</em>!  </p>
<p>I haven't quite wrapped my head around it yet, but I gather that this is part of the purpose of <a href="http://pythonpaste.org/docs/what-is-paste.html">Python Paste</a>--although I could be wrong.</p>
<h2 id="an-xslt-filter-as-wsgi-middleware">An XSLT filter as WSGI middleware</h2>
<p>Anyway, one of the main reasons this composability feature of <a href="http://www.python.org/peps/pep-0333.html">WSGI</a> has me in such an excited state harkens back to two posts I made on <a href="http://www.decafbad.com/blog/2004/11/30/nextgenwebapps">next generation web apps</a> and a <a href="http://www.decafbad.com/blog/2004/12/23/abook1">semi-aborted attempt at a demonstration</a> of such an app.  See, one of the components I've considered to be key to my tinkering with HTTP-and-XML web apps--more specifically, apps centered around REST APIs--is an XSL filter somewhere in the chain.  </p>
<p>The first place I saw this technique used was with <a href="http://www.xml.com/pub/a/2004/08/04/tr-xml.html">Amazon's Web Services</a> and their REST API which accepts the URL of an XSL stylesheet to be applied as a filter to the XML resulting from a query.  So, you can prepare some XSL of your own and fire off a request to Amazon as a specially-constructed URL--in return, you can magically receive a product search in HTML or even RSS/Atom directly.</p>
<p>Now, imagine more than that:  Include XSL filtering in a REST API.  Transform the plain old XML results of a GET request into a full-on XHTML/CSS/JavaScript browser-based application primed with that data.  Include the interactive UI for further drill down queries, as well as forms for submitting edits of the data back to the server via POST/PUT/DELETE using XmlHTTPRequest.   </p>
<p>That's where I'm headed with my experiments, whether I actually get there or not.  In the meantime, I hope the XSLT filter as WSGI middleware is useful to someone.</p>
<div id="comments" class="comments archived-comments"><h3>Archived Comments</h3>
<ul class="comments">
<li class="comment" id="comment-221090666">
<div class="meta">
<div class="author">
<a class="avatar image" rel="nofollow" href="http://blog.ianbicking.org"><img src="http://www.gravatar.com/avatar.php?gravatar_id=cc8334869c9d2a9e603017f2da805eb3&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png" width="" height=""></a>
<a class="avatar name" rel="nofollow" href="http://blog.ianbicking.org">Ian Bicking</a>
</div>


<p><a href="#comment-221090666" class="permalink"><time datetime="2005-07-19T01:34:39">2005-07-19T01:34:39</time></a></p>
</div>


<div class="content">It's cool to see this -- I had actually just mentioned an XSLT
middleware a day ago in an email on Web-SIG about WSGI and possible
middleware, and then there it is.  Incidentally, looking at your code,
if you want to get rid of the filesystem "hack" you can just create a
whole new request and capture the output.  An example of that is
paste.recursive (you'd probably want to just borrow the technique, maybe not the specific module):
http://svn.pythonpaste.org/Paste/trunk/paste/recursive.py
And if you want a place to put
this code, there'd certainly be a place in Paste for it as well.</div>


</li>
<li class="comment" id="comment-221090667">
<div class="meta">
<div class="author">
<a class="avatar image" rel="nofollow" href="http://webseitz.fluxent.com/wiki"><img src="http://www.gravatar.com/avatar.php?gravatar_id=8157a5907b244071cda98ba5aa7a9635&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png" width="" height=""></a>
<a class="avatar name" rel="nofollow" href="http://webseitz.fluxent.com/wiki">Bill Seitz</a>
</div>


<p><a href="#comment-221090667" class="permalink"><time datetime="2006-04-11T12:17:25">2006-04-11T12:17:25</time></a></p>
</div>


<div class="content"><p>Are you running WSGI behind Apache? If so, using what Apache plugin protocol? SCGI?</p></div>


</li>
</ul>


</div>

        
      </article>

      <section class="posts-nav content-grid">
        <span class="prev-post">
            <span
              ><a href="/blog.lmorchard.com/2005/07/26/a-few-quick-notes-on-podcasts/"
                >A Few Quick Notes on Podcasts</a
              ></span
            >
            <span
              ><span class="fa fa-long-arrow-left"></span>&nbsp;Previous</span
            >
          </span>
        <span class="next-post">
            <span
              ><a href="/blog.lmorchard.com/2005/07/18/ajax-testing-and-logging/"
                >AJAX Testing and Logging</a
              ></span
            >
            <span>Next&nbsp;<span class="fa fa-long-arrow-right"></span></span>
          </span>
      </section></section>

        <footer class="content-grid">
          <div class="left">
            © 2024 Les Orchard &lt;<a href="mailto:me@lmorchard.com"
              >me@lmorchard.com</a
            >&gt;
          </div>
          <img id="growup" src="/blog.lmorchard.com/uploads/growup.jpg" />
          <nav class="right">
            <ul>
              <li>
                <a href="https://lmorchard.github.io/blog.lmorchard.com/index.rss" title="blog.lmorchard.com"
                  ><span class="fa fa-rss"></span> feed</a
                >
              </li>
            </ul>
          </nav>
        </footer>
      </body>
    </html>