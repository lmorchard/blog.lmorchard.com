{"comments_archived":true,"date":"2005-06-10T00:00:00.000Z","layout":"post","title":"Blosxom, Tiger, and Spotlight","wordpress_id":649,"wordpress_slug":"blosxom-tiger-and-spotlight","wordpress_url":"http://www.decafbad.com/blog/?p=649","url":"/2005/06/10/blosxom-tiger-and-spotlight/","path":"2005/06/10/blosxom-tiger-and-spotlight","content":"<p>Another tinkering project idea:  Use Spotlight and HFS Extended Attributes in OS X Tiger to build an enhanced rendition of Blosxom.  Blosxom already uses Unix file attributes to track blog posting dates, but now Spotlight offers indexes that are fairly easy to query via command line or scripts.  I think it could also be used to facilitate search within blog postings, which are just text files anyway.</p>\n<p>  Take this further:  What if I could just set arbitrary name/value pairs on files and get them indexed?  Title, tags, related links, author-- all things that would have been inside the Blosxom entry.  But now, they&#39;re in the file system and subject to Spotlight indexing and queries.  Hell, what if I could do this for any kind of file, not just text files?</p>\n<p>  On a mailing list, <a href=\"http://www.cocoabuilder.com/archive/message/cocoa/2005/5/4/134822\">Lee Morgan asks this question</a>:</p>\n<blockquote>\n<p>I realize that the new HFS Extended Attributes are not exposed to the \nhigher level API&#39;s yet, and also that Spotlight doesn&#39;t extract their \ncontents during indexing. However I&#39;m working on a application that \nwould greatly benefit from Spotlight indexing this information. Is it \npossible to write a Spotlight importer that handles every file with \nout it interfering with other plug-ins? So that I can extract the \nextended attributes and add it to the Spotlight store.</p>\n</blockquote>\n<p>  If anything, <em>this</em> is my biggest disappointment with Tiger and Spotlight.  So close to an open database-like filesystem like BeFS, but so far away.</p>\n<p>  As I understand it, the issue is this:  </p>\n<ul>\n<li>HFS Extended Attributes allow you to attach arbitrary name/value pairs to files-- ie. <code>lmoProject = &quot;Client #2345&quot;</code>.</li>\n<li>Spotlight indexes name/value metadata associated with files-- ie. <code>kMDItemDisplayName = &quot;Unison&quot;</code>.</li>\n<li>However, Spotlight doesn&#39;t index the name/value metadata from HFS Extended Attributes.  Instead, the source of name/value data for Spotlight comes from importer plugins which interrogate file contents.  Huh, that kinda sucks: HFS metadata and Spotlight indexing seem made for each other.</li>\n<li>Spotlight importers are are keyed on the <code>kMDItemContentType</code> of a file and there can be only one Spotlight importer per file type.  Hmm, that seems limiting.</li>\n</ul>\n<p>My sad conclusion?  Since there can only be one Spotlight importer per type, and none of these handle HFS Extended Attributes, there&#39;s no way I can see to somehow hack support for an HFS Extended Attribute importer into Spotlight across all file types without either replacing all importers or hacking the Spotlight core itself.</p>\n<p>I suppose I could create a &quot;new&quot; file type that&#39;s really just a text file, but create an importer that can read RFC822-inspired headers in blog postings and index those.  </p>\n<p>But I&#39;d really like to rev things up by including MP3s (podcasts), MOVs (screencasts), and lots of other things besides text.  However, I want to apply my own arbitrary metadata to them--like tags and related links and contributors and such.  Instead, I&#39;m stuck with whatever existing importers supply.  </p>\n<p>Granted, there <em>is</em> a lot that these importers supply, which is better than nothing and there are certainly some ways I can think to hack things... But, it&#39;s just shy of being great.</p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221083831\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://plasmasturm.org/\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=e17949267bbfe21a0fadf1bbf00592b4&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://plasmasturm.org/\">Aristotle Pagaltzis</a>\n                </div>\n                <a href=\"#comment-221083831\" class=\"permalink\"><time datetime=\"2005-06-11T01:44:42\">2005-06-11T01:44:42</time></a>\n            </div>\n            <div class=\"content\">The importer interface is public, right? Is there anything that prevents someone from writing an importer that handles all files, but doesn&#39;t actually do anything, and just passes calls through to any number of other importers that it calls on without the aid of Spotlight?</div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221083832&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.fluffy.co.uk/spotmeta/&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=a660afb8f1f22ce1b03ad3b532aa05b5&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.fluffy.co.uk/spotmeta/&quot;&gt;Ben Summers&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221083832&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2005-10-20T14:58:11&quot;&gt;2005-10-20T14:58:11&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;&lt;a href=&quot;http://www.fluffy.co.uk/spotmeta/&quot; rel=&quot;nofollow&quot;&gt;SpotMeta&lt;/a&gt; extends Spotlight so you can add arbitrary metadata. It uses xattrs to store them, and is written in such a way that other developers can easily use them too.&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}