{"comments_archived":true,"date":"2005-06-15T00:00:00.000Z","layout":"post","title":"Spotlight Bummers and the CC Metadata Importer","wordpress_id":653,"wordpress_slug":"spotlight-bummers-and-the-cc-metadata-importer","wordpress_url":"http://www.decafbad.com/blog/?p=653","url":"/2005/06/15/spotlight-bummers-and-the-cc-metadata-importer/","path":"2005/06/15/spotlight-bummers-and-the-cc-metadata-importer","content":"<p>I was just snooping through the installer package for Nathan Yergler&#39;s <a href=\"http://yergler.net/projects/cc-spotlight/\">CC Metadata Importer</a> looking for some clues toward resolving my gripes noted in <a href=\"http://www.decafbad.com/blog/2005/06/10/blosxom_tiger_and_spotlight\">Blosxom, Tiger, and Spotlight</a>.  In doing so, I just realized that the <a href=\"http://sourceforge.net/mailarchive/forum.php?thread_id=7432157&amp;forum_id=4355\">guts of this importer are written in Python</a>.  That&#39;s really pretty nifty and I need to look into this some more.</p>\n<p>However, more toward the gripes from <a href=\"http://www.decafbad.com/blog/2005/06/10/blosxom_tiger_and_spotlight\">that previous post</a>, I&#39;m assuming that this <a href=\"http://yergler.net/projects/cc-spotlight/\">CC Metadata Importer</a> will kick out any other importer dealing with MP3 files once it&#39;s installed.  Let&#39;s see what happens...  (<em>runs off to install the importer</em>)</p>\n<p>In fact, after I installed the importer, I noticed metadata missing from my MP3s that had been there pre-install, such as:</p>\n<ul>\n<li>kMDItemMediaTypes              = (Sound)</li>\n<li>kMDItemMusicalGenre            = &quot;Rock&quot;</li>\n<li>kMDItemTitle                   = &quot;Sunday&quot;</li>\n<li>kMDItemTotalBitRate            = 256</li>\n<li>kMDItemAudioBitRate            = 256</li>\n<li>kMDItemAudioChannelCount       = 2</li>\n<li>kMDItemAudioSampleRate         = 44100</li>\n<li>kMDItemAuthors                 = (&quot;David Bowie&quot;)</li>\n</ul>\n<p>I looked into <code>Audio.mdimporter</code> under <code>/System/Library/Spotlight</code> and this is what I found in <code>Contents/Info.plist</code>:</p>\n  <textarea cols=\"60\" rows=\"10\">\n    <key>CFBundleDocumentTypes</key>\n    <array>\n        <dict>\n            <key>CFBundleTypeRole</key>\n            <string>MDImporter</string>\n            <key>LSItemContentTypes</key>\n            <array>\n                <string>public.mp3</string>\n                <string>public.aifc-audio</string>\n                <string>public.aiff-audio</string>\n                <string>com.digidesign.sd2-audio</string>\n                <string>com.microsoft.waveform-audio</string>\n                <string>public.ulaw-audio</string>\n                <string>com.apple.coreaudio-format</string>\n            </array>\n        </dict>\n    </array>\n  </textarea>\n\n<p>  And, what do you know?  This is what I found in <code>Contents/Info.plist</code> for <code>Creative Commons Metadata Importer.mdimporter</code>:</p>\n  <textarea cols=\"60\" rows=\"10\">\n    <key>CFBundleDocumentTypes</key>\n    <array>\n        <dict>\n            <key>CFBundleTypeRole</key>\n            <string>MDImporter</string>\n            <key>LSItemContentTypes</key>\n            <array>\n                <string>public.mp3</string>\n            </array>\n        </dict>\n    </array>\n  </textarea>\n\n<p>This new importer wants to handle <code>public.mp3</code>, just like Apple&#39;s <code>Audio.mdimporter</code>.  So, from my understanding, the CC importer will replace Apple&#39;s--rather than cooperating with it, as I&#39;d like to see.  (I wonder if there&#39;s any way to hack <em>chaining</em> into these things?)</p>\n<p>When I run <code>mdls</code> on an MP3 I have lying around, this is what I get before installing the importer:</p>\n  <textarea cols=\"60\" rows=\"10\">\n01 Sunday.mp3 -------------\nkMDItemAlbum                   = &quot;Heathen&quot;\nkMDItemAttributeChangeDate     = 2005-05-03 20:41:01 -0400\nkMDItemAudioBitRate            = 256\nkMDItemAudioChannelCount       = 2\nkMDItemAudioSampleRate         = 44100\nkMDItemAuthors                 = (&quot;David Bowie&quot;)\nkMDItemContentCreationDate     = 2003-01-22 12:43:35 -0500\nkMDItemContentModificationDate = 2005-05-03 20:41:00 -0400\nkMDItemContentType             = &quot;public.mp3&quot;\nkMDItemContentTypeTree         = (\n    &quot;public.mp3&quot;, \n    &quot;public.audio&quot;, \n    &quot;public.audiovisual-content&quot;, \n    &quot;public.data&quot;, \n    &quot;public.item&quot;, \n    &quot;public.content&quot;\n)\nkMDItemDisplayName             = &quot;01 Sunday.mp3&quot;\nkMDItemDurationSeconds         = 856\nkMDItemFSContentChangeDate     = 2005-05-03 20:41:00 -0400\nkMDItemFSCreationDate          = 2003-01-22 12:43:35 -0500\nkMDItemFSCreatorCode           = 0\nkMDItemFSFinderFlags           = 0\nkMDItemFSInvisible             = 0\nkMDItemFSLabel                 = 0\nkMDItemFSName                  = &quot;01 Sunday.mp3&quot;\nkMDItemFSNodeCount             = 0\nkMDItemFSOwnerGroupID          = 501\nkMDItemFSOwnerUserID           = 501\nkMDItemFSSize                  = 9138342\nkMDItemFSTypeCode              = 0\nkMDItemID                      = 820671\nkMDItemKind                    = &quot;MP3 Audio File&quot;\nkMDItemLastUsedDate            = 2003-01-22 12:43:35 -0500\nkMDItemMediaTypes              = (Sound)\nkMDItemMusicalGenre            = &quot;Rock&quot;\nkMDItemTitle                   = &quot;Sunday&quot;\nkMDItemTotalBitRate            = 256\nkMDItemUsedDates               = (2003-01-22 12:43:35 -0500)\n  </textarea>\n\n<p>So, I installed the CC importer, let it re-index things, and this is what <code>mdls</code> gives me now:</p>\n  <textarea cols=\"60\" rows=\"10\">\n01 Sunday.mp3 -------------\nkMDItemAttributeChangeDate     = 2005-06-15 12:27:57 -0400\nkMDItemContentCreationDate     = 2003-01-22 12:43:35 -0500\nkMDItemContentModificationDate = 2005-05-03 20:41:00 -0400\nkMDItemContentType             = &quot;public.mp3&quot;\nkMDItemContentTypeTree         = (\n    &quot;public.mp3&quot;, \n    &quot;public.audio&quot;, \n    &quot;public.audiovisual-content&quot;, \n    &quot;public.data&quot;, \n    &quot;public.item&quot;, \n    &quot;public.content&quot;\n)\nkMDItemDisplayName             = &quot;01 Sunday.mp3&quot;\nkMDItemFSContentChangeDate     = 2005-05-03 20:41:00 -0400\nkMDItemFSCreationDate          = 2003-01-22 12:43:35 -0500\nkMDItemFSCreatorCode           = 0\nkMDItemFSFinderFlags           = 0\nkMDItemFSInvisible             = 0\nkMDItemFSLabel                 = 0\nkMDItemFSName                  = &quot;01 Sunday.mp3&quot;\nkMDItemFSNodeCount             = 0\nkMDItemFSOwnerGroupID          = 501\nkMDItemFSOwnerUserID           = 501\nkMDItemFSSize                  = 9138342\nkMDItemFSTypeCode              = 0\nkMDItemID                      = 820671\nkMDItemKind                    = &quot;MP3 Audio File&quot;\nkMDItemLastUsedDate            = 2003-01-22 12:43:35 -0500\nkMDItemUsedDates               = (2003-01-22 12:43:35 -0500)\n  </textarea>\n\n<p>In case those two floods of metadata set your head spinning, the post-install metadata is lacking items from the pre-install metadata.  I need to uninstall this importer and get my other metadata back.  And, this isn&#39;t a slight against the importer--it looks like really cool work.  No, this is a bummer of Spotlight.</p>\n<p><em>Almost there...</em></p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221088590\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://ulaluma.com/pyx\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=9e03aaf8edbe4b2c0d25e30ab9a69ffb&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://ulaluma.com/pyx\">Donovan Preston</a>\n                </div>\n                <a href=\"#comment-221088590\" class=\"permalink\"><time datetime=\"2005-06-15T12:55:56\">2005-06-15T12:55:56</time></a>\n            </div>\n            <div class=\"content\">At WWDC I heard some of the Apple developers complaining about this as well. It certainly is a huge shortcoming of spotlight and hopefully it will be addressed soon. Because of this, for example, it would be impossible to have an importer for * which imported the MD5 hash of every file on your system, or something like that.</div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221088591&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.fluffy.co.uk/spotmeta/&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=a660afb8f1f22ce1b03ad3b532aa05b5&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.fluffy.co.uk/spotmeta/&quot;&gt;Ben Summers&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221088591&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2005-10-20T14:54:46&quot;&gt;2005-10-20T14:54:46&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;My latest project, SpotMeta, solves this problem. The extension it installs also allows &lt;a href=&quot;http://www.fluffy.co.uk/spotmeta/devimporters.html&quot; rel=&quot;nofollow&quot;&gt;importers to be cascaded&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}