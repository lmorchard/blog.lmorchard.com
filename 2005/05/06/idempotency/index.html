<!DOCTYPE html>
    <html>
      <head>
        <title>Idempotency: It&#39;s not just for APIs (or, the web is an API) - blog.lmorchard.com</title>
        <meta property="og:type" content="article" />
        <meta property="og:site_name" content="blog.lmorchard.com" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="author" content="Les Orchard" />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"
        />
        <link
          rel="shortcut icon"
          href="https://www.gravatar.com/avatar/b45c48fc9e05922e2f368a9d7d7d8de1?s=16"
        />

        <script
          defer
          data-domain="blog.lmorchard.com"
          src="https://analytics.lmorchard.com/js/plausible.js"
        ></script>

        <link
          rel="stylesheet"
          type="text/css"
          href="/blog.lmorchard.com/index.css"
        />
        <script type="module" src="/blog.lmorchard.com/index.js"></script>

        <link
          href="https://lmorchard.github.io/blog.lmorchard.com/index.rss"
          rel="alternate"
          title="blog.lmorchard.com"
          type="application/rss+xml"
        />

        <link
                href="/blog.lmorchard.com/index.rss"
                rel="alternate"
                title="blog.lmorchard.com"
                type="application/rss+xml"
              />
        <meta property="og:title" content="Idempotency: It&#39;s not just for APIs (or, the web is an API)" />
        <meta
          property="og:url"
          content="https://lmorchard.github.io/blog.lmorchard.com/2005/05/06/idempotency/"
        />
        
        <meta property="og:description" content="Implementors should be aware that the software represents the user in  their interactions over the Internet, and should be careful to allow  the user to be aware of any actions they might take which may have an  unexpected significance to themselves or others.



In particular, the convention has been established that the GET and  HEAD methods SHOULD NOT have the significance of taking an action  other than retrieval. These methods ought to be considered &quot;safe&quot;.  This allows user agents to represent other methods, such as POST, PUT  and DELETE, in a special way, so that the user is made aware of the  fact that a possibly unsafe action is being requested.
Naturally, it is not possible to ensure that the server does not  generate side-effects as a result of performing a GET request; in  fact, some dynamic resources consider that a feature. The important  distinction here is that the user did not request the side-effects,  so therefore cannot be held accountable for them.



Source: HTTP/1.1: Method Definitions





So, like... uh...  Did Google build their accelerator that way just to provide a dramatic example of why explanations of REST focus repeatedly (to the annoyance of some) on the fact that the HTTP GET method is specified as and should be implemented as idempotent?
Seriously.  Did they?  Well, at any rate, I guess they didn&#39;t read this PDF:

Assertion: Prefetching With GET is Not Good.

But, eh, I hadn&#39;t read that PDF until a few minutes ago anyway.  Though, it is kind of funny that I found it as the first hit on Google for the terms &quot;rest get idempotent prefetch problem&quot;.  (Which, snarkily, is really the only reason I mention it.)
Yes, one could argue that only &quot;badly designed&quot; web applications that don&#39;t follow the rules of GET and POST will be affected, but I&#39;m not sure this is an argument that Google (or anyone else who actually builds or uses web apps in the wild) would care to make in this situation.



Source: O&#39;Reilly Radar: Google Web Accelerator considered overzealous





Er, oh yeah...  I guess I can&#39;t be too smug about GET and idempotency, now that I look at a few of the web apps with which I&#39;ve been involved.  Yeah, that smarts.  
Although, I do have to say that most of the nonidempotent-(read: broken)-GET-driven things I&#39;ve put together tend to be behind href=&quot;javascript: do_foo()&quot; function call links which, while hated by some, would have protected you from this--at least until Google&#39;s prefetch learned JavaScript.
Bah, I say.  Maybe it&#39;s time to start actually, really paying attention to this?" />
      </head>
      <body>
        <header class="content-grid">
          <div class="masthead">
            <img src="https://www.gravatar.com/avatar/b45c48fc9e05922e2f368a9d7d7d8de1.jpg?s=128" />
            <div class="title">
              <h1>
                <a href="/blog.lmorchard.com/" title="blog.lmorchard.com">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="100%"
                    height="100%"
                    viewBox="0 0 250 20"
                  >
                    <text
                      lengthAdjust="spacing"
                      fill="currentColor"
                      y="16"
                      textLength="240"
                      x="5"
                    >
                      blog.lmorchard.com
                    </text>
                  </svg>
                </a>
              </h1>
              <h2>
                <rotating-tagline
                  random
                  initial="1"
                  period="7000"
                  src="/blog.lmorchard.com/taglines.json"
                >
                  <a href="/blog.lmorchard.com/" title="It&#39;s all spinning wheels &amp; self-doubt until the first pot of coffee.">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="100%"
                      height="100%"
                      viewBox="0 0 250 20"
                    >
                      <text
                        class="tagline"
                        lengthAdjust="spacing"
                        fill="currentColor"
                        y="16"
                        textLength="240"
                        x="5"
                      >
                        It&#39;s all spinning wheels &amp; self-doubt until the first pot of coffee.
                      </text>
                    </svg>
                  </a>
                </rotating-tagline>
              </h2>
            </div>
          </div>
          <nav class="main-nav">
            <div id="search"></div>
            <ul>
              <li>
                <a href="http://lmorchard.com/"
                  ><span class="fa fa-info-circle"></span> about me</a
                >
              </li>
              <li>
                <a href="/blog.lmorchard.com/archives.html"
                  ><span class="fa fa-archive"></span> archives</a
                >
              </li>
              <li>
                <a href="https://lmorchard.github.io/blog.lmorchard.com/index.rss" title="blog.lmorchard.com"
                  ><span class="fa fa-rss"></span> feed</a
                >
              </li>
              <li class="theme-selector">
                <theme-selector title="Enable dark theme">
                  <label>
                    <input type="checkbox" />
                    <span class="slider"></span>
                  </label>
                </theme-selector>
              </li>
            </ul>
          </nav>
        </header>

        <section class="main"><article
        data-pagefind-body
        class="content content-grid post "
      >
        <header>
          <time
            title="2005-05-06T19:51:54-04:00"
            pubdate="2005-05-06T19:51:54-04:00"
          >
            <span class="prevpost">
              <a
                title="What&#39;s old (scraping) is new again (microformats)"
                href="/blog.lmorchard.com/2005/05/08/whats-old-scraping-is-new-again-microformats/"
                >&nbsp;<span class="fa fa-long-arrow-left"></span>&nbsp;</a
              >
            </span>
            <span class="postdate">
              <a href="/blog.lmorchard.com/2005/"
                >2005</a
              >
              &#8226;
              <a href="/blog.lmorchard.com/2005/05/"
                >May</a
              >
              &#8226;
              <span>06</span>
            </span>
            <span class="nextpost">
              <a
                title="The right place for data in your feed"
                href="/blog.lmorchard.com/2005/05/05/the-right-place-for-data-in-your-feed/"
                >&nbsp;<span class="fa fa-long-arrow-right"></span>&nbsp;</a
              >
            </span>
          </time>
          <h1 class="title">Idempotency: It's not just for APIs (or, the web is an API)</h1>
          
        </header>

        <blockquote>Implementors should be aware that the software represents the user in  their interactions over the Internet, and should be careful to allow  the user to be aware of any actions they might take which may have an  unexpected significance to themselves or others.



<p>In particular, the convention has been established that the GET and  HEAD methods SHOULD NOT have the significance of taking an action  other than retrieval. These methods ought to be considered "safe".  This allows user agents to represent other methods, such as POST, PUT  and DELETE, in a special way, so that the user is made aware of the  fact that a possibly unsafe action is being requested.</p>
<p>Naturally, it is not possible to ensure that the server does not  generate side-effects as a result of performing a GET request; in  fact, some dynamic resources consider that a feature. The important  distinction here is that the user did not request the side-effects,  so therefore cannot be held accountable for them.</p>
</blockquote>


<div align="right"><small>Source: <cite><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP/1.1: Method Definitions</a></cite></small>

</div>



<p>So, like... uh...  Did Google <a href="http://radar.oreilly.com/archives/2005/05/google_web_acce_1.html">build their accelerator</a> <a href="http://37signals.com/svn/archives2/google_web_accelerator_hey_not_so_fast_an_alert_for_web_app_designers.php">that way</a> just to provide a dramatic example of why <a href="http://www.intertwingly.net/blog/784.html">explanations of REST</a> <a href="http://www.xml.com/lpt/a/2004/08/11/rest.html">focus repeatedly</a> (<a href="http://www.franklinmint.fm/blog/archives/000379.html">to the annoyance of some</a>) <a href="http://www-128.ibm.com/developerworks/webservices/library/ws-restvsoap/">on the fact that</a> <em>the HTTP GET method is specified as and should be implemented as <strong>idempotent</strong></em>?</p>
<p>Seriously.  Did they?  Well, at any rate, I guess they didn't read this PDF:</p>
<ul>
<li><a href="http://www.cs.bu.edu/techreports/2001-017-wcw01-proceedings/119_davison.pdf">Assertion: Prefetching With GET is Not Good</a>.</li>
</ul>
<p>But, eh, I hadn't read that PDF until a few minutes ago anyway.  Though, it is kind of funny that I found it as the first hit on Google for the terms "<a href="http://www.google.com/search?q=rest+get+idempotent+prefetch+problem">rest get idempotent prefetch problem</a>".  (Which, snarkily, is really the only reason I mention it.)</p>
<blockquote>Yes, one could argue that only "badly designed" web applications that don't follow the rules of GET and POST will be affected, but I'm not sure this is an argument that Google (or anyone else who actually builds or uses web apps in the wild) would care to make in this situation.
</blockquote>


<div align="right"><small>Source: <cite><a href="http://radar.oreilly.com/archives/2005/05/google_web_acce_1.html">O'Reilly Radar: Google Web Accelerator considered overzealous</a></cite></small>

</div>



<p>Er, oh yeah...  I guess I can't be too smug about GET and idempotency, now that I look at a few of the web apps with which I've been involved.  Yeah, that smarts.  </p>
<p>Although, I do have to say that most of the nonidempotent-(read: broken)-GET-driven things I've put together tend to be behind <code>href="javascript: do_foo()"</code> function call links which, while hated by some, would have protected you from this--at least until Google's prefetch learned JavaScript.</p>
<p>Bah, I say.  Maybe it's time to start actually, really paying attention to this?</p>
<!--more-->


<p>shortname=idempotency</p>
<div id="comments" class="comments archived-comments"><h3>Archived Comments</h3>
<ul class="comments">
<li class="comment" id="comment-221087601">
<div class="meta">
<div class="author">
<a class="avatar image" rel="nofollow" href="http://www.dehora.net/journal/"><img src="http://www.gravatar.com/avatar.php?gravatar_id=c802ceff4c3e8e80b04e8a789d7e88ba&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png" width="" height=""></a>
<a class="avatar name" rel="nofollow" href="http://www.dehora.net/journal/">Bill de hOra</a>
</div>


<p><a href="#comment-221087601" class="permalink"><time datetime="2005-05-06T20:52:02">2005-05-06T20:52:02</time></a></p>
</div>


<div class="content">"So, like... uh... Did Google build their accelerator that way just to provide a dramatic example of why explanations of REST focus repeatedly (to the annoyance of some) on the fact that the HTTP GET method is specified as and should be implemented as idempotent?"
I reckon they might have done just that:
http://www.dehora.net/journal/2005/05/only_the_paranoid_survive.html</div>


</li>
<li class="comment" id="comment-221087605">
<div class="meta">
<div class="author">
<a class="avatar image" rel="nofollow" href="http://plasmasturm.org/"><img src="http://www.gravatar.com/avatar.php?gravatar_id=e17949267bbfe21a0fadf1bbf00592b4&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png" width="" height=""></a>
<a class="avatar name" rel="nofollow" href="http://plasmasturm.org/">Aristotle Pagaltzis</a>
</div>


<p><a href="#comment-221087605" class="permalink"><time datetime="2005-05-08T13:11:45">2005-05-08T13:11:45</time></a></p>
</div>


<div class="content">The problem with "javascript:do_foo()" is that it'll break for people who have no Javascript – obviously.
[It's not at all hard to have our cake and eat it](http://plasmasturm.org/log/292/), though.</div>


</li>
</ul>


</div>

        
      </article>

      <section class="posts-nav content-grid">
        <span class="prev-post">
            <span
              ><a href="/blog.lmorchard.com/2005/05/08/whats-old-scraping-is-new-again-microformats/"
                >What's old (scraping) is new again (microformats)</a
              ></span
            >
            <span
              ><span class="fa fa-long-arrow-left"></span>&nbsp;Previous</span
            >
          </span>
        <span class="next-post">
            <span
              ><a href="/blog.lmorchard.com/2005/05/05/the-right-place-for-data-in-your-feed/"
                >The right place for data in your feed</a
              ></span
            >
            <span>Next&nbsp;<span class="fa fa-long-arrow-right"></span></span>
          </span>
      </section></section>

        <footer class="content-grid">
          <div class="left">
            © 2024 Les Orchard &lt;<a href="mailto:me@lmorchard.com"
              >me@lmorchard.com</a
            >&gt;
          </div>
          <img id="growup" src="/blog.lmorchard.com/uploads/growup.jpg" />
          <nav class="right">
            <ul>
              <li>
                <a href="https://lmorchard.github.io/blog.lmorchard.com/index.rss" title="blog.lmorchard.com"
                  ><span class="fa fa-rss"></span> feed</a
                >
              </li>
            </ul>
          </nav>
        </footer>
      </body>
    </html>