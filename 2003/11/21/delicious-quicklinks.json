{"comments_archived":true,"date":"2003-11-21T00:00:00.000Z","layout":"post","title":"Publishing Quick Links in blosxom with del.icio.us via xmlstarlet","wordpress_id":509,"wordpress_slug":"delicious-quicklinks","wordpress_url":"http://www.decafbad.com/blog/?p=509","url":"/2003/11/21/delicious-quicklinks/","summary":"<p></p><p>\nIn case anyone is interested in using <a href=\"http://del.icio.us/\">del.icio.us</a> with <a href=\"http://www.blosxom.com\">blosxom</a> in place of my own <a href=\"http://www.decafbad.com/twiki/bin/view/Main/BookmarkBlogger\">BookmarkBlogger</a>, get yourself a copy of <a href=\"http://xmlstar.sourceforge.net/\">xmlstarlet</a> and check out this shell script:\n</p><p></p>\n<textarea rows=\"14\" cols=\"70\">\n#!/bin/bash\n\nDATE=${1-<code>date +%Y-%m-%d</code>}\nBLOG=&quot;/Users/deusx/desktop/decafbad-entries/links&quot;\nFN=&quot;${BLOG}/&quot;<code>echo ${DATE} | sed -e &apos;y/0123456789-/oabcdefghij/&apos;</code>&quot;.txt&quot;\n\ncurl -s -u deusx:HAHAHA &apos;<a href=\"http://del.icio.us/api/posts/get?dt=&apos;${DATE}\">http://del.icio.us/api/posts/get?dt=&apos;${DATE}</a> |\\\n    tidy -xml -asxml -q -f /dev/null |\\\n    xml sel -t -o &quot;Quick Links&quot; -n \\\n            -e &apos;ul&apos;  -m &apos;//post&apos; \\\n            -e &apos;li&apos;  -e &apos;a&apos; -a &apos;href&apos; -v &apos;@href&apos; \\\n            -b -v &apos;text()&apos; -n  &gt; ${FN}\n\ntouch -d &quot;${DATE} 23:59&quot; ${FN}\n</textarea>\n\n<p></p><p>\nYou could do this with XSLT, but hacking with a REST-ish &amp; XML producing web service entirely in a shell script seemed oddly appealing to me that week.  Extending this sort of thing to blogging systems other than blosxom is left as an exercise to the reader.\n</p><p></p>\n<p></p><p>\n<b>Update:</b> Hmm, looks like one of the blosxom plugins I&apos;m using hates the variables in my code above.  So I stuck curly braces in, which seem to get through okay.\n</p>\n","path":"2003/11/21/delicious-quicklinks","content":"<p><p>\nIn case anyone is interested in using <a href=\"http://del.icio.us/\">del.icio.us</a> with <a href=\"http://www.blosxom.com\">blosxom</a> in place of my own <a href=\"http://www.decafbad.com/twiki/bin/view/Main/BookmarkBlogger\">BookmarkBlogger</a>, get yourself a copy of <a href=\"http://xmlstar.sourceforge.net/\">xmlstarlet</a> and check out this shell script:\n</p></p>\n<textarea rows=\"14\" cols=\"70\">\n#!/bin/bash\n\nDATE=${1-<code>date +%Y-%m-%d</code>}\nBLOG=&quot;/Users/deusx/desktop/decafbad-entries/links&quot;\nFN=&quot;${BLOG}/&quot;<code>echo ${DATE} | sed -e &#39;y/0123456789-/oabcdefghij/&#39;</code>&quot;.txt&quot;\n\ncurl -s -u deusx:HAHAHA &#39;<a href=\"http://del.icio.us/api/posts/get?dt=&#39;${DATE}\">http://del.icio.us/api/posts/get?dt=&#39;${DATE}</a> |\\\n    tidy -xml -asxml -q -f /dev/null |\\\n    xml sel -t -o &quot;Quick Links&quot; -n \\\n            -e &#39;ul&#39;  -m &#39;//post&#39; \\\n            -e &#39;li&#39;  -e &#39;a&#39; -a &#39;href&#39; -v &#39;@href&#39; \\\n            -b -v &#39;text()&#39; -n  &gt; ${FN}\n\ntouch -d &quot;${DATE} 23:59&quot; ${FN}\n</textarea>\n\n<p><p>\nYou could do this with XSLT, but hacking with a REST-ish &amp; XML producing web service entirely in a shell script seemed oddly appealing to me that week.  Extending this sort of thing to blogging systems other than blosxom is left as an exercise to the reader.\n</p></p>\n<p><p>\n<b>Update:</b> Hmm, looks like one of the blosxom plugins I&#39;m using hates the variables in my code above.  So I stuck curly braces in, which seem to get through okay.\n</p>\n<!--more-->\nshortname=delicious_quicklinks</p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221086678\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://24.102.209.201/weblogs/ben/\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=588bdfdda82be46c638d6956c55ebc38&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://24.102.209.201/weblogs/ben/\">Gnomon</a>\n                </div>\n                <a href=\"#comment-221086678\" class=\"permalink\"><time datetime=\"2003-11-21T10:36:01\">2003-11-21T10:36:01</time></a>\n            </div>\n            <div class=\"content\">It&#39;s probably the interpolate_conditional or interpolate_fancy plugin - it tends to dislike entries that contain dollar symbols. I&#39;ve wrestled with it in the past, but now I don&#39;t bother - I just use &amp;#036; to represent &#036; instead.</div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221086679&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=b2083fa8a0f60df479da38dbc1256def&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;&quot;&gt;Yay&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221086679&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2003-12-05T20:01:13&quot;&gt;2003-12-05T20:01:13&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;Hi,\n</code></pre><p>Cute script. I changed the last line like this to remove the file if it has got no links:</p>\n<p>if test <code>cat ${FN} |wc -c</code> = 18; then rm ${FN}; else touch -d &quot;${DATE} 23:59&quot; ${FN}; fi</div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}