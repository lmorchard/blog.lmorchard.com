{
  "comments_archived": true,
  "date": "2003-03-06T17:39:00.000Z",
  "layout": "post",
  "title": "Building Pipelines with Web Services",
  "wordpress_id": 390,
  "wordpress_slug": "web-service-pipelines",
  "wordpress_url": "http://www.decafbad.com/blog/?p=390",
  "year": "2003",
  "month": "03",
  "day": "06",
  "isDir": false,
  "slug": "web-service-pipelines",
  "postName": "2003-03-06-web-service-pipelines",
  "html": "<p>So <a href=\"http://www.decafbad.com/blog/tech/old/oooodh.html\" target=\"_top\">on this day last year</a>,\nI was excitely thinking about pipelining webservices together like commands in a\nUNIX command line shell.  Lately, I&#39;ve been doing quite a bit of work at the\ncommand line level, more so than I ever have before.  And for all the clunkiness\nand inelegances to be found there, I think the zen has stuck me.\n<br /><br />\nSure, it&#39;s an ass-ugly string of characters that connects commands\nlike find, sort, awk, sed, grep, and ssh together.  But, in constructing such\nmonstrosities, I find myself generating new disposable tools at a rate\nof at least one every minute or so.  And, though a few have found themselves graduating\ninto fuller, cleaner, more general tools, I would have been stuck for\nhours were it not for a quick multi-file grep across a vast plain of comma-separated\nvalue files digested by a tag team of sed and awk.  Then, like magic, I toss in\nan incredibly slow yet, at the time, convenient call to mysql on another server\nbehind a firewall via ssh with a SQL call constructed from the regurgitations\nof said sed and awk brothers.\n<br /><br />\nSo, I&#39;m thinking again:  How hot would this be if it were web services replacing\neach of my commands?  How hot would it be if there was a STDIN, STDOUT, and STDERR\nfor a whole class of web services?  Imagine an enhanced bash or zsh piping these\nbeasts together.  For awhile, I thought my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/XmlRpcFilteringPipe\">XmlRpcFilteringPipe</a> API was the way to\ngo, but lately I&#39;ve been thinking more in the direction of <a href=\"http://www.decafbad.com/twiki/bin/view/Main/REST\">REST</a>.  I have to admit\nthat the XML-RPC API is a bit clunky to use, and besides, no one&#39;s really paid\nit much notice besides using it in the peculiar fashion I do to make my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/WeblogWithWiki\">WeblogWithWiki</a>.\n<br /><br />\nHow about this for a simpler API:  Post data to a URL, receive data in response.\nThere&#39;s your STDIN and STDOUT.  What about STDERR?  Well, I suppose it&#39;s an\neither-or affair, but standard HTTP header error codes can fill in there.  What\nabout command line arguments?  Use query parameters on the URL to which you&#39;re\nposting.  This all seems very web-natural.\n<br /><br />\nNow I just have to write a shell that treats URLs as executable commands.</p>\n<!--more-->\n<p>shortname=web_service_pipelines</p>\n<div id=\"comments\" class=\"comments archived-comments\"><h3>Archived Comments</h3>\n<ul class=\"comments\">\n<li class=\"comment\" id=\"comment-221087414\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://www.novaroot.com\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=0af1f52a082bc92d355d3fc9b29b4c2e&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://www.novaroot.com\">Patrick Lioi</a>\n</div>\n<a href=\"#comment-221087414\" class=\"permalink\"><time datetime=\"2003-03-06T16:27:11\">2003-03-06T16:27:11</time></a>\n</div>\n<div class=\"content\">What would really be beautifil about this is if you could give it a config file (or somesuch) that maps a url to a command name, so the actual commands you enter wouldn't have to look, or even feel, like urls.  I say the more it feels like a regular command line, the better.</div>\n</li>\n<li class=\"comment\" id=\"comment-221087417\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://www.pipetree.com/qmacro\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=1e7ff23dbea0c7d56117bcd51b58b581&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://www.pipetree.com/qmacro\">DJ</a>\n</div>\n<a href=\"#comment-221087417\" class=\"permalink\"><time datetime=\"2003-03-06T16:40:43\">2003-03-06T16:40:43</time></a>\n</div>\n<div class=\"content\">Hi \nThis is something I was talking to some friends about last year at OSCON. There's a lot of mileage in it, I think. I personally have been doing this sort of thing on and off since then, mostly using off the shelf tools such as wget, curl, GET and POST (the latter two from the Perl LWP bundle; you can do PUT with the POST command too). \nThe one question that remains is how to convey the HTTP status code. I've wrapped the call in a script to put the HTTP status code and headers to STDERR, and any HTTP body to STDOUT, but that's not perfect (what about multipart HTTP bodies, for example, with each part having their own HTTP headers)...\nIn all though it's extremely useful. \nOne thing that this sort of approach does for the mind is dispel the myth that REST is bound in any way to XML (of course it's not, but some people seem to think it's XML specific). Use GET (the command) to GET a representation of some data that's plain text. It comes streaming down STDOUT as perfect fodder for your array of shell tools (grep, sort, etc). Lovely.</div>\n</li>\n<li class=\"comment\" id=\"comment-221087420\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=ccb463174df28eddf522e220456d40f2&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"\">matt</a>\n</div>\n<a href=\"#comment-221087420\" class=\"permalink\"><time datetime=\"2003-03-07T10:19:09\">2003-03-07T10:19:09</time></a>\n</div>\n<div class=\"content\">Great post - I thouroughly agree.  Check out some of the tools from Propylon (http://www.propylon.com).  Also, Sun submitted a note to the w3c on xml pipeline definitions (http://www.w3.org/TR/xml-pipeline/).</div>\n</li>\n<li class=\"comment\" id=\"comment-221087423\">\n<div class=\"meta\">\n<div class=\"author\">\n<a class=\"avatar image\" rel=\"nofollow\" \nhref=\"http://mah.everybody.org/weblog/\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=d39ca715bca0c4fa3020bd5f8b445f67&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n<a class=\"avatar name\" rel=\"nofollow\" \nhref=\"http://mah.everybody.org/weblog/\">Mark A. Hershberger</a>\n</div>\n<a href=\"#comment-221087423\" class=\"permalink\"><time datetime=\"2003-03-08T16:32:10\">2003-03-08T16:32:10</time></a>\n</div>\n<div class=\"content\">Check out AxKit (http://www.axkit.org/).  It has XML pipelines that use Providers (which produce XML or XML Infosets) as the source and uses XPATH, XSLT, etc. to process the data.\nI'm working on an RSS provider, for example, as part of my Weblog software.\n(The data doesn't /have/ to be XML, but using XML as the interchange format makes things easier.)</div>\n</li>\n</ul>\n</div>\n",
  "body": "So <a href=\"http://www.decafbad.com/blog/tech/old/oooodh.html\" target=\"_top\">on this day last year</a>,\r\nI was excitely thinking about pipelining webservices together like commands in a\r\nUNIX command line shell.  Lately, I've been doing quite a bit of work at the\r\ncommand line level, more so than I ever have before.  And for all the clunkiness\r\nand inelegances to be found there, I think the zen has stuck me.\r\n<br /><br />\r\nSure, it's an ass-ugly string of characters that connects commands\r\nlike find, sort, awk, sed, grep, and ssh together.  But, in constructing such\r\nmonstrosities, I find myself generating new disposable tools at a rate\r\nof at least one every minute or so.  And, though a few have found themselves graduating\r\ninto fuller, cleaner, more general tools, I would have been stuck for\r\nhours were it not for a quick multi-file grep across a vast plain of comma-separated\r\nvalue files digested by a tag team of sed and awk.  Then, like magic, I toss in\r\nan incredibly slow yet, at the time, convenient call to mysql on another server\r\nbehind a firewall via ssh with a SQL call constructed from the regurgitations\r\nof said sed and awk brothers.\r\n<br /><br />\r\nSo, I'm thinking again:  How hot would this be if it were web services replacing\r\neach of my commands?  How hot would it be if there was a STDIN, STDOUT, and STDERR\r\nfor a whole class of web services?  Imagine an enhanced bash or zsh piping these\r\nbeasts together.  For awhile, I thought my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/XmlRpcFilteringPipe\">XmlRpcFilteringPipe</a> API was the way to\r\ngo, but lately I've been thinking more in the direction of <a href=\"http://www.decafbad.com/twiki/bin/view/Main/REST\">REST</a>.  I have to admit\r\nthat the XML-RPC API is a bit clunky to use, and besides, no one's really paid\r\nit much notice besides using it in the peculiar fashion I do to make my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/WeblogWithWiki\">WeblogWithWiki</a>.\r\n<br /><br />\r\nHow about this for a simpler API:  Post data to a URL, receive data in response.\r\nThere's your STDIN and STDOUT.  What about STDERR?  Well, I suppose it's an\r\neither-or affair, but standard HTTP header error codes can fill in there.  What\r\nabout command line arguments?  Use query parameters on the URL to which you're\r\nposting.  This all seems very web-natural.\r\n<br /><br />\r\nNow I just have to write a shell that treats URLs as executable commands.\r\n<!--more-->\r\nshortname=web_service_pipelines\r\n\r\n<div id=\"comments\" class=\"comments archived-comments\">\r\n            <h3>Archived Comments</h3>\r\n            \r\n        <ul class=\"comments\">\r\n            \r\n        <li class=\"comment\" id=\"comment-221087414\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://www.novaroot.com\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=0af1f52a082bc92d355d3fc9b29b4c2e&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://www.novaroot.com\">Patrick Lioi</a>\r\n                </div>\r\n                <a href=\"#comment-221087414\" class=\"permalink\"><time datetime=\"2003-03-06T16:27:11\">2003-03-06T16:27:11</time></a>\r\n            </div>\r\n            <div class=\"content\">What would really be beautifil about this is if you could give it a config file (or somesuch) that maps a url to a command name, so the actual commands you enter wouldn't have to look, or even feel, like urls.  I say the more it feels like a regular command line, the better.</div>\r\n            \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-221087417\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://www.pipetree.com/qmacro\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=1e7ff23dbea0c7d56117bcd51b58b581&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://www.pipetree.com/qmacro\">DJ</a>\r\n                </div>\r\n                <a href=\"#comment-221087417\" class=\"permalink\"><time datetime=\"2003-03-06T16:40:43\">2003-03-06T16:40:43</time></a>\r\n            </div>\r\n            <div class=\"content\">Hi \r\n\r\nThis is something I was talking to some friends about last year at OSCON. There's a lot of mileage in it, I think. I personally have been doing this sort of thing on and off since then, mostly using off the shelf tools such as wget, curl, GET and POST (the latter two from the Perl LWP bundle; you can do PUT with the POST command too). \r\n\r\nThe one question that remains is how to convey the HTTP status code. I've wrapped the call in a script to put the HTTP status code and headers to STDERR, and any HTTP body to STDOUT, but that's not perfect (what about multipart HTTP bodies, for example, with each part having their own HTTP headers)...\r\n\r\nIn all though it's extremely useful. \r\n\r\nOne thing that this sort of approach does for the mind is dispel the myth that REST is bound in any way to XML (of course it's not, but some people seem to think it's XML specific). Use GET (the command) to GET a representation of some data that's plain text. It comes streaming down STDOUT as perfect fodder for your array of shell tools (grep, sort, etc). Lovely.</div>\r\n            \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-221087420\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=ccb463174df28eddf522e220456d40f2&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"\">matt</a>\r\n                </div>\r\n                <a href=\"#comment-221087420\" class=\"permalink\"><time datetime=\"2003-03-07T10:19:09\">2003-03-07T10:19:09</time></a>\r\n            </div>\r\n            <div class=\"content\">Great post - I thouroughly agree.  Check out some of the tools from Propylon (http://www.propylon.com).  Also, Sun submitted a note to the w3c on xml pipeline definitions (http://www.w3.org/TR/xml-pipeline/).</div>\r\n            \r\n        </li>\r\n    \r\n        <li class=\"comment\" id=\"comment-221087423\">\r\n            <div class=\"meta\">\r\n                <div class=\"author\">\r\n                    <a class=\"avatar image\" rel=\"nofollow\" \r\n                       href=\"http://mah.everybody.org/weblog/\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=d39ca715bca0c4fa3020bd5f8b445f67&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\r\n                    <a class=\"avatar name\" rel=\"nofollow\" \r\n                       href=\"http://mah.everybody.org/weblog/\">Mark A. Hershberger</a>\r\n                </div>\r\n                <a href=\"#comment-221087423\" class=\"permalink\"><time datetime=\"2003-03-08T16:32:10\">2003-03-08T16:32:10</time></a>\r\n            </div>\r\n            <div class=\"content\">Check out AxKit (http://www.axkit.org/).  It has XML pipelines that use Providers (which produce XML or XML Infosets) as the source and uses XPATH, XSLT, etc. to process the data.\r\n\r\nI'm working on an RSS provider, for example, as part of my Weblog software.\r\n\r\n(The data doesn't /have/ to be XML, but using XML as the interchange format makes things easier.)</div>\r\n            \r\n        </li>\r\n    \r\n        </ul>\r\n    \r\n        </div>\r\n    ",
  "parentPath": "../blog.lmorchard.com/posts/archives/2003",
  "path": "2003/03/06/web-service-pipelines",
  "summary": "<p>So <a href=\"http://www.decafbad.com/blog/tech/old/oooodh.html\" target=\"_top\">on this day last year</a>,\nI was excitely thinking about pipelining webservices together like commands in a\nUNIX command line shell.  Lately, I&apos;ve been doing quite a bit of work at the\ncommand line level, more so than I ever have before.  And for all the clunkiness\nand inelegances to be found there, I think the zen has stuck me.\n<br><br>\nSure, it&apos;s an ass-ugly string of characters that connects commands\nlike find, sort, awk, sed, grep, and ssh together.  But, in constructing such\nmonstrosities, I find myself generating new disposable tools at a rate\nof at least one every minute or so.  And, though a few have found themselves graduating\ninto fuller, cleaner, more general tools, I would have been stuck for\nhours were it not for a quick multi-file grep across a vast plain of comma-separated\nvalue files digested by a tag team of sed and awk.  Then, like magic, I toss in\nan incredibly slow yet, at the time, convenient call to mysql on another server\nbehind a firewall via ssh with a SQL call constructed from the regurgitations\nof said sed and awk brothers.\n<br><br>\nSo, I&apos;m thinking again:  How hot would this be if it were web services replacing\neach of my commands?  How hot would it be if there was a STDIN, STDOUT, and STDERR\nfor a whole class of web services?  Imagine an enhanced bash or zsh piping these\nbeasts together.  For awhile, I thought my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/XmlRpcFilteringPipe\">XmlRpcFilteringPipe</a> API was the way to\ngo, but lately I&apos;ve been thinking more in the direction of <a href=\"http://www.decafbad.com/twiki/bin/view/Main/REST\">REST</a>.  I have to admit\nthat the XML-RPC API is a bit clunky to use, and besides, no one&apos;s really paid\nit much notice besides using it in the peculiar fashion I do to make my <a href=\"http://www.decafbad.com/twiki/bin/view/Main/WeblogWithWiki\">WeblogWithWiki</a>.\n<br><br>\nHow about this for a simpler API:  Post data to a URL, receive data in response.\nThere&apos;s your STDIN and STDOUT.  What about STDERR?  Well, I suppose it&apos;s an\neither-or affair, but standard HTTP header error codes can fill in there.  What\nabout command line arguments?  Use query parameters on the URL to which you&apos;re\nposting.  This all seems very web-natural.\n<br><br>\nNow I just have to write a shell that treats URLs as executable commands.</p>\n",
  "prevPostPath": "2003/03/10/ping-pong",
  "nextPostPath": "2003/03/06/throwable-phone"
}