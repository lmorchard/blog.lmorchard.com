{"comments_archived":true,"date":"2003-05-07T00:00:00.000Z","layout":"post","title":"iTunes Music Store RSS Feeds","wordpress_id":414,"wordpress_slug":"itunes-rss","wordpress_url":"http://www.decafbad.com/blog/?p=414","url":"/2003/05/07/itunes-rss/","summary":"<p>Yeah, I know I <a href=\"http://www.decafbad.com/blog/geek/itunes_does_drm.html\" target=\"_top\">gave the iTMS a &apos;bah&apos;</a>\nlast week in response to discovering DRM under the hood.  But I&apos;ve softened in\nmy opinion since then.  And bought a few more songs that I haven&apos;t heard in years.\nAnd burned an Audio CD.  And wasn&apos;t <strong>too</strong> inconvenienced.<br><br><br>\nMy girlfriend and I almost\nbought iPods last night, and though we resisted the temptation this time, I expect that\nwe&apos;ll end up with them before long.  And when that happens, I imagine we&apos;ll try sharing\ntracks, and that doesn&apos;t seem to be too inconvenient either.  And then, there&apos;s the\nfact that the iTMS seems to have a pretty nifty set of underpinnings that look like\nfun to play with.\n<br><br>\nSo now, like anything I&apos;m interested in on the interweb, I want to swallow it up with my aggregator.\n<br><br>\nThus, I attempt a new project:  <a href=\"http://www.decafbad.com/twiki/bin/view/Main/ItunesMusicStoreToRss\">ItunesMusicStoreToRss</a>\n<br><br>\nProgress so far, but I&apos;ve hit a stumbling block.  Anyone want to help?\n<br><br>\n<strong>Update:</strong> A little bit of cut &amp; paste from the wiki page:\n<br><br>\nIf you spy on iTunes while browsing to a &quot;Just Added&quot; section of a genre, you&apos;ll find that a URL like the following is accessed: \n<br><br>\n<a href=\"http://ax.phobos.apple.com.edgesuite.net/WebObjects/MZStore.woa/wa/com.apple.jingle.app.store.DirectAction/viewPlayListsPage?fcId=145690&amp;pageType=justAdded&amp;id=21\" target=\"_top\">(it&apos;s a long URL)</a>\n<br><br>\nThe response to that URL is some very interesting XML that looks like a GUI language.  Buried in the GUI recipe, however, is what I want flowing into my aggregator.  So, I dust off my XSL skills and have a go at mangling this content into <a href=\"http://www.decafbad.com/twiki/bin/view/Main/RSS\">RSS</a>.  I seem to have been successful.  A test run appears to validate, and is accepted in my aggregator. \n<br><br>\nThe problem, though, lies in the aforementioned URL.  Everything seems pretty clear and straightforward, and I can change genre&apos;s by supplying discovered ID&apos;s to the id parameter.  However, the  &quot;fcid=145690&quot; parameter  is an unknown to me.  It seems to change, though I haven&apos;t yet investigated its derivation or how often it changes.  I was working on things yesterday, and the value was one thing, this morning it was another. If the number is not valid, unexpected results happen, sometimes resulting in HTML output describing an application exception.  So, until the fcid mystery is solved, I&apos;ve yet to automate this transformation. \n<br><br>\nAny ideas out there on the lazyweb?  Visit the wiki page (<a href=\"http://www.decafbad.com/twiki/bin/view/Main/ItunesMusicStoreToRss\">ItunesMusicStoreToRss</a>) and feel free to poke fun at my XSL skills.\n</p>","path":"2003/05/07/itunes-rss","content":"<p>Yeah, I know I <a href=\"http://www.decafbad.com/blog/geek/itunes_does_drm.html\" target=\"_top\">gave the iTMS a &#39;bah&#39;</a>\nlast week in response to discovering DRM under the hood.  But I&#39;ve softened in\nmy opinion since then.  And bought a few more songs that I haven&#39;t heard in years.\nAnd burned an Audio CD.  And wasn&#39;t <strong>too</strong> inconvenienced.<br><br /><br />\nMy girlfriend and I almost\nbought iPods last night, and though we resisted the temptation this time, I expect that\nwe&#39;ll end up with them before long.  And when that happens, I imagine we&#39;ll try sharing\ntracks, and that doesn&#39;t seem to be too inconvenient either.  And then, there&#39;s the\nfact that the iTMS seems to have a pretty nifty set of underpinnings that look like\nfun to play with.\n<br /><br />\nSo now, like anything I&#39;m interested in on the interweb, I want to swallow it up with my aggregator.\n<br /><br />\nThus, I attempt a new project:  <a href=\"http://www.decafbad.com/twiki/bin/view/Main/ItunesMusicStoreToRss\">ItunesMusicStoreToRss</a>\n<br /><br />\nProgress so far, but I&#39;ve hit a stumbling block.  Anyone want to help?\n<br /><br />\n<strong>Update:</strong> A little bit of cut &amp; paste from the wiki page:\n<br /><br />\nIf you spy on iTunes while browsing to a &quot;Just Added&quot; section of a genre, you&#39;ll find that a URL like the following is accessed: \n<br /><br />\n<a href=\"http://ax.phobos.apple.com.edgesuite.net/WebObjects/MZStore.woa/wa/com.apple.jingle.app.store.DirectAction/viewPlayListsPage?fcId=145690&amp;pageType=justAdded&amp;id=21\" target=\"_top\">(it&#39;s a long URL)</a>\n<br /><br />\nThe response to that URL is some very interesting XML that looks like a GUI language.  Buried in the GUI recipe, however, is what I want flowing into my aggregator.  So, I dust off my XSL skills and have a go at mangling this content into <a href=\"http://www.decafbad.com/twiki/bin/view/Main/RSS\">RSS</a>.  I seem to have been successful.  A test run appears to validate, and is accepted in my aggregator. \n<br /><br />\nThe problem, though, lies in the aforementioned URL.  Everything seems pretty clear and straightforward, and I can change genre&#39;s by supplying discovered ID&#39;s to the id parameter.  However, the  &quot;fcid=145690&quot; parameter  is an unknown to me.  It seems to change, though I haven&#39;t yet investigated its derivation or how often it changes.  I was working on things yesterday, and the value was one thing, this morning it was another. If the number is not valid, unexpected results happen, sometimes resulting in HTML output describing an application exception.  So, until the fcid mystery is solved, I&#39;ve yet to automate this transformation. \n<br /><br />\nAny ideas out there on the lazyweb?  Visit the wiki page (<a href=\"http://www.decafbad.com/twiki/bin/view/Main/ItunesMusicStoreToRss\">ItunesMusicStoreToRss</a>) and feel free to poke fun at my XSL skills.\n<!--more-->\nshortname=itunes_rss</p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221090443\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://www.scifihifi.com\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=a97f3ecb15bebb41d330c6e27457378f&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://www.scifihifi.com\">Buzz Andersen</a>\n                </div>\n                <a href=\"#comment-221090443\" class=\"permalink\"><time datetime=\"2003-05-07T16:30:16\">2003-05-07T16:30:16</time></a>\n            </div>\n            <div class=\"content\">What seems to be the problem?</div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221090444&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2ac2cffd36ada8c734b90e02a1e5c1ac&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221090444&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2003-05-07T17:22:19&quot;&gt;2003-05-07T17:22:19&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;Oh, it&#39;s rambled about on the wiki page.  I just updated the blog entry with more info though.  Seems there&#39;s a parameter (fcid) to the URL for just added albums that I can&#39;t decipher.&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221090445&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.scifihifi.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=a97f3ecb15bebb41d330c6e27457378f&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.scifihifi.com&quot;&gt;Buzz Andersen&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221090445&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2003-05-07T19:07:37&quot;&gt;2003-05-07T19:07:37&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;Sorry--I&#39;m not hip to the whole Wiki thing yet.  I&#39;ll take a look over there...&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221090446&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=190370de043f10f2760322e8902b137c&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;&quot;&gt;Nathan Pearson&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221090446&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2003-05-08T04:17:54&quot;&gt;2003-05-08T04:17:54&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;I imagine fcId is tied to an internal value that&#39;s changed by a content management system.  Even if it changes a few times in a noticeable pattern, I don&#39;t imagine that it would be reliable forever.  The only foolproof way I can think of retrieving the contents of a (or all of them) Just Added &#39;playlist&#39; is by doing the following;\n</code></pre><ol>\n<li><p>Retrieving the XML from viewPlaylistsPage without any parameters and storing the attribute of the ViewGenre element that matches your preferred genre(s).  I don&#39;t imagine these would remain static for all time either, judging from the numbers;</p>\n</li>\n<li><p>For each genre id that was stored from step 1, load the XML from vewGenre?id=.  Find the GotoURL element that contains the text Just Added and grab it&#39;s url attribute.  Add on &amp;batchNumber=0;</p>\n</li>\n<li><p>If you&#39;re fine with just one page being transformed, use the resulting XML for the transformation to RSS.  Otherwise, store the album information that you want to keep from the page and look for the value &#39;X-Y of Z&#39;.  If Y and Z don&#39;t match, increment batchNumber and process the resulting XML.  Repeat for other genres.</p>\n</li>\n</ol>\n<p>It&#39;d probably be best to cache the resulting RSS feed and let it live for at least 24 hours.  With at least three to four round trips to determine the albums in a playlist without knowledge of the fcId values, I don&#39;t imagine it would be very responsive.</div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221090447&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2ac2cffd36ada8c734b90e02a1e5c1ac&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221090447&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2003-05-08T15:46:01&quot;&gt;2003-05-08T15:46:01&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;Nathan: Hrm...  Yeah, that&#39;s the approach I was afraid that I&#39;d have to end up taking, but it&#39;s probably the most reliable.  Hmph.&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}