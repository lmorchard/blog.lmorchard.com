{"comments_archived":true,"date":"2007-04-05T00:00:00.000Z","layout":"post","tags":["hacks","rss","atom","xsl","ficlets","scrapers","scraping"],"title":"Ficlets enhanced author feed, an XSL scraper hack","wordpress_id":1046,"wordpress_slug":"ficlets-enhanced-author-feed-an-xsl-scraper-hack","wordpress_url":"http://decafbad.com/blog/2007/04/05/ficlets-enhanced-author-feed-an-xsl-scraper-hack","url":"/2007/04/05/ficlets-enhanced-author-feed-an-xsl-scraper-hack/","path":"2007/04/05/ficlets-enhanced-author-feed-an-xsl-scraper-hack","content":"<p>I&#39;ve been trying to get myself serious about writing and even set up a <a href=\"http://decafbad.com/skein/\">personal slush pile for my output</a>.  Then, I found <a href=\"http://ficlets.com/authors/l_m_orchard\">Ficlets</a>, and spewed a few quick starter stories there.  And then... I stopped.  I&#39;m hoping to pick it up again very soon, but I guess that&#39;s the nature of my <a href=\"http://decafbad.com/blog/2006/05/26/confessions-of-a-serial-enthusiast\">serial enthusiasm</a>—it doesn&#39;t just apply to hacking.</p>\n<p>So, here&#39;s something ironic:  I just spent a few hours tonight throwing together a hack for <a href=\"http://ficlets.com/authors/l_m_orchard\">Ficlets</a>.  See, <a href=\"http://ficlets.com/authors/l_m_orchard\">Ficlets</a> runs on original stories, comments, ratings, and sequels and prequels to stories.  You can get an Atom feed of an author&#39;s stories and a feed of comments—but it seems like there&#39;s no way to get notified of prequels and sequels, which are a very gratifying part of the whole shebang.</p>\n<p>With that in mind, check out this RSS feed:</p>\n<ul>\n<li><a href=\"http://decafbad.com/2005/12/FeedMagick/www-bin/ficlets.php?author=l_m_orchard\"><code>http://decafbad.com/2005/12/FeedMagick/www-bin/ficlets.php?author=l_m_orchard</code></a></li>\n</ul>\n<p>That&#39;s a blend of all my stories, comments on my stories, as well as prequels and sequels found for my stories.  Subscribing to that feed will give me updates whenever there&#39;s anything new in all the above.  It&#39;s thrown together using a semi-crazy mix of my <a href=\"http://decafbad.com/trac/wiki/FeedMagick\">FeedMagick</a> package for caching, and some XSL for scraping.  If you&#39;d like a feed like this of your own, just replace <code>l_m_orchard</code> for your own author name in the <code>author</code> parameter.</p>\n<p><strong>Please note, however, that this little service is hosted on my site and may go away at any time for any reason.</strong></p>\n<p>In case you&#39;re interested in what&#39;s under the hood, here&#39;s the quick and dirty XSL that&#39;s behind it:</p>\n<ul>\n<li><a href=\"http://decafbad.com/2007/04/ficlets.xsl\"><code>http://decafbad.com/2007/04/ficlets.xsl</code></a></li>\n</ul>\n<p>This thing&#39;s made possible because the <a href=\"http://ficlets.com/authors/l_m_orchard\">Ficlets</a> feeds are XML, <strong>and so are the XHTML pages happily infested with microformats</strong>.  If they ever go invalid, this scraper breaks.  But, that&#39;s the nature of scrapers, and it works for now.  Oh, and although they provide Atom, this feed is RSS 2.0.  Why?  Because it was easier that way.  I might put some more effort into an Atom feed, but my itch has so far been scratched.</p>\n<div id=\"comments\" class=\"comments archived-comments\">\n            <h3>Archived Comments</h3>\n\n        <ul class=\"comments\">\n\n        <li class=\"comment\" id=\"comment-221084356\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://rss-central.net/megalar\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=1869681b309d36e59764f51c7f210406&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://rss-central.net/megalar\">megalar</a>\n                </div>\n                <a href=\"#comment-221084356\" class=\"permalink\"><time datetime=\"2007-04-05T09:31:48\">2007-04-05T09:31:48</time></a>\n            </div>\n            <div class=\"content\"><p>I had already decided I was gonna grab your FeedMagick source and try to do something with it but this just gives me more incentive as a Ficlets lover. I recently read your thoughts on pipes and feel much the same way =&gt; meh to GUI, especially a buggy one. It seems much more satisfying to just tell php what I want done and watch it go rather than spend 20 minutes fiddling with a silly applet.</p></div>\n\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221084357&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221084357&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2007-04-05T14:04:06&quot;&gt;2007-04-05T14:04:06&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;@meglar: Well, just to warn ya - FeedMagick needs a &lt;em&gt;lot&lt;/em&gt; of work.  :)  I&#39;ve got ideas for it, but have yet to get back around to it.&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221084360&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://lawver.net&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=368732c30e3525fab12f9cd0664b4ba0&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://lawver.net&quot;&gt;Kevin Lawver&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221084360&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2007-04-05T14:59:37&quot;&gt;2007-04-05T14:59:37&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;That may be the coolest thing ever.  Good job!&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221084362&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221084362&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2007-04-05T15:14:00&quot;&gt;2007-04-05T15:14:00&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;@Kevin: One thing that &lt;em&gt;might&lt;/em&gt; not be cool is that this XSL hits Ficlets.com once for each story in the feed to pick up the additional info, but I try to cache the feed on my end for about 20 minutes per author...  so hopefully it doesn&#39;t put any more stress on your site than I might have done manually in opening all my stories in tabs to check for comments and prequels/sequels.  :)&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221084364&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://lawver.net&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=368732c30e3525fab12f9cd0664b4ba0&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://lawver.net&quot;&gt;Kevin Lawver&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221084364&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2007-04-05T15:44:25&quot;&gt;2007-04-05T15:44:25&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;That&#39;s fine.  I think we can handle it.  We&#39;ll get prequels/sequels added to either the author feed or their own feed in the near future.&lt;/p&gt;&lt;/div&gt;\n\n    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221084365&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.decafbad.com&quot;&gt;l.m.orchard&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221084365&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2007-04-05T21:05:26&quot;&gt;2007-04-05T21:05:26&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;@Kevin: Yeah, I think the bare author feed is a good thing to leave alone.  But, a personal author feed with comments and prequels/sequels and possibly notes would be excellent!  You know, basically, notifications of significant events that&#39;d bring me back to the site.&lt;/p&gt;\n</code></pre><p>I&#39;m also thinking it might be neat to gently spider through prequels and sequels on stories to map them out and track progress, but that&#39;s just a future hackery idea.</p></div>\n\n        </li>\n\n        <li class=\"comment\" id=\"comment-221084368\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=e5d9a8832bed84d8d713ab0ef953d1af&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"\">Roger Costello</a>\n                </div>\n                <a href=\"#comment-221084368\" class=\"permalink\"><time datetime=\"2007-04-06T13:54:55\">2007-04-06T13:54:55</time></a>\n            </div>\n            <div class=\"content\"><p>Is there any way for me to view the documents you are mashing up to generate the resulting RSS document?  I am particularly interested in seeing how Microformats are being mashed up.  Thanks!</p></div>\n\n        </li>\n\n        <li class=\"comment\" id=\"comment-221084369\">\n            <div class=\"meta\">\n                <div class=\"author\">\n                    <a class=\"avatar image\" rel=\"nofollow\" \n                       href=\"http://www.decafbad.com\"><img src=\"http://www.gravatar.com/avatar.php?gravatar_id=2377f34a68801b861c3e54e1301f0dce&amp;size=32&amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png\"/></a>\n                    <a class=\"avatar name\" rel=\"nofollow\" \n                       href=\"http://www.decafbad.com\">l.m.orchard</a>\n                </div>\n                <a href=\"#comment-221084369\" class=\"permalink\"><time datetime=\"2007-04-06T14:25:44\">2007-04-06T14:25:44</time></a>\n            </div>\n            <div class=\"content\"><p>Roger: Sure...  Really, the only things I&#39;m mashing up are the author Atom feed, like mine here:</p>\n\n<p><a href=\"http://ficlets.com/feeds/author/l\">http://ficlets.com/feeds/author/l</a><em>m</em>orchard</p>\n\n<p>And then, I chase down each story in the feed, like this one:</p>\n\n<p><a href=\"http://ficlets.com/stories/1763\">http://ficlets.com/stories/1763</a></p>\n\n<p><p>You can view source on a story page and see all the information sprinkled in there - look for &#39;abbr&#39; tags and class names like &#39;pubdate&#39; and &#39;hentry&#39;.  The pages are also valid XML, so they can be manipulated right in XSL.</p></div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;li class=&quot;comment&quot; id=&quot;comment-221084370&quot;&gt;\n        &lt;div class=&quot;meta&quot;&gt;\n            &lt;div class=&quot;author&quot;&gt;\n                &lt;a class=&quot;avatar image&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.blurbtree.com&quot;&gt;&lt;img src=&quot;http://www.gravatar.com/avatar.php?gravatar_id=fa30e56b9a686d32cdae390345019928&amp;amp;size=32&amp;amp;default=http://mediacdn.disqus.com/1320279820/images/noavatar32.png&quot;/&gt;&lt;/a&gt;\n                &lt;a class=&quot;avatar name&quot; rel=&quot;nofollow&quot; \n                   href=&quot;http://www.blurbtree.com&quot;&gt;Bill&lt;/a&gt;\n            &lt;/div&gt;\n            &lt;a href=&quot;#comment-221084370&quot; class=&quot;permalink&quot;&gt;&lt;time datetime=&quot;2009-01-28T00:36:02&quot;&gt;2009-01-28T00:36:02&lt;/time&gt;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;content&quot;&gt;&lt;p&gt;I&#39;m sure that many Ficlets fans are sad that Ficlets.com is no more. We are in the process of constructing &lt;a href=&quot;http://www.blurbtree.com&quot; rel=&quot;nofollow&quot;&gt;Blurbtree.com&lt;/a&gt; a site that might be helpful for them. It&#39;s not a replacement for Ficlets, but it&#39;s a clean start and we&#39;ll build the site based on the feedback we get from the online community. Please give it a try and let us know what we can do to make it fit your needs. \n</code></pre><p>You can also get more information at our <a href=\"http://www.blurbtree.com/faqs.php\" rel=\"nofollow\">Blurbtree FAQ</a>.</p></div></p>\n<pre><code>    &lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;\n</code></pre>"}