8<--- { "draft": true, "title": "Miscellanea for 2025-06-04", "time": "23:59:00-07:00", "type": "miscellanea", "slug": "miscellanea", "tags": [ "miscellanea" ] }

- Hello world!

8<--- { "draft": true, "title": "Random Adventures in Grafana and Vibe Coding with Claude", "slug": "vibe-coding-claude-grafana", "tags": [ "grafana", "claude", "vibecoding", "llms", "ai" ], "time": "15:26:23-07:00" }

Since I sort of re-launched my blog, I was interested in monitoring traffic and logs more closely.

It's been awhile since I ran stuff like Grafana, Prometheus, and Loki on my own hardware - but it turns out there's [this handy all-in-one docker-compose setup that runs on my Synology NAS](https://github.com/ddiiwoong/synology-prometheus). That fired up with very little fuss and very shortly I had some metrics machinery in my basement.

Well, with the exception of Loki, that is. So, I [read the docs](https://grafana.com/docs/loki/latest/setup/install/docker/), and soon enough got Loki running alongside the rest of the crew on my NAS.

The next thing is that my blog is a static site hosted on AWS S3 and CloudFront. Both S3 and CloudFront will spew logs into an S3 bucket, but I've never before bothered trying to read them.

Well, I *still* didn't want to be bothered all that much. So, I loaded up Claude.ai and described my problem:

> Okay, so I want to get some logs out of cloudfront: I have enabled a new style of log delivery that stores gzipped JSON logs in an S3 bucket at this path: s3://lmorchard-logs/blog.lmorchard.com/ and they appear with names like E5YXU82LZHZCM.2025-06-04-04.d024d283.gz
> 
> Can you help me write a script for my home loki server to download only new log files as they arrive and push them into loki?

Claude stepped right up and said:

>  I'll help you create a script to process CloudFront logs and push them to Loki. Let me write a Python script that tracks processed files and handles the gzipped JSON format.

After a bit of vibing back & forth, this is where we ended up:
- https://claude.ai/public/artifacts/9fa52759-3b21-4e5a-a854-222d1696802b

I wrote no Python, just henpecked Claude repeatedly and occasionally tried running the results until it seemed to be doing the needful.
- Then, I badgered it with questions about building Grafana dashboards that I *could* have figured out by reading the docs - but, again: lazy.

![[attachments/2025-06-04-blog-lmorchard-graphs.png]]